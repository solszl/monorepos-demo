{"version":3,"file":"index.es.js","sources":["../node_modules/core-js/library/modules/_to-integer.js","../node_modules/core-js/library/modules/_defined.js","../node_modules/core-js/library/modules/_global.js","../node_modules/core-js/library/modules/_core.js","../node_modules/core-js/library/modules/_a-function.js","../node_modules/core-js/library/modules/_ctx.js","../node_modules/core-js/library/modules/_fails.js","../node_modules/core-js/library/modules/_descriptors.js","../node_modules/core-js/library/modules/es6.object.define-property.js","../node_modules/core-js/library/fn/object/define-property.js","../node_modules/core-js/library/modules/_has.js","../node_modules/core-js/library/modules/_redefine.js","../node_modules/core-js/library/modules/_object-sap.js","../node_modules/core-js/library/modules/es6.object.is-extensible.js","../node_modules/core-js/library/fn/object/is-extensible.js","../node_modules/core-js/library/modules/es6.object.prevent-extensions.js","../node_modules/core-js/library/fn/object/prevent-extensions.js","../node_modules/core-js/library/modules/_uid.js","../node_modules/core-js/library/modules/_meta.js","../node_modules/core-js/library/modules/_shared.js","../node_modules/core-js/library/modules/_wks.js","../node_modules/core-js/library/modules/_set-to-string-tag.js","../node_modules/core-js/library/modules/_wks-ext.js","../node_modules/core-js/library/modules/_wks-define.js","../node_modules/core-js/library/modules/_to-object.js","../node_modules/core-js/library/modules/es6.object.keys.js","../node_modules/core-js/library/fn/object/keys.js","../node_modules/core-js/library/modules/_array-includes.js","../node_modules/core-js/library/modules/_cof.js","../node_modules/core-js/library/modules/_iobject.js","../node_modules/core-js/library/modules/_to-iobject.js","../node_modules/core-js/library/modules/_to-length.js","../node_modules/core-js/library/modules/_to-absolute-index.js","../node_modules/core-js/library/modules/_shared-key.js","../node_modules/core-js/library/modules/_object-keys-internal.js","../node_modules/core-js/library/modules/_enum-bug-keys.js","../node_modules/core-js/library/modules/_object-keys.js","../node_modules/core-js/library/fn/object/get-own-property-symbols.js","../node_modules/core-js/library/modules/_object-pie.js","../node_modules/core-js/library/modules/es6.array.is-array.js","../node_modules/core-js/library/fn/array/is-array.js","../node_modules/core-js/library/modules/_is-array.js","../node_modules/core-js/library/modules/_to-primitive.js","../node_modules/core-js/library/modules/_property-desc.js","../node_modules/core-js/library/modules/es6.object.create.js","../node_modules/core-js/library/fn/object/create.js","../node_modules/core-js/library/modules/es6.object.define-properties.js","../node_modules/core-js/library/fn/object/define-properties.js","../node_modules/core-js/library/modules/_object-dps.js","../node_modules/core-js/library/modules/_dom-create.js","../node_modules/core-js/library/modules/_html.js","../node_modules/core-js/library/modules/_object-create.js","../node_modules/core-js/library/modules/es6.object.get-own-property-names.js","../node_modules/core-js/library/fn/object/get-own-property-names.js","../node_modules/core-js/library/modules/_object-gopn.js","../node_modules/core-js/library/modules/_object-gopn-ext.js","../node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","../node_modules/core-js/library/fn/object/get-own-property-descriptor.js","../node_modules/core-js/library/modules/_ie8-dom-define.js","../node_modules/core-js/library/modules/_object-gopd.js","../node_modules/core-js/library/modules/es6.symbol.js","../node_modules/core-js/library/modules/_enum-keys.js","../node_modules/core-js/library/modules/es7.symbol.async-iterator.js","../node_modules/core-js/library/modules/es7.symbol.observable.js","../node_modules/core-js/library/fn/symbol/index.js","../node_modules/core-js/library/modules/_iter-step.js","../node_modules/core-js/library/modules/_iterators.js","../node_modules/core-js/library/modules/es6.array.iterator.js","../node_modules/core-js/library/modules/web.dom.iterable.js","../node_modules/core-js/library/fn/symbol/iterator.js","../node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js","../node_modules/core-js/library/modules/_is-object.js","../node_modules/core-js/library/modules/_an-object.js","../node_modules/core-js/library/modules/_object-dp.js","../node_modules/core-js/library/modules/_hide.js","../node_modules/core-js/library/modules/_export.js","../node_modules/core-js/library/modules/_iter-create.js","../node_modules/core-js/library/modules/es6.object.get-prototype-of.js","../node_modules/core-js/library/fn/object/get-prototype-of.js","../node_modules/core-js/library/modules/_string-at.js","../node_modules/core-js/library/modules/_object-gpo.js","../node_modules/core-js/library/modules/_iter-define.js","../node_modules/core-js/library/modules/es6.string.iterator.js","../node_modules/core-js/library/modules/_classof.js","../node_modules/core-js/library/modules/_an-instance.js","../node_modules/core-js/library/modules/_iter-call.js","../node_modules/core-js/library/modules/_is-array-iter.js","../node_modules/core-js/library/modules/core.get-iterator-method.js","../node_modules/core-js/library/modules/_for-of.js","../node_modules/core-js/library/modules/_species-constructor.js","../node_modules/core-js/library/modules/web.immediate.js","../node_modules/core-js/library/fn/set-immediate.js","../node_modules/core-js/library/modules/_task.js","../node_modules/core-js/library/fn/clear-immediate.js","../node_modules/core-js/library/modules/_invoke.js","../node_modules/core-js/library/modules/_microtask.js","../node_modules/core-js/library/modules/_new-promise-capability.js","../node_modules/core-js/library/modules/_perform.js","../node_modules/core-js/library/modules/_user-agent.js","../node_modules/core-js/library/modules/_promise-resolve.js","../node_modules/core-js/library/modules/_redefine-all.js","../node_modules/core-js/library/modules/_set-species.js","../node_modules/core-js/library/modules/_create-property.js","../node_modules/core-js/library/modules/es6.array.from.js","../node_modules/core-js/library/fn/array/from.js","../node_modules/core-js/library/modules/_iter-detect.js","../node_modules/core-js/library/modules/es6.promise.js","../node_modules/core-js/library/modules/_library.js","../node_modules/core-js/library/modules/es7.promise.finally.js","../node_modules/core-js/library/modules/es7.promise.try.js","../node_modules/core-js/library/fn/promise.js","../node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js","../node_modules/core-js/library/modules/_set-proto.js","../node_modules/core-js/library/modules/es6.object.set-prototype-of.js","../node_modules/core-js/library/fn/object/set-prototype-of.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/core-js/library/modules/_validate-collection.js","../node_modules/core-js/library/modules/_collection-strong.js","../node_modules/core-js/library/modules/_array-species-constructor.js","../node_modules/core-js/library/modules/_array-species-create.js","../node_modules/core-js/library/modules/_collection.js","../node_modules/core-js/library/modules/_array-methods.js","../node_modules/core-js/library/modules/es6.map.js","../node_modules/core-js/library/modules/_array-from-iterable.js","../node_modules/core-js/library/modules/_collection-to-json.js","../node_modules/core-js/library/modules/es7.map.to-json.js","../node_modules/core-js/library/modules/_set-collection-of.js","../node_modules/core-js/library/modules/es7.map.of.js","../node_modules/core-js/library/modules/_set-collection-from.js","../node_modules/core-js/library/modules/es7.map.from.js","../node_modules/core-js/library/fn/map.js","../packages/loader/src/cache-manager.js","../node_modules/promise-worker/index.js","../packages/loader/src/utils.js","../node_modules/core-js/library/modules/es6.number.max-safe-integer.js","../node_modules/core-js/library/modules/es6.number.min-safe-integer.js","../node_modules/core-js/library/fn/number/min-safe-integer.js","../node_modules/core-js/library/modules/_string-ws.js","../node_modules/core-js/library/modules/_string-trim.js","../node_modules/core-js/library/modules/_parse-int.js","../node_modules/core-js/library/modules/es6.parse-int.js","../node_modules/core-js/library/fn/parse-int.js","../node_modules/core-js/library/fn/symbol/species.js","../node_modules/core-js/library/modules/_parse-float.js","../node_modules/core-js/library/modules/es6.parse-float.js","../node_modules/core-js/library/fn/parse-float.js","../node_modules/core-js/library/modules/es6.function.has-instance.js","../node_modules/core-js/library/fn/symbol/has-instance.js","../node_modules/core-js/library/fn/json/stringify.js","../node_modules/core-js/library/modules/es6.object.freeze.js","../node_modules/core-js/library/fn/object/freeze.js","../packages/dicom/src/decoders/decodeBigEndian.js","../packages/dicom/src/decoders/decodeLittleEndian.js","../packages/dicom/src/decoders/decodeRLE.js","../packages/dicom/src/image/decode.js","../packages/dicom/src/image/dump.js","../packages/dicom/src/image/tags.js","../packages/dicom/src/image/meta.js","../packages/dicom/src/image/pixel.js","../packages/dicom/src/index.js","../node_modules/core-js/library/fn/number/max-safe-integer.js","../node_modules/promise-worker/register.js","../packages/loader/src/workers/loader.worker.js","../packages/loader/src/loader-manager.js","../node_modules/core-js/library/modules/es6.date.now.js","../node_modules/core-js/library/fn/date/now.js","../packages/loader/src/task-manager.js","../packages/loader/src/preload.js","../packages/loader/src/resource.js","../node_modules/core-js/library/modules/_bind.js","../node_modules/core-js/library/modules/es6.reflect.construct.js","../node_modules/core-js/library/fn/reflect/construct.js","../node_modules/@babel/runtime-corejs2/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime-corejs2/helpers/esm/inherits.js","../node_modules/@babel/runtime-corejs2/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf.js","../node_modules/type/value/is.js","../node_modules/type/object/is.js","../node_modules/type/prototype/is.js","../node_modules/type/plain-function/is.js","../node_modules/type/function/is.js","../node_modules/core-js/library/modules/_object-assign.js","../node_modules/core-js/library/modules/es6.object.assign.js","../node_modules/core-js/library/fn/object/assign.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/is-value.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/d/index.js","../node_modules/es5-ext/object/valid-callable.js","../node_modules/event-emitter/index.js","../node_modules/nanoid/index.js","../packages/core/src/component.js","../node_modules/@babel/runtime-corejs2/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime-corejs2/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArrayLimit.js","../packages/core/src/internal.js","../packages/core/src/stage.js","../packages/core/src/render-schedule.js","../packages/core/src/core.js","../packages/tools/src/constants.js","../packages/tools/src/state/viewport-state.js","../packages/tools/src/api/index.js","../packages/tools/src/tools/utils/limit.js","../node_modules/core-js/library/modules/_object-to-array.js","../node_modules/core-js/library/modules/es7.object.values.js","../node_modules/core-js/library/fn/object/values.js","../node_modules/konva/lib/Global.js","../node_modules/konva/lib/Util.js","../node_modules/@babel/runtime-corejs2/helpers/esm/toArray.js","../node_modules/konva/lib/DragAndDrop.js","../node_modules/core-js/library/modules/es6.reflect.get.js","../node_modules/core-js/library/fn/reflect/get.js","../node_modules/@babel/runtime-corejs2/helpers/esm/superPropBase.js","../node_modules/@babel/runtime-corejs2/helpers/esm/get.js","../node_modules/konva/lib/Validators.js","../node_modules/konva/lib/Factory.js","../node_modules/konva/lib/Context.js","../node_modules/konva/lib/Canvas.js","../node_modules/konva/lib/Node.js","../node_modules/konva/lib/Container.js","../node_modules/konva/lib/PointerEvents.js","../node_modules/konva/lib/Shape.js","../node_modules/konva/lib/Layer.js","../node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js","../node_modules/konva/lib/Stage.js","../node_modules/core-js/library/modules/_own-keys.js","../node_modules/core-js/library/modules/es6.reflect.own-keys.js","../node_modules/core-js/library/fn/reflect/own-keys.js","../node_modules/gl-matrix/esm/common.js","../packages/tools/src/area.js","../packages/tools/src/transform.js","../node_modules/gl-matrix/esm/mat3.js","../node_modules/core-js/library/modules/es6.reflect.set.js","../node_modules/core-js/library/fn/reflect/set.js","../node_modules/@babel/runtime-corejs2/helpers/esm/set.js","../node_modules/konva/lib/shapes/Line.js","../node_modules/konva/lib/shapes/Circle.js","../packages/tools/src/shape/parts/anchor.js","../packages/tools/src/shape/parts/dashline.js","../node_modules/konva/lib/shapes/Text.js","../packages/tools/src/shape/parts/textfield.js","../packages/tools/src/state/tool-state.js","../node_modules/konva/lib/Group.js","../packages/tools/src/tools/utils/index.js","../packages/tools/src/shape/parts/ui-component.js","../packages/tools/src/tools/base/base-tool.js","../packages/tools/src/tools/base/base-annotation-tool.js","../packages/tools/src/tools/utils/coords-transform.js","../packages/tools/src/tools/annotation/angle-tool.js","../node_modules/konva/lib/shapes/Ellipse.js","../node_modules/konva/lib/shapes/Rect.js","../packages/tools/src/shape/parts/text-item.js","../packages/tools/src/state/image-state.js","../packages/tools/src/tools/annotation/ellipse-tool.js","../packages/tools/src/tools/annotation/length-tool.js","../packages/tools/src/tools/annotation/probe-tool.js","../packages/tools/src/tools/magnify-tool.js","../node_modules/simplify-js/simplify.js","../packages/tools/src/tools/polygon-tool.js","../packages/tools/src/tools/rotation-tool.js","../packages/tools/src/tools/scale-tool.js","../packages/tools/src/tools/stack-tool.js","../packages/tools/src/tools/stack-wheel-tool.js","../packages/tools/src/tools/translate-tool.js","../packages/tools/src/tools/wwwc-tool.js","../packages/tools/src/constructor.js","../packages/tools/src/trap/mouse-trap.js","../packages/tools/src/view.js","../packages/entry/src/utils.js","../packages/entry/src/linkage-manager.js","../packages/viewer/src/constants.js","../packages/viewer/src/render/canvas/render-color.js","../packages/viewer/src/render/canvas/lut.js","../packages/viewer/src/render/canvas/render-gray.js","../packages/viewer/src/render/canvas/index.js","../packages/viewer/src/render/webgl/index.js","../node_modules/core-js/library/modules/es6.set.js","../node_modules/core-js/library/modules/es7.set.to-json.js","../node_modules/core-js/library/modules/es7.set.of.js","../node_modules/core-js/library/modules/es7.set.from.js","../node_modules/core-js/library/fn/set.js","../packages/viewer/src/transform/apply.js","../packages/viewer/src/transform/transform.js","../node_modules/core-js/library/modules/es6.reflect.has.js","../node_modules/core-js/library/fn/reflect/has.js","../node_modules/core-js/library/modules/es7.object.entries.js","../node_modules/core-js/library/fn/object/entries.js","../packages/viewer/src/validator.js","../packages/viewer/src/viewports/abstract-viewport.js","../packages/viewer/src/viewports/pixel.js","../packages/viewer/src/viewports/standard.js","../packages/viewer/src/viewports/video.js","../packages/viewer/src/viewport-factory.js","../packages/viewer/src/render/webgl/utils.js","../packages/entry/src/view-bridge.js","../packages/entry/src/viewport-manager.js"],"sourcesContent":["// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var core = module.exports = { version: '2.6.12' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = require('./_hide');\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","// 19.1.2.11 Object.isExtensible(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isExtensible', function ($isExtensible) {\n  return function isExtensible(it) {\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  };\n});\n","require('../../modules/es6.object.is-extensible');\nmodule.exports = require('../../modules/_core').Object.isExtensible;\n","// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('preventExtensions', function ($preventExtensions) {\n  return function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});\n","require('../../modules/es6.object.prevent-extensions');\nmodule.exports = require('../../modules/_core').Object.preventExtensions;\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","exports.f = require('./_wks');\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertySymbols;\n","exports.f = {}.propertyIsEnumerable;\n","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = require('./_export');\n\n$export($export.S, 'Array', { isArray: require('./_is-array') });\n","require('../../modules/es6.array.is-array');\nmodule.exports = require('../../modules/_core').Array.isArray;\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n","require('../../modules/es6.object.get-own-property-names');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyNames(it) {\n  return $Object.getOwnPropertyNames(it);\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","import _Symbol from \"@babel/runtime-corejs2/core-js/symbol\";\nimport _Symbol$iterator from \"@babel/runtime-corejs2/core-js/symbol/iterator\";\nexport default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof _Symbol === \"function\" && typeof _Symbol$iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n","require('../modules/web.immediate');\nmodule.exports = require('../modules/_core').setImmediate;\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","require('../modules/web.immediate');\nmodule.exports = require('../modules/_core').clearImmediate;\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","module.exports = true;\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    _Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new _Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n\n    _Object$defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","class CacheManager {\n  constructor() {\n    this.cache = {};\n  }\n\n  cacheItem(seriesId, obj, plane = \"axis\") {\n    const seriesCache = this.cache?.[seriesId] ?? {};\n    const planeCache = seriesCache?.[plane] ?? new Map();\n    const { key, value } = obj;\n    planeCache.set(key, value);\n    this.cache[seriesId] = seriesCache;\n    this.cache[seriesId][plane] = planeCache;\n  }\n\n  /**\n   *\n   *\n   * @param { string } seriesId\n   * @param { number } key\n   * @param { string } plane\n   * @return {*}\n   * @memberof CacheManager\n   */\n  getItem(seriesId, key, plane) {\n    return this.cache?.[seriesId]?.[plane]?.get(key);\n  }\n\n  /**\n   *\n   *\n   * @param { string } seriesId\n   * @param { string } plane\n   * @return { Array<ImageObj> }\n   * @memberof CacheManager\n   */\n  getItems(seriesId, plane) {\n    const size = this.cache?.[seriesId]?.[plane]?.size ?? 0;\n    if (size === 0) {\n      return [];\n    }\n\n    const map = this.cache?.[seriesId]?.[plane];\n    return Array.from(map)\n      .sort((a, b) => a[0] - b[0])\n      .map((item) => item[1]);\n  }\n\n  /**\n   * 如果seriesId 和 plane都不传，就清空所有cache\n   * 如果只传了seriesId， 就清空对应seriesId的cache\n   *\n   * @param { string } seriesId\n   * @param { string } plane\n   * @return {*}\n   * @memberof CacheManager\n   */\n  purge(seriesId, plane) {\n    if (!seriesId) {\n      this.cache = {};\n      return;\n    }\n\n    if (!plane) {\n      delete this.cache?.[seriesId];\n      return;\n    }\n\n    delete this.cache[seriesId][plane];\n  }\n}\n\nexport default CacheManager;\n","'use strict'\n\nvar messageIds = 0\n\nfunction onMessage (self, e) {\n  var message = e.data\n  if (!Array.isArray(message) || message.length < 2) {\n    // Ignore - this message is not for us.\n    return\n  }\n  var messageId = message[0]\n  var error = message[1]\n  var result = message[2]\n\n  var callback = self._callbacks[messageId]\n\n  if (!callback) {\n    // Ignore - user might have created multiple PromiseWorkers.\n    // This message is not for us.\n    return\n  }\n\n  delete self._callbacks[messageId]\n  callback(error, result)\n}\n\nfunction PromiseWorker (worker) {\n  var self = this\n  self._worker = worker\n  self._callbacks = {}\n\n  worker.addEventListener('message', function (e) {\n    onMessage(self, e)\n  })\n}\n\nPromiseWorker.prototype.postMessage = function (userMessage) {\n  var self = this\n  var messageId = messageIds++\n\n  var messageToSend = [messageId, userMessage]\n\n  return new Promise(function (resolve, reject) {\n    self._callbacks[messageId] = function (error, result) {\n      if (error) {\n        return reject(new Error(error.message))\n      }\n      resolve(result)\n    }\n\n    /* istanbul ignore if */\n    if (typeof self._worker.controller !== 'undefined') {\n      // service worker, use MessageChannels because e.source is broken in Chrome < 51:\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=543198\n      var channel = new MessageChannel()\n      channel.port1.onmessage = function (e) {\n        onMessage(self, e)\n      }\n      self._worker.controller.postMessage(messageToSend, [channel.port2])\n    } else {\n      // web worker\n      self._worker.postMessage(messageToSend)\n    }\n  })\n}\n\nmodule.exports = PromiseWorker\n","let canvas = document.createElement(\"canvas\");\n// 因为worker无法操作dom，当加载jpg,png的时候，将arrayBuffer 返回，构建影像\nexport const postprocessor = async (image, task) => {\n  return new Promise((resolve, reject) => {\n    let img = image;\n    const { format } = task;\n    if (format === \"webimage\") {\n      img = {};\n      let tempImg = new Image();\n      var arrayBufferView = new Uint8Array(image.data);\n      var blob = new Blob([arrayBufferView], { type: \"image/jpeg\" });\n      const urlCreator = window.URL || window.webkitURL;\n      const imageUrl = urlCreator.createObjectURL(blob);\n      tempImg.src = imageUrl;\n      // document.body.append(tempImg);\n      tempImg.onload = (evt) => {\n        img.columns = tempImg.width;\n        img.rows = tempImg.height;\n        img.color = \"rgba\";\n        img.samplesPerPixel = 4;\n        img.windowWidth = 255;\n        img.windowCenter = 128;\n        img.maxPixelValue = 255;\n        img.minPixelValue = 0;\n        img.intercept = 0;\n        img.slope = 1;\n\n        canvas.width = tempImg.width;\n        canvas.height = tempImg.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(tempImg, 0, 0);\n        img.pixelData = ctx.getImageData(0, 0, tempImg.width, tempImg.height).data;\n        resolve(img);\n      };\n    } else {\n      resolve(img);\n    }\n  });\n};\n","// 20.1.2.6 Number.MAX_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });\n","// 20.1.2.10 Number.MIN_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { MIN_SAFE_INTEGER: -0x1fffffffffffff });\n","require('../../modules/es6.number.min-safe-integer');\nmodule.exports = -0x1fffffffffffff;\n","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n","var $parseInt = require('./_global').parseInt;\nvar $trim = require('./_string-trim').trim;\nvar ws = require('./_string-ws');\nvar hex = /^[-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;\n","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 18.2.5 parseInt(string, radix)\n$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });\n","require('../modules/es6.parse-int');\nmodule.exports = require('../modules/_core').parseInt;\n","module.exports = require('../../modules/_wks-ext').f('species');\n","var $parseFloat = require('./_global').parseFloat;\nvar $trim = require('./_string-trim').trim;\n\nmodule.exports = 1 / $parseFloat(require('./_string-ws') + '-0') !== -Infinity ? function parseFloat(str) {\n  var string = $trim(String(str), 3);\n  var result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n","var $export = require('./_export');\nvar $parseFloat = require('./_parse-float');\n// 18.2.4 parseFloat(string)\n$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });\n","require('../modules/es6.parse-float');\nmodule.exports = require('../modules/_core').parseFloat;\n","'use strict';\nvar isObject = require('./_is-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar HAS_INSTANCE = require('./_wks')('hasInstance');\nvar FunctionProto = Function.prototype;\n// 19.2.3.6 Function.prototype[@@hasInstance](V)\nif (!(HAS_INSTANCE in FunctionProto)) require('./_object-dp').f(FunctionProto, HAS_INSTANCE, { value: function (O) {\n  if (typeof this != 'function' || !isObject(O)) return false;\n  if (!isObject(this.prototype)) return O instanceof this;\n  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n  while (O = getPrototypeOf(O)) if (this.prototype === O) return true;\n  return false;\n} });\n","require('../../modules/es6.function.has-instance');\nmodule.exports = require('../../modules/_wks-ext').f('hasInstance');\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n","/* eslint no-bitwise: 0 */\nfunction swap16 (val) {\n  return ((val & 0xff) << 8) | ((val >> 8) & 0xff);\n}\n\nfunction decodeBigEndian (metaData, pixelData) {\n  if (metaData.bitsAllocated === 16) {\n    let arrayBuffer = pixelData.buffer;\n\n    let offset = pixelData.byteOffset;\n    const length = pixelData.length;\n    // if pixel data is not aligned on even boundary, shift it so we can create the 16 bit array\n    // buffers on it\n\n    if (offset % 2) {\n      arrayBuffer = arrayBuffer.slice(offset);\n      offset = 0;\n    }\n\n    if (metaData.pixelRepresentation === 0) {\n      metaData.pixelData = new Uint16Array(arrayBuffer, offset, length / 2);\n    } else {\n      metaData.pixelData = new Int16Array(arrayBuffer, offset, length / 2);\n    }\n    // Do the byte swap\n    for (let i = 0; i < metaData.pixelData.length; i++) {\n      metaData.pixelData[i] = swap16(metaData.pixelData[i]);\n    }\n  } else if (metaData.bitsAllocated === 8) {\n    metaData.pixelData = pixelData;\n  }\n\n  return metaData;\n}\n\nexport default decodeBigEndian;\n","function decodeLittleEndian (metaData, pixelData) {\n  let arrayBuffer = pixelData.buffer;\n\n  let offset = pixelData.byteOffset;\n  const length = pixelData.length;\n\n  if (metaData.bitsAllocated === 16) {\n    // if pixel data is not aligned on even boundary, shift it so we can create the 16 bit array\n    // buffers on it\n    if (offset % 2) {\n      arrayBuffer = arrayBuffer.slice(offset);\n      offset = 0;\n    }\n\n    if (metaData.pixelRepresentation === 0) {\n      metaData.pixelData = new Uint16Array(arrayBuffer, offset, length / 2);\n    } else {\n      metaData.pixelData = new Int16Array(arrayBuffer, offset, length / 2);\n    }\n  } else if (metaData.bitsAllocated === 8 || metaData.bitsAllocated === 1) {\n    metaData.pixelData = pixelData;\n  } else if (metaData.bitsAllocated === 32) {\n    // if pixel data is not aligned on even boundary, shift it\n    if (offset % 2) {\n      arrayBuffer = arrayBuffer.slice(offset);\n      offset = 0;\n    }\n\n    metaData.pixelData = new Float32Array(arrayBuffer, offset, length / 4);\n  }\n\n  return metaData;\n}\n\nexport default decodeLittleEndian;\n","function decodeRLE (metaData, pixelData) {\n  if (metaData.bitsAllocated === 8) {\n    if (metaData.planarConfiguration) {\n      return decode8Planar(metaData, pixelData);\n    }\n\n    return decode8(metaData, pixelData);\n  } else if (metaData.bitsAllocated === 16) {\n    return decode16(metaData, pixelData);\n  }\n\n  throw new Error('unsupported pixel format for RLE');\n}\n\nfunction decode8 (metaData, pixelData) {\n  const frameData = pixelData;\n  const frameSize = metaData.rows * metaData.columns;\n  const outFrame = new ArrayBuffer(frameSize * metaData.samplesPerPixel);\n  const header = new DataView(frameData.buffer, frameData.byteOffset);\n  const data = new Int8Array(frameData.buffer, frameData.byteOffset);\n  const out = new Int8Array(outFrame);\n\n  let outIndex = 0;\n  const numSegments = header.getInt32(0, true);\n\n  for (let s = 0; s < numSegments; ++s) {\n    outIndex = s;\n\n    let inIndex = header.getInt32((s + 1) * 4, true);\n\n    let maxIndex = header.getInt32((s + 2) * 4, true);\n\n    if (maxIndex === 0) {\n      maxIndex = frameData.length;\n    }\n\n    const endOfSegment = frameSize * numSegments;\n\n    while (inIndex < maxIndex) {\n      const n = data[inIndex++];\n\n      if (n >= 0 && n <= 127) {\n        // copy n bytes\n        for (let i = 0; i < n + 1 && outIndex < endOfSegment; ++i) {\n          out[outIndex] = data[inIndex++];\n          outIndex += metaData.samplesPerPixel;\n        }\n      } else if (n <= -1 && n >= -127) {\n        const value = data[inIndex++];\n        // run of n bytes\n\n        for (let j = 0; j < -n + 1 && outIndex < endOfSegment; ++j) {\n          out[outIndex] = value;\n          outIndex += metaData.samplesPerPixel;\n        }\n      } /* else if (n === -128) {\n\n      } // do nothing */\n    }\n  }\n  metaData.pixelData = new Uint8Array(outFrame);\n\n  return metaData;\n}\n\nfunction decode8Planar (metaData, pixelData) {\n  const frameData = pixelData;\n  const frameSize = metaData.rows * metaData.columns;\n  const outFrame = new ArrayBuffer(frameSize * metaData.samplesPerPixel);\n  const header = new DataView(frameData.buffer, frameData.byteOffset);\n  const data = new Int8Array(frameData.buffer, frameData.byteOffset);\n  const out = new Int8Array(outFrame);\n\n  let outIndex = 0;\n  const numSegments = header.getInt32(0, true);\n\n  for (let s = 0; s < numSegments; ++s) {\n    outIndex = s * frameSize;\n\n    let inIndex = header.getInt32((s + 1) * 4, true);\n\n    let maxIndex = header.getInt32((s + 2) * 4, true);\n\n    if (maxIndex === 0) {\n      maxIndex = frameData.length;\n    }\n\n    const endOfSegment = frameSize * numSegments;\n\n    while (inIndex < maxIndex) {\n      const n = data[inIndex++];\n\n      if (n >= 0 && n <= 127) {\n        // copy n bytes\n        for (let i = 0; i < n + 1 && outIndex < endOfSegment; ++i) {\n          out[outIndex] = data[inIndex++];\n          outIndex++;\n        }\n      } else if (n <= -1 && n >= -127) {\n        const value = data[inIndex++];\n        // run of n bytes\n\n        for (let j = 0; j < -n + 1 && outIndex < endOfSegment; ++j) {\n          out[outIndex] = value;\n          outIndex++;\n        }\n      } /* else if (n === -128) {\n\n      } // do nothing */\n    }\n  }\n  metaData.pixelData = new Uint8Array(outFrame);\n\n  return metaData;\n}\n\nfunction decode16 (metaData, pixelData) {\n  const frameData = pixelData;\n  const frameSize = metaData.rows * metaData.columns;\n  const outFrame = new ArrayBuffer(frameSize * metaData.samplesPerPixel * 2);\n\n  const header = new DataView(frameData.buffer, frameData.byteOffset);\n  const data = new Int8Array(frameData.buffer, frameData.byteOffset);\n  const out = new Int8Array(outFrame);\n\n  const numSegments = header.getInt32(0, true);\n\n  for (let s = 0; s < numSegments; ++s) {\n    let outIndex = 0;\n    const highByte = s === 0 ? 1 : 0;\n\n    let inIndex = header.getInt32((s + 1) * 4, true);\n\n    let maxIndex = header.getInt32((s + 2) * 4, true);\n\n    if (maxIndex === 0) {\n      maxIndex = frameData.length;\n    }\n\n    while (inIndex < maxIndex) {\n      const n = data[inIndex++];\n\n      if (n >= 0 && n <= 127) {\n        for (let i = 0; i < n + 1 && outIndex < frameSize; ++i) {\n          out[outIndex * 2 + highByte] = data[inIndex++];\n          outIndex++;\n        }\n      } else if (n <= -1 && n >= -127) {\n        const value = data[inIndex++];\n\n        for (let j = 0; j < -n + 1 && outIndex < frameSize; ++j) {\n          out[outIndex * 2 + highByte] = value;\n          outIndex++;\n        }\n      } /* else if (n === -128) {\n\n      } // do nothing */\n    }\n  }\n  if (metaData.pixelRepresentation === 0) {\n    metaData.pixelData = new Uint16Array(outFrame);\n  } else {\n    metaData.pixelData = new Int16Array(outFrame);\n  }\n\n  return metaData;\n}\n\nexport default decodeRLE;\n","import decodeBigEndian from \"../decoders/decodeBigEndian\";\n// import decodeJPEGLS from \"../decoders/decodeJPEGLS\";\nimport decodeLittleEndian from \"../decoders/decodeLittleEndian\";\nimport decodeRLE from \"../decoders/decodeRLE\";\n\nexport const decode = async (meta, pixelDataSource) => {\n  const { transferSyntax } = meta;\n  switch (transferSyntax) {\n    case \"1.2.840.10008.1.2\":\n    case \"1.2.840.10008.1.2.1\":\n    case \"1.2.840.10008.1.2.1.99\":\n      meta = decodeLittleEndian(meta, pixelDataSource);\n      break;\n    case \"1.2.840.10008.1.2.2\":\n      meta = decodeBigEndian(meta, pixelDataSource);\n      break;\n    case \"1.2.840.10008.1.2.5\":\n      meta = decodeRLE(meta, pixelDataSource);\n      break;\n    case \"1.2.840.10008.1.2.4.80\":\n      // JPEG-LS Lossless Image Compression\n      // meta = await decodeJPEGLS(meta, pixelDataSource);\n      break;\n    default:\n      break;\n  }\n\n  return meta;\n};\n","import AllTags from \"./dictionary.json\";\nconst ExtensionTags = {\n  x00189305: \"Revolution​Time\",\n  x00083010: \"Irradiation​Event​UID\",\n  x00189306: \"Single​Collimation​Width\",\n  x00189307: \"Total​Collimation​Width\",\n  x00189309: \"Table​Speed\",\n  x00189310: \"Table​Feed​Per​Rotation\",\n  x00189311: \"Spiral​Pitch​Factor\",\n  x00209241: \"Nominal​Percentage​Of​Cardiac​Phase\",\n};\n\nconst isASCII = (str) => {\n  return /^[\\x00-\\x7F]*$/.test(str);\n};\n\nconst getValue = (dataset, tag, length) => {\n  if (length < 128) {\n    if (length === 2) {\n      return dataset.uint16(tag);\n    } else if (length === 4) {\n      return dataset.uint32(tag);\n    }\n\n    const str = dataset.string(tag);\n    if (isASCII(str)) {\n      if (str !== undefined) {\n        return str;\n      }\n    } else {\n      if (length !== 2 && length !== 4) {\n        return \"binary data\";\n      }\n    }\n\n    if (length === 0) {\n      return \"\";\n    }\n  } else {\n    return \"data too long to show.\";\n  }\n};\n\nexport const dump = (dataset) => {\n  const dumpObj = {};\n  try {\n    for (const propertyName in dataset.elements) {\n      const element = dataset.elements[propertyName];\n      const { tag, vr, length } = element;\n      const attr = AllTags[tag] ?? ExtensionTags[tag] ?? \"Unknown\";\n      dumpObj[tag.toLocaleLowerCase()] = {\n        tag,\n        vr,\n        length,\n        attr,\n        value: getValue(dataset, tag, length),\n      };\n\n      if (attr === \"Unknown\") {\n        console.log(\"dump unknown key\", tag);\n      }\n    }\n  } catch (err) {\n    console.error(\"dump error\", err);\n  }\n\n  return dumpObj;\n};\n","const makeTag = (group, element) => {\n  return `x${group.toString(16).padStart(4, \"0\")}${element.toString(16).padStart(4, \"0\")}`;\n};\n\nexport const Tags = {\n  /**\n   * DCM图片的图像模式\n   *\n   * @memberof Tags\n   */\n  PhotometricInterpretation: makeTag(0x0028, 0x0004),\n\n  /**\n   * 图像传输字符串\n   *\n   * @memberof Tags\n   */\n  TransferSyntaxUID: makeTag(0x0002, 0x0010),\n\n  /**\n   * 给每个像素分配的字节数对应的位数,单字节是8，两个字节是16\n   *\n   * @memberof Tags\n   */\n  BitsAllocated: makeTag(0x0028, 0x0100),\n\n  /**\n   * 高\n   *\n   * @memberof Tags\n   */\n  Rows: makeTag(0x0028, 0x0010),\n\n  /**\n   * 宽\n   *\n   * @memberof Tags\n   */\n  Columns: makeTag(0x0028, 0x0011),\n\n  /**\n   * 通道颜色数量，灰度图通常为1，彩色图为3\n   *\n   * @memberof Tags\n   */\n  SamplesperPixel: makeTag(0x0028, 0x0002),\n\n  /**\n   * 数据的存储类型，0代表无符号存储，1代表有符号存储\n   *\n   * @memberof Tags\n   */\n  PixelRepresentation: makeTag(0x0028, 0x0103),\n\n  /**\n   * 彩色图像通道排列方式\n   * 0：RGBRGBRGB\n   * 1:RRR...GGG...BBB...\n   *\n   * @memberof Tags\n   */\n  PlanarConfiguration: makeTag(0x0028, 0x0006),\n\n  /**\n   * 像素弹性变换\n   *\n   * @memberof Tags\n   */\n  PixelAspectRatio: makeTag(0x0028, 0x0034),\n\n  /**\n   * 斜率\n   *\n   * @memberof Tags\n   */\n  RescaleSlope: makeTag(0x0028, 0x1053),\n\n  /**\n   * 截距\n   *\n   * @memberof Tags\n   */\n  RescaleIntercept: makeTag(0x0028, 0x1052),\n\n  /**\n   * 最小HU值\n   *\n   * @memberof Tags\n   */\n  SmallestImagePixelValue: makeTag(0x0028, 0x0106),\n\n  /**\n   * 最大HU值\n   *\n   * @memberof Tags\n   */\n  LargestImagePixelValue: makeTag(0x0028, 0x0017),\n\n  /**\n   * 窗位\n   *\n   * @memberof Tags\n   */\n  WindowCenter: makeTag(0x0028, 0x1050),\n\n  /**\n   * 窗宽\n   *\n   * @memberof Tags\n   */\n  WindowWidth: makeTag(0x0028, 0x1051),\n\n  /**\n   * 图像码、图像唯一序列码\n   *\n   * @memberof Tags\n   */\n  InstanceNumber: makeTag(0x0020, 0x0013),\n\n  /**\n   * 当该值为1的时候，表明该图像被有损压缩过，计时后来解压缩后，再用非压缩格式存储或者储存，该值也要保持为1\n   *\n   * @memberof Tags\n   */\n  LossyImageCompression: makeTag(0x0028, 0x2110),\n\n  /**\n   * 压缩率\n   *\n   * @memberof Tags\n   */\n  LossyImageCompressionRatio: makeTag(0x0028, 0x2112),\n\n  /**\n   * 压缩方法\n   *\n   * @memberof Tags\n   */\n  LossyImageCompressionMethod: makeTag(0x0028, 0x2114),\n\n  /**\n   * 序列日期\n   *\n   * @memberof Tags\n   */\n  StudyDate: makeTag(0x0008, 0x0020),\n\n  /**\n   * 检查时间\n   *\n   * @memberof Tags\n   */\n  StudyTime: makeTag(0x0008, 0x0030),\n\n  /**\n   * 序列号,识别不同检查的号码\n   *\n   * @memberof Tags\n   */\n  SeriesNumber: makeTag(0x0020, 0x0011),\n\n  /**\n   * RIS的生成序号,用以标识做检查的次序\n   *\n   * @memberof Tags\n   */\n  AccessionNumber: makeTag(0x0008, 0x0050),\n\n  /**\n   * 病人ID\n   *\n   * @memberof Tags\n   */\n  PatientID: makeTag(0x0010, 0x0020),\n\n  /**\n   * 病人名字\n   *\n   * @memberof Tags\n   */\n  PatientName: makeTag(0x0010, 0x0010),\n\n  /**\n   * 病人性别\n   *\n   * @memberof Tags\n   */\n  PatientSex: makeTag(0x0010, 0x0040),\n\n  /**\n   * 病人年龄\n   *\n   * @memberof Tags\n   */\n  PatientAge: makeTag(0x0010, 1010),\n\n  /**\n   * CT下的像素间隔\n   *\n   * @memberof Tags\n   */\n  ImagerPixelSpacing_CT: makeTag(0x0028, 0x0030),\n\n  /**\n   * CR下的像素间隔\n   *\n   * @memberof Tags\n   */\n  ImagerPixelSpacing_CR: makeTag(0x0018, 0x1164),\n\n  /**\n   * CT下的病人旋转方位\n   *\n   * @memberof Tags\n   */\n  PatientOrientation_CT: makeTag(0x0020, 0x0037),\n\n  /**\n   * CR下的病人旋转方位\n   *\n   * @memberof Tags\n   */\n  PatientOrientation_CR: makeTag(0x0020, 0x0020),\n\n  /**\n   * CT下病人位置\n   *\n   * @memberof Tags\n   */\n  PatientPosition_CT: makeTag(0x0020, 0x0032),\n  /**\n   * CR下病人位置\n   *\n   * @memberof Tags\n   */\n  PatientPosition_CR: makeTag(0x0018, 0x5100),\n\n  /**\n   * 层厚\n   *\n   * @memberof Tags\n   */\n  SliceThickness: makeTag(0x0018, 0x0050),\n\n  /**\n   * 层间距\n   *\n   * @memberof Tags\n   */\n  SpacingBetweenSlices: makeTag(0x0018, 0x0088),\n\n  /**\n   * 图像模态 (设备)\n   *\n   * @memberof Tags\n   */\n  Modality: makeTag(0x0008, 0x0060),\n\n  /**\n   * 检查ID\n   *\n   * @memberof Tags\n   */\n  StudyInstanceUID: makeTag(0x0020, 0x000d),\n\n  /**\n   * 序列号\n   *\n   * @memberof Tags\n   */\n  SeriesInstanceUID: makeTag(0x0020, 0x000e),\n};\n","import * as dicomParser from \"dicom-parser\";\nimport { Tags } from \"./tags\";\nconst { DataSet } = dicomParser;\n/**\n *\n *\n * @param { DataSet } dataset\n */\nexport const getMetaData = (dataset) => {\n  const pixelSpacing = getNumberValues(dataset, Tags.ImagerPixelSpacing_CT, 2) || getNumberValues(dataset, Tags.ImagerPixelSpacing_CR, 2);\n\n  const metaData = {\n    byteArray: dataset.byteArray,\n    elements: dataset.elements,\n    // 转换格式\n    transferSyntax: dataset.string(Tags.TransferSyntaxUID),\n    // 一个像素取样点存储时分配到的位数，一般RGB的图像，每一个颜色通道都使用8位，所以一般取值为8。对于灰度图像，如果是256级灰阶，一般就是8位。如果高于256级灰阶，一般就采用16位。\n    bitsAllocated: dataset.uint16(Tags.BitsAllocated),\n    // 图像的高度\n    rows: dataset.uint16(Tags.Rows),\n    // 图像的宽度\n    columns: dataset.uint16(Tags.Columns),\n    // 每一个像素的取样数，一般来说，CT，MR，DR等灰度图像都是1，而彩超等彩**图像都是3，分别表示R, G, B三个颜色通道。\n    samplesPerPixel: dataset.uint16(Tags.SamplesperPixel),\n    // 像素数据的表现类型 这是一个枚举值，分别为十六进制数0000和0001.\n    pixelRepresentation: dataset.uint16(Tags.PixelRepresentation),\n    // 当Samples Per Pixel字段的值大于1时，Planar Configuration字段规定了实际像素信息的存储方式\n    planarConfiguration: dataset.uint16(Tags.PlanarConfiguration),\n    // 像素弹性变换\n    pixelAspectRatio: dataset.string(Tags.PixelAspectRatio),\n    // 行间距\n    rowPixelSpacing: pixelSpacing[0],\n    // 列间距\n    columnPixelSpacing: pixelSpacing[1],\n    // 缩放斜率和截距由硬件制造商决定。\n    // 它指定从存储在磁盘表示中的像素到存储在内存表示中的像素的线性转换。磁盘存储的值定义为SV。而转化到内存中的像素值uints就需要两个dicom tag : Rescale intercept和Rescale slope。\n    // OutputUnits=m∗SV+b\n    // RescaleIntercept:b\n    // RescaleSlope:m\n    slope: dataset.floatString(Tags.RescaleSlope) || 1,\n    intercept: dataset.floatString(Tags.RescaleIntercept) || 0,\n    photometricInterpretation: dataset.string(Tags.PhotometricInterpretation),\n    invert: dataset.string(Tags.PhotometricInterpretation) === \"MONOCHROME1\",\n    color: dataset.string(Tags.PhotometricInterpretation) === \"RGB\",\n    minPixelValue: dataset.uint16(Tags.SmallestImagePixelValue),\n    maxPixelValue: dataset.uint16(Tags.LargestImagePixelValue),\n    // 窗位\n    windowCenter: getNumberValues(dataset, Tags.WindowCenter, 1)?.[0] || 50,\n    // 窗宽\n    windowWidth: getNumberValues(dataset, Tags.WindowWidth, 1)?.[0] || 255,\n    instanceNumber: dataset.intString(Tags.InstanceNumber),\n    imageOrientationPatient: getNumberValues(dataset, Tags.PatientOrientation_CT, 6) || getNumberValues(dataset, Tags.PatientOrientation_CR, 6) || [1, 0, 0, 0, 1, 0],\n    imagePositionPatient: getNumberValues(dataset, Tags.PatientPosition_CT, 3) || getNumberValues(dataset, Tags.PatientPosition_CT, 3) || [0, 0, 0],\n    sliceThickness: getNumberValue(dataset, Tags.SliceThickness) || 1,\n    spacingBetweenSlices: getNumberValue(dataset, Tags.SpacingBetweenSlices),\n    imageCompression: getCompressionState({\n      lossyImageCompression: dataset.string(Tags.LossyImageCompression),\n      lossyImageCompressionRatio: dataset.string(Tags.LossyImageCompressionRatio) | \"\",\n      lossyImageCompressionMethod: dataset.string(Tags.LossyImageCompressionMethod) || \"\",\n    }),\n    studyDate: dataset.string(Tags.StudyDate),\n    studyTime: dataset.string(Tags.StudyTime),\n    seriesNum: dataset.string(Tags.SeriesNumber),\n    accessionNumber: dataset.string(Tags.AccessionNumber),\n    patientId: dataset.string(Tags.PatientID),\n    patientName: stringUTF8(dataset, Tags.PatientName) || \"\",\n    patientSex: dataset.string(Tags.PatientSex) || \"\",\n    patientAge: dataset.string(Tags.PatientAge) || \"\",\n    studyId: dataset.string(Tags.StudyInstanceUID),\n\n    seriesId: dataset.string(Tags.SeriesInstanceUID),\n  };\n\n  return metaData;\n};\n\nconst getNumberValues = (dataset, tag, minimumLength = 0) => {\n  const values = [];\n  const valueAsString = dataset.string(tag);\n\n  if (!valueAsString) {\n    return;\n  }\n  const split = valueAsString.split(\"\\\\\");\n\n  if (minimumLength && split.length < minimumLength) {\n    return;\n  }\n  for (let i = 0; i < split.length; i++) {\n    values.push(parseFloat(split[i]));\n  }\n\n  return values;\n};\n\nconst getNumberValue = (dataset, tag) => {\n  const valueAsString = dataset.string(tag);\n\n  if (!valueAsString) {\n    return;\n  }\n\n  return parseFloat(valueAsString);\n};\n\nconst stringUTF8 = (dataset, tag) => {\n  var element = dataset.elements[tag];\n\n  if (element && element.length > 0) {\n    var codeList = readCodeList(dataset.byteArray, element.dataOffset, element.length);\n    const code = codeList.map((item) => \"%\" + item.toString(16)).join(\"\");\n    try {\n      return decodeURIComponent(code).trim();\n    } catch (e) {\n      return;\n    }\n  }\n  return undefined;\n};\n\nfunction readCodeList(byteArray, position, length) {\n  if (length < 0) {\n    throw new Error(\"dicomParser.readFixedString - length cannot be less than 0\");\n  }\n\n  if (position + length > byteArray.length) {\n    throw new Error(\"dicomParser.readFixedString: attempt to read past end of buffer\");\n  }\n\n  var result = [];\n  var byte;\n\n  for (var i = 0; i < length; i++) {\n    byte = byteArray[position + i];\n    if (byte === 0) {\n      position += length;\n\n      return result;\n    }\n    result.push(byte);\n  }\n\n  return result;\n}\n\nconst getCompressionState = ({ lossyImageCompression, lossyImageCompressionRatio, lossyImageCompressionMethod }) => {\n  if (lossyImageCompression === \"01\" && lossyImageCompressionRatio !== \"\") {\n    const compressionMethod = lossyImageCompressionMethod || \"Lossy: \";\n    const compressionRatio = parseFloat(lossyImageCompressionRatio).toFixed(2);\n    return compressionMethod + \" \" + compressionRatio + \" : 1\";\n  }\n  return \"Lossless / Uncompressed\";\n};\n","import * as dicomParser from \"dicom-parser\";\nconst { createJPEGBasicOffsetTable, readEncapsulatedImageFrame } = dicomParser;\n\n/**\n *\n *\n * @param { DataSet } dataset\n * @param { object } meta\n */\nexport const getPixelData = (dataset, meta) => {\n  const pixelDataElement = meta.elements.x7fe00010;\n  if (!pixelDataElement) {\n    return null;\n  }\n\n  if (pixelDataElement.encapsulatedPixelData) {\n    return getEncapsulatedImageFrame(dataset, meta);\n  }\n\n  return getUncompressedImageFrame(meta);\n};\n\nconst _framesAreFragmented = (dataSet) => {\n  const numberOfFrames = dataSet.intString(\"x00280008\");\n  const pixelDataElement = dataSet.elements.x7fe00010;\n  return numberOfFrames !== pixelDataElement.fragments.length;\n};\n\nconst getEncapsulatedImageFrame = (dataset, meta) => {\n  const {\n    elements: { x7fe00010: pixelDataElement },\n  } = meta;\n\n  if (pixelDataElement?.basicOffsetTable?.length) {\n    return readEncapsulatedImageFrame(dataset, pixelDataElement, 0);\n  }\n\n  if (_framesAreFragmented(dataset)) {\n    const basicOffsetTable = createJPEGBasicOffsetTable(dataset, pixelDataElement);\n    return readEncapsulatedImageFrame(dataset, pixelDataElement, 0, basicOffsetTable);\n  }\n\n  return readEncapsulatedPixelDataFromFragments(dataset, pixelDataElement, 0);\n};\n\n/**\n * Function to deal with unpacking a binary frame\n */\nconst unpackBinaryFrame = (byteArray, frameOffset, pixelsPerFrame) => {\n  // Create a new pixel array given the image size\n  const pixelData = new Uint8Array(pixelsPerFrame);\n\n  for (let i = 0; i < pixelsPerFrame; i++) {\n    // Compute byte position\n    const bytePos = Math.floor(i / 8);\n\n    // Get the current byte\n    const byte = byteArray[bytePos + frameOffset];\n\n    // Bit position (0-7) within byte\n    const bitPos = i % 8;\n\n    // Check whether bit at bitpos is set\n    pixelData[i] = isBitSet(byte, bitPos) ? 1 : 0;\n  }\n\n  return pixelData;\n};\n\nconst getUncompressedImageFrame = (meta) => {\n  const {\n    elements: { x7fe00010: pixelDataElement },\n    rows,\n    columns,\n    samplesPerPixel,\n    bitsAllocated,\n    byteArray,\n  } = meta;\n\n  // 数据偏移\n  const pixelDataOffset = pixelDataElement.dataOffset;\n  const pixelsPerFrame = rows * columns * samplesPerPixel;\n  if (bitsAllocated === 8) {\n    return new Uint8Array(byteArray.buffer, pixelDataOffset, pixelsPerFrame);\n  } else if (bitsAllocated === 16) {\n    return new Uint8Array(byteArray.buffer, pixelDataOffset, pixelsPerFrame * 2);\n  } else if (bitsAllocated === 1) {\n    return unpackBinaryFrame(byteArray, pixelDataOffset, pixelsPerFrame);\n  } else if (bitsAllocated === 32) {\n    return new Uint8Array(byteArray.buffer, pixelDataOffset, pixelsPerFrame * 4);\n  }\n};\n","import DicomParser from \"dicom-parser\";\nimport { decode } from \"./image/decode\";\nimport { dump } from \"./image/dump\";\nimport { getMetaData } from \"./image/meta\";\nimport { getPixelData } from \"./image/pixel\";\n\nconst getDataset = (arraybuffer) => {\n  const byteArray = new Uint8Array(arraybuffer);\n  return DicomParser.parseDicom(byteArray);\n};\n\nconst updateMetaForPixelData = async (meta, pixelDataSource) => {\n  let result = null;\n  const { transferSyntax } = meta;\n  switch (transferSyntax) {\n    // Implicit VR Little Endian\n    case \"1.2.840.10008.1.2\":\n    // Explicit VR Little Endian\n    case \"1.2.840.10008.1.2.1\":\n    // Explicit VR Big Endian (retired)\n    case \"1.2.840.10008.1.2.2\":\n    // Deflate transfer syntax (deflated by dicomParser)\n    case \"1.2.840.10008.1.2.1.99\":\n    // RLE Lossless\n    case \"1.2.840.10008.1.2.5\":\n    // JPEG-LS Lossless Image Compression\n    case \"1.2.840.10008.1.2.4.80\":\n      result = await decode(meta, pixelDataSource);\n      break;\n    default:\n      result = new Promise((resolve, reject) => {\n        reject(new Error(`No decoder for transfer syntax:${transferSyntax}`));\n      });\n  }\n\n  return result;\n};\n\nconst postprocess = (meta) => {\n  meta.sizeInBytes = meta.pixelData.byteLength;\n  if (!meta.minPixelValue || !meta.maxPixelValue) {\n    const { min, max } = getMinMaxValues(meta.pixelData);\n    meta.minPixelValue = min;\n    meta.maxPixelValue = max;\n  }\n\n  delete meta.elements;\n  delete meta.byteArray;\n  return meta;\n};\n\nconst getMinMaxValues = (pixelData) => {\n  let min = Number.MAX_SAFE_INTEGER;\n  let max = Number.MIN_SAFE_INTEGER;\n  const len = pixelData.length;\n  let i = 0;\n  let pixel;\n  while (i < len) {\n    pixel = pixelData[i];\n    min = Math.min(min, pixel);\n    max = Math.max(max, pixel);\n    i += 1;\n  }\n\n  return { min, max };\n};\n\nlet dumpTags = null;\nexport const createImage = async (arrayBuffer) => {\n  const dataset = getDataset(arrayBuffer);\n  if (!dumpTags) {\n    dumpTags = dump(dataset); // 1ms 以内\n  }\n  let meta = getMetaData(dataset);\n  const pixelDataSource = getPixelData(dataset, meta);\n  meta = await updateMetaForPixelData(meta, pixelDataSource);\n  return postprocess(meta);\n};\n\nexport const createWebImage = async (arrayBuffer) => {\n  const img = {\n    data: arrayBuffer,\n  };\n\n  return img;\n};\n","require('../../modules/es6.number.max-safe-integer');\nmodule.exports = 0x1fffffffffffff;\n","'use strict'\n\nfunction isPromise (obj) {\n  // via https://unpkg.com/is-promise@2.1.0/index.js\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function'\n}\n\nfunction registerPromiseWorker (callback) {\n  function postOutgoingMessage (e, messageId, error, result) {\n    function postMessage (msg) {\n      /* istanbul ignore if */\n      if (typeof self.postMessage !== 'function') { // service worker\n        e.ports[0].postMessage(msg)\n      } else { // web worker\n        self.postMessage(msg)\n      }\n    }\n    if (error) {\n      /* istanbul ignore else */\n      if (typeof console !== 'undefined' && 'error' in console) {\n        // This is to make errors easier to debug. I think it's important\n        // enough to just leave here without giving the user an option\n        // to silence it.\n        console.error('Worker caught an error:', error)\n      }\n      postMessage([messageId, {\n        message: error.message\n      }])\n    } else {\n      postMessage([messageId, null, result])\n    }\n  }\n\n  function tryCatchFunc (callback, message) {\n    try {\n      return { res: callback(message) }\n    } catch (e) {\n      return { err: e }\n    }\n  }\n\n  function handleIncomingMessage (e, callback, messageId, message) {\n    var result = tryCatchFunc(callback, message)\n\n    if (result.err) {\n      postOutgoingMessage(e, messageId, result.err)\n    } else if (!isPromise(result.res)) {\n      postOutgoingMessage(e, messageId, null, result.res)\n    } else {\n      result.res.then(function (finalResult) {\n        postOutgoingMessage(e, messageId, null, finalResult)\n      }, function (finalError) {\n        postOutgoingMessage(e, messageId, finalError)\n      })\n    }\n  }\n\n  function onIncomingMessage (e) {\n    var payload = e.data\n    if (!Array.isArray(payload) || payload.length !== 2) {\n      // message doens't match communication format; ignore\n      return\n    }\n    var messageId = payload[0]\n    var message = payload[1]\n\n    if (typeof callback !== 'function') {\n      postOutgoingMessage(e, messageId, new Error(\n        'Please pass a function into register().'))\n    } else {\n      handleIncomingMessage(e, callback, messageId, message)\n    }\n  }\n\n  self.addEventListener('message', onIncomingMessage)\n}\n\nmodule.exports = registerPromiseWorker\n","import { createImage, createWebImage } from \"@saga/dicom\";\nimport registerPromiseWorker from \"promise-worker/register\";\n\nconst loadImage = async (imageId) => {\n  const ab = await (await fetch(imageId)).arrayBuffer();\n  // console.time(\"parse image\");\n  const image = await createImage(ab);\n  // console.timeEnd(\"parse image\");\n  return image;\n};\n\nconst loadWebImage = async (imageId) => {\n  const ab = await (await fetch(imageId)).arrayBuffer();\n  const image = await createWebImage(ab);\n  return image;\n};\n\nexport default registerPromiseWorker(async (e) => {\n  const { imageUrl, seriesId, index, plane, format } = e;\n  let image;\n  if (format === \"dicom\") {\n    image = await loadImage(imageUrl);\n  } else if (format === \"webimage\") {\n    image = await loadWebImage(imageUrl);\n  } else {\n  }\n  return { seriesId, index, plane, image };\n});\n","import PromiseWorker from \"promise-worker\";\nimport { postprocessor } from \"./utils\";\nimport LoaderWorker from \"./workers/loader.worker\";\n\n/** @type { Boolean } 简单的通过判断是否是Chrome49版本来确定是否是xp系统 */\nconst isXP = /Windows NT 5\\.1.+Chrome\\/49/.test(navigator.userAgent);\n\nclass LoaderManager {\n  constructor() {\n    this.workers = [];\n    this.taskManager = null;\n    this.cacheManager = null;\n\n    this.initLoader();\n  }\n\n  initLoader() {\n    // 非xp留出一个加载线程供其他请求\n    const workerCount = isXP ? 2 : Math.min(navigator.hardwareConcurrency - 1, 5);\n\n    this.workers = Array.from(new Array(workerCount), (_, i) => i + 1).map((i) => {\n      const worker = new LoaderWorker();\n      const promiseWorker = new PromiseWorker(worker);\n      promiseWorker.id = i;\n      promiseWorker.working = false;\n      return promiseWorker;\n    });\n\n    console.log(this.workers);\n  }\n\n  async load() {\n    // 如果有挂载任务，返回\n    if (!this.taskManager.hasPendingTask()) {\n      return;\n    }\n\n    // 如果没有可用的worker返回，并且启动worker检查，看什么时候有空闲worker再继续下载\n    if (this.workers.length === 0) {\n      this._startCheck();\n      return;\n    }\n\n    const task = this.taskManager.pendingTask.shift();\n    // 加载的任务，如果已经缓存了。就过\n    const { seriesId: ts, index: ti, plane: tp, resolve: tr } = task;\n    const cacheItem = this.cacheManager.getItem(ts, ti, tp);\n    if (cacheItem) {\n      tr?.(cacheItem);\n      this._startCheck();\n      return;\n    }\n\n    const worker = this.workers.shift();\n    worker.working = true;\n    const { resolve } = task;\n    delete task.resolve;\n    const data = await worker.postMessage(task);\n    worker.working = false;\n    this.workers.push(worker);\n\n    const { seriesId, plane, index, image } = data;\n    let img = await postprocessor(image, task);\n    this.cacheManager.cacheItem(seriesId, { key: index, value: img }, plane);\n\n    resolve?.(img);\n    await this.delay(0); // 减压、涓流\n    this._startCheck(); // 可能有更好的办法？？？\n  }\n\n  loadSeries(seriesId, plane) {\n    const tasks = this.taskManager.getTask(seriesId, plane);\n    while (tasks.length) {\n      this.taskManager.addPendingTask(tasks.shift());\n    }\n    this.taskManager.sort(this.taskManager.pendingTask);\n    this.workers.forEach(() => {\n      this.load();\n    });\n  }\n\n  _startCheck() {\n    // 只有还有剩余worker，就干活\n    if (this.workers.length > 0) {\n      this.load();\n      return;\n    }\n\n    if (!this.taskManager.hasPendingTask()) {\n      cancelAnimationFrame(this._rafInterval);\n      return;\n    }\n    this._rafInterval = requestAnimationFrame(this._startCheck.bind(this));\n  }\n\n  async delay(ms, value) {\n    return new Promise((resolve) => {\n      setTimeout(resolve, ms, value);\n    });\n  }\n}\n\nexport default LoaderManager;\n","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","require('../../modules/es6.date.now');\nmodule.exports = require('../../modules/_core').Date.now;\n","class TaskManager {\n  constructor() {\n    this.tasks = [];\n    this.pendingTask = [];\n  }\n\n  getTasks() {\n    return this.tasks;\n  }\n\n  addTask(obj) {\n    this.tasks.push(new Task(obj));\n  }\n\n  pickTask() {\n    return this.tasks.shift();\n  }\n\n  modifyTaskPriority(property, value, priority) {\n    this.tasks = this.tasks.map((task) => {\n      if (task?.[property] === value) {\n        task.priority = priority;\n      }\n\n      return task;\n    });\n\n    this.sort(this.tasks);\n  }\n\n  sort(tasks) {\n    tasks.sort((a, b) => a.priority - b.priority);\n  }\n\n  // getTask(seriesId, plane, index) {\n  //   const task = this.tasks.find((task) => {\n  //     return task.seriesId === seriesId && task.plane === plane && task.index === index;\n  //   });\n  //   return task;\n  // }\n\n  /**\n   * 参数顺序为,seriesId, plane, index 可以都不传\n   *\n   * @param {*} args\n   * @return {*}\n   * @memberof TaskManager\n   */\n  getTask(...args) {\n    const { length } = args;\n    const [seriesId, plane, index] = args;\n    const fn0 = (task) => task;\n    const fn1 = (task) => task.seriesId === seriesId;\n    const fn2 = (task) => task.seriesId === seriesId && task.plane === plane;\n    const fn3 = (task) =>\n      task.seriesId === seriesId && task.plane === plane && task.index === index;\n    const sortFn = [fn0, fn1, fn2, fn3];\n\n    return this.getTasks().filter(sortFn[length]);\n  }\n\n  hasPendingTask() {\n    return this.pendingTask.length > 0;\n  }\n\n  /**\n   *\n   *\n   * @param { Task } task\n   * @memberof TaskManager\n   */\n  addPendingTask(task) {\n    // 插队的时候，先在pending队列里找一下，是否已经存在对应task，如果有的话，更新task的优先级。否则插入新的task\n    const existIndex = this.pendingTask.findIndex((t) => {\n      return t.plane === task.plane && t.seriesId === task.seriesId && t.index === task.index;\n    });\n\n    if (existIndex !== -1) {\n      const oldTask = this.pendingTask[existIndex];\n      oldTask.priority = Date.now();\n      this.pendingTask.splice(existIndex, 1, oldTask);\n    } else {\n      task.priority = Date.now();\n      this.pendingTask.push(task);\n    }\n\n    this.sort(this.pendingTask);\n  }\n}\n\n/**\n * Task\n *\n * @class Task\n */\nclass Task {\n  constructor(obj) {\n    const { url = \"\", seriesId = \"\", plane = \"\", index, format = \"dicom\" } = obj;\n    this.priority = 0;\n    this.imageUrl = url;\n    this.seriesId = seriesId;\n    this.plane = plane;\n    this.index = index;\n    this.format = format;\n  }\n}\n\nexport default TaskManager;\n","import TaskManager from \"./task-manager\";\n\n/** @type { number } 前预载多少个 */\nconst PRE_COUNT = 8;\n/** @type { number } 后预载多少个 */\nconst SUF_COUNT = 4;\nclass PreloadManager {\n  constructor() {\n    /** @type {TaskManager} */\n    this.taskManager = null;\n  }\n\n  /**\n   *\n   *\n   * @param { Task } currentTask\n   * @memberof PreloadManager\n   */\n  buildPreloadTask(currentTask) {\n    const loopCount = Math.max(PRE_COUNT, SUF_COUNT);\n    const { plane, index, seriesId } = currentTask;\n\n    // index, index+1, index-1, index+2, index-2\n    const preloadTasks = [];\n    for (let i = 1, j = 1; i <= loopCount; i++, j++) {\n      if (j <= PRE_COUNT) {\n        const preIndex = index + j;\n        const preTask = this.taskManager.getTask(seriesId, plane, preIndex)[0];\n        if (preTask) {\n          preloadTasks.push(preTask);\n        }\n      }\n\n      if (i <= SUF_COUNT) {\n        const sufIndex = index - i;\n        const sufTask = this.taskManager.getTask(seriesId, plane, sufIndex)[0];\n        if (sufTask) {\n          preloadTasks.push(sufTask);\n        }\n      }\n    }\n\n    while (preloadTasks.length) {\n      this.taskManager.addPendingTask(preloadTasks.shift());\n    }\n  }\n}\n\nexport default PreloadManager;\n","import CacheManager from \"./cache-manager\";\nimport LoaderManager from \"./loader-manager\";\nimport PreloadManager from \"./preload\";\nimport TaskManager from \"./task-manager\";\n\nclass Resource {\n  constructor() {\n    // 加载管理器\n    this.loaderManager = new LoaderManager();\n    // 预加载管理器\n    this.preloadManager = new PreloadManager();\n    // 缓存管理器\n    this.cacheManager = new CacheManager();\n    // 任务管理器\n    this.taskManager = new TaskManager();\n    this.loaderManager.cacheManager = this.cacheManager;\n    this.loaderManager.taskManager = this.taskManager;\n    this.preloadManager.taskManager = this.taskManager;\n\n    window.__TX_RESOURCE__ = this;\n  }\n\n  /**\n   *\n   * @param { string} seriesId\n   * @param { Array } imageUrls\n   * @param { string } [plane=\"axis\"]\n   * @memberof Resource\n   */\n  addItemUrls(seriesId, imageUrls, plane = \"axis\", format = \"dicom\") {\n    imageUrls.forEach((url, index) => {\n      this.taskManager.addTask({ seriesId, url, plane, index, format });\n    });\n  }\n\n  /**\n   *\n   *\n   * @param { string } seriesId\n   * @param { Array<string, object>} objArray\n   * @param { string } [plane=\"axis\"]\n   * @memberof Resource\n   */\n  cacheItems(seriesId, objArray, plane = \"axis\") {\n    objArray.forEach((obj) => {\n      this.cacheItem(seriesId, obj, plane);\n    });\n  }\n\n  cacheItem(seriesId, obj, plane = \"axis\") {\n    this.cacheManager.cacheItem(seriesId, obj, plane);\n  }\n\n  async getImage(seriesId, index, plane = \"axis\") {\n    return new Promise((resolve, reject) => {\n      const image = this.cacheManager.getItem(seriesId, index, plane);\n      if (image) {\n        resolve(image);\n        this.preloadManager.buildPreloadTask({ seriesId, plane, index });\n        this.loaderManager.load();\n        return;\n      }\n\n      const task = this.taskManager.getTask(seriesId, plane, index)[0];\n      if (!task) {\n        console.error(`not have task ${seriesId}, ${plane}, ${index}.`);\n        return;\n      }\n\n      task.resolve = resolve;\n      this.taskManager.addPendingTask(task);\n      this.taskManager.sort(this.taskManager.pendingTask);\n\n      this.preloadManager.buildPreloadTask({ seriesId, plane, index });\n      this.loaderManager.load();\n    });\n  }\n\n  loadSeries(seriesId, plane) {\n    this.loaderManager.loadSeries(seriesId, plane);\n  }\n\n  purgeCache(seriesId, plane) {\n    this.cacheManager.purge(seriesId, plane);\n  }\n\n  getImages(seriesId, plane) {\n    return this.cacheManager.getItems(seriesId, plane);\n  }\n\n  getIllegalIndex(index, seriesId, plane, loop) {\n    const { length } = this.taskManager.getTasks(seriesId, plane);\n    if (loop && index >= length) {\n      return 0;\n    }\n    return Math.max(0, Math.min(index, length - 1));\n  }\n}\n\nexport default Resource;\n","'use strict';\nvar aFunction = require('./_a-function');\nvar isObject = require('./_is-object');\nvar invoke = require('./_invoke');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (F, len, args) {\n  if (!(len in factories)) {\n    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var bound = function (/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if (isObject(fn.prototype)) bound.prototype = fn.prototype;\n  return bound;\n};\n","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export = require('./_export');\nvar create = require('./_object-create');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar bind = require('./_bind');\nvar rConstruct = (require('./_global').Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  rConstruct(function () { /* empty */ });\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","require('../../modules/es6.reflect.construct');\nmodule.exports = require('../../modules/_core').Reflect.construct;\n","import _Object$setPrototypeOf from \"@babel/runtime-corejs2/core-js/object/set-prototype-of\";\nexport default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = _Object$setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime-corejs2/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import _Object$setPrototypeOf from \"@babel/runtime-corejs2/core-js/object/set-prototype-of\";\nimport _Object$getPrototypeOf from \"@babel/runtime-corejs2/core-js/object/get-prototype-of\";\nexport default function _getPrototypeOf(o) {\n  _getPrototypeOf = _Object$setPrototypeOf ? _Object$getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || _Object$getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import crypto from 'crypto'\n\nimport { urlAlphabet } from './url-alphabet/index.js'\n\n// It is best to make fewer, larger requests to the crypto module to\n// avoid system call overhead. So, random numbers are generated in a\n// pool. The pool is a Buffer that is larger than the initial random\n// request size by this multiplier. The pool is enlarged if subsequent\n// requests exceed the maximum buffer size.\nconst POOL_SIZE_MULTIPLIER = 32\nlet pool, poolOffset\n\nlet random = bytes => {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    crypto.randomFillSync(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    crypto.randomFillSync(pool)\n    poolOffset = 0\n  }\n\n  let res = pool.subarray(poolOffset, poolOffset + bytes)\n  poolOffset += bytes\n  return res\n}\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n  let step = Math.ceil((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (let i = 0; i < step; i++)`.\n      let i = step\n      while (i--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let bytes = random(size)\n  let id = ''\n  // A compact alternative for `for (let i = 0; i < size; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    id += urlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","import EventEmitter from \"event-emitter\";\nimport { customAlphabet } from \"nanoid\";\n\nconst ALPHABET = \"12345abcde\";\n/**\n * 组件基类\n *\n * @class Component\n */\nclass Component {\n  constructor(opt) {\n    EventEmitter(this);\n    this.id = opt?.id || customAlphabet(ALPHABET, 8)();\n  }\n\n  destroy() {}\n}\n\nexport default Component;\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import _Symbol from \"@babel/runtime-corejs2/core-js/symbol\";\nimport _Symbol$iterator from \"@babel/runtime-corejs2/core-js/symbol/iterator\";\nimport _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nexport default function _iterableToArray(iter) {\n  if (typeof _Symbol !== \"undefined\" && iter[_Symbol$iterator] != null || iter[\"@@iterator\"] != null) return _Array$from(iter);\n}","import _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nimport arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (_Array$isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nexport default function _arrayWithHoles(arr) {\n  if (_Array$isArray(arr)) return arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import _Symbol from \"@babel/runtime-corejs2/core-js/symbol\";\nimport _Symbol$iterator from \"@babel/runtime-corejs2/core-js/symbol/iterator\";\nexport default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof _Symbol !== \"undefined\" && arr[_Symbol$iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export const INTERNAL_EVENT = {\n  ENTER_FRAME: \"internal_enter_frame\",\n};\n","import EventEmitter from \"event-emitter\";\nimport { INTERNAL_EVENT } from \"./internal\";\n\nconst selfRequestAnimationFrame = (callback) => {\n  return setInterval(callback, 30);\n};\n\nconst selfCancelRequestAnimationFrame = (id) => {\n  clearInterval(id);\n};\nconst RAF = window.requestAnimationFrame || selfRequestAnimationFrame;\nconst CRAF = window.cancelAnimationFrame || selfCancelRequestAnimationFrame;\n\nclass Stage {\n  constructor() {\n    EventEmitter(this);\n    this._fps = 30;\n    this.fpsInterval = Math.ceil(1000 / this._fps);\n    this.lastRenderTime = Date.now();\n  }\n\n  render() {\n    const { isRunning } = this;\n    if (!isRunning) {\n      return;\n    }\n    const { lastRenderTime, fpsInterval } = this;\n    const now = Date.now();\n    const elapsed = now - lastRenderTime;\n    if (elapsed < fpsInterval) {\n      CRAF(this.rafInterval);\n      this.rafInterval = RAF(this.render.bind(this));\n      return;\n    }\n\n    this.lastRenderTime = now;\n    this.emit(INTERNAL_EVENT.ENTER_FRAME);\n  }\n\n  startRender() {\n    this.isRunning = true;\n    this.rafInterval = RAF(this.render.bind(this));\n  }\n\n  stopRender() {\n    this.isRunning = false;\n    CRAF(this.rafInterval);\n  }\n\n  set fps(val) {\n    if (this.fps === +val) {\n      return;\n    }\n\n    this._fps = +val;\n    if (val === 0) {\n      CRAF(this.rafInterval);\n      return;\n    }\n\n    this.fpsInterval = Math.ceil(1000 / +val);\n  }\n\n  get fps() {\n    return this._fps;\n  }\n}\n\nexport default Stage;\n","import { INTERNAL_EVENT } from \"./internal\";\nimport Stage from \"./stage\";\nclass RenderSchedule {\n  /**\n   * Creates an instance of RenderSchedule.\n   * @param { Stage } stage\n   * @memberof RenderSchedule\n   */\n  constructor(stage) {\n    /** 延迟渲染队列 */\n    this.deferredQueue = new Map();\n    /** @type { Stage } */\n    this.stage = stage;\n    this.stage.on(INTERNAL_EVENT.ENTER_FRAME, this.onValidate.bind(this));\n  }\n\n  /**\n   * 将待更新函数放入延迟渲染队列\n   *\n   * @param {*} fn\n   * @param {*} args\n   * @memberof RenderSchedule\n   */\n  invalidate(fn, ...args) {\n    this.deferredQueue.set(fn, args);\n    this.stage.startRender();\n  }\n\n  /**\n   * 立即进行渲染\n   *\n   * @memberof RenderSchedule\n   */\n  validateNow() {\n    this.onValidate();\n  }\n\n  /**\n   * 生效函数，该函数通常被stage.enter_frame事件 和 validateNow 函数调用。\n   *\n   * @return {*}\n   * @memberof RenderSchedule\n   */\n  onValidate() {\n    const { size } = this.deferredQueue;\n    if (size === 0) {\n      this.stage.stopRender();\n      return;\n    }\n\n    for (const [fn, values] of this.deferredQueue?.entries()) {\n      fn?.(...values);\n      this.deferredQueue.delete(fn);\n    }\n\n    // 渲染过程中，又来了新的\n    const { size: remainSize } = this.deferredQueue;\n    if (remainSize > 0) {\n      this.validateNow();\n    }\n  }\n}\n\nexport default RenderSchedule;\n","import RenderSchedule from \"./render-schedule\";\nimport Stage from \"./stage\";\n\nclass Core {\n  constructor(option = {}) {\n    this.option = option;\n    this.initialize();\n\n    window.__TX_CORE__ = this;\n  }\n\n  initialize() {\n    const { option } = this;\n    this.stage = new Stage();\n    this.stage.fps = +option.fps || 30;\n    this.renderSchedule = new RenderSchedule(this.stage);\n  }\n}\n\nexport default Core;\n","export const TOOL_CONSTANTS = {\n  HIT_STROKE_WIDTH: 20,\n  ANCHOR_HIT_STROKE_WIDTH: 20,\n};\n\nexport const TOOL_COLORS = {\n  HOVER: {\n    \"default-color\": \"#5BD1AE\",\n    \".node-anchor\": \"#5BD1AE\",\n    \".node-item\": \"#5BD1AE\",\n    \".node-label\": \"#5BD1AE\",\n  },\n  NORMAL: {\n    \"default-color\": \"#2AC7F6\",\n    \".node-anchor\": \"#2AC7F6\",\n    \".node-item\": \"#2AC7F6\",\n    \".node-label\": \"#2AC7F6\",\n  },\n};\n\nexport const TOOL_ITEM_SELECTOR = {\n  ANCHOR: \"node-anchor\",\n  ITEM: \"node-item\",\n  DASHLINE: \"node-dashline\",\n  LABEL: \"node-label\",\n};\n\nexport const TOOL_TYPE = {\n  STACK_SCROLL: \"stack_scroll\",\n  STACK_WHEEL_SCROLL: \"stack_wheel_scroll\",\n  MAGNIFYING: \"magnifying\",\n  WWWC: \"wwwc\",\n  LENGTH: \"length\",\n  ANGLE: \"angle\",\n  PROBE: \"probe\",\n  ELLIPSE_ROI: \"ellipse_roi\",\n  POLYGON: \"polygon\",\n  ROTATION: \"rotation\",\n  SCALE: \"scale\",\n  TRANSLATE: \"translate\",\n};\n\nexport const INTERNAL_EVENTS = {\n  DATA_CREATED: \"tx_data_created\",\n  DATA_UPDATED: \"tx_data_updated\",\n  DATA_REMOVED: \"tx_data_removed\",\n  TOOL_TRANSLATE: \"tx_tool_translate\",\n  TOOL_ROTATION: \"tx_tool_rotation\",\n  TOOL_SCALE: \"tx_tool_scale\",\n  TOOL_WWWC: \"tx_tool_wwwc\",\n  TOOL_STACK_CHANGE: \"tx_stack_change\",\n  TOOL_FLIPH: \"tx_tool_flipH\",\n  TOOL_FLIPV: \"tx_tool_flipV\",\n  TOOL_INVERT: \"tx_tool_invert\",\n};\n","export const viewportState = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  rotate: 0,\n  scale: 1,\n  rootWidth: 0,\n  rootHeight: 0,\n  centerX: 0,\n  centerY: 0,\n};\n\nexport const initialState = {};\n","import { Component } from \"@saga/core\";\nimport { INTERNAL_EVENTS } from \"../constants\";\nimport { initialState } from \"../state/viewport-state\";\nclass API extends Component {\n  constructor() {\n    super();\n    this.playInterval = null;\n  }\n\n  rotation(rotate, dispatch = true) {\n    this.emit(INTERNAL_EVENTS.TOOL_ROTATION, { rotate, dispatch });\n  }\n\n  wwwc(wwwc, dispatch = true) {\n    this.emit(INTERNAL_EVENTS.TOOL_WWWC, { wwwc, dispatch });\n  }\n\n  flipH(h, dispatch = true) {\n    this.emit(INTERNAL_EVENTS.TOOL_FLIPH, { h, dispatch });\n  }\n\n  flipV(v, dispatch = true) {\n    this.emit(INTERNAL_EVENTS.TOOL_FLIPV, { v, dispatch });\n  }\n\n  invert(invert, dispatch = true) {\n    this.emit(INTERNAL_EVENTS.TOOL_INVERT, { invert, dispatch });\n  }\n\n  scale(scale, dispatch = true) {\n    this.emit(INTERNAL_EVENTS.TOOL_SCALE, { scale, dispatch });\n  }\n\n  reset() {\n    const { rotate, x, y, scale } = initialState;\n    this.emit(INTERNAL_EVENTS.TOOL_ROTATION, { rotate });\n    this.emit(INTERNAL_EVENTS.TOOL_TRANSLATE, { offset: { x, y } });\n    this.emit(INTERNAL_EVENTS.TOOL_SCALE, { scale });\n    this.emit(INTERNAL_EVENTS.TOOL_WWWC, { wwwc: { ww: 0, wc: 0 } });\n    this.emit(INTERNAL_EVENTS.TOOL_FLIPH, { h: false });\n    this.emit(INTERNAL_EVENTS.TOOL_FLIPV, { v: false });\n    this.emit(INTERNAL_EVENTS.TOOL_INVERT, { invert: false });\n  }\n\n  play(speed) {\n    clearInterval(this.playInterval);\n    const s = Math.max(0.25, Math.min(speed, 5));\n    this.playInterval = setInterval(() => {\n      this.emit(INTERNAL_EVENTS.TOOL_STACK_CHANGE, { delta: 1, loop: true });\n    }, 1000 / s);\n  }\n\n  stop() {\n    clearInterval(this.playInterval);\n  }\n}\nexport default API;\n","/**\n * 代码来源\n * https://github.com/m-gagne/limit.js\n * 并没有上传npm.再此谢过。\n */\n\n/**\n * debounce\n * @param {integer} milliseconds This param indicates the number of milliseconds\n *     to wait after the last call before calling the original function.\n * @param {object} What \"this\" refers to in the returned function.\n * @return {function} This returns a function that when called will wait the\n *     indicated number of milliseconds after the last call before\n *     calling the original function.\n */\nFunction.prototype.debounce = function (milliseconds, context) {\n  var baseFunction = this;\n  var timer = null;\n  var wait = milliseconds;\n\n  return function () {\n    var self = context || this;\n    var args = arguments;\n\n    function complete() {\n      baseFunction.apply(self, args);\n      timer = null;\n    }\n\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = setTimeout(complete, wait);\n  };\n};\n\n/**\n * throttle\n * @param {integer} milliseconds This param indicates the number of milliseconds\n *     to wait between calls before calling the original function.\n * @param {object} What \"this\" refers to in the returned function.\n * @return {function} This returns a function that when called will wait the\n *     indicated number of milliseconds between calls before\n *     calling the original function.\n */\nFunction.prototype.throttle = function (milliseconds, context) {\n  var baseFunction = this;\n  var lastEventTimestamp = null;\n  var limit = milliseconds;\n\n  return function () {\n    var self = context || this;\n    var args = arguments;\n    var now = Date.now();\n\n    if (!lastEventTimestamp || now - lastEventTimestamp >= limit) {\n      lastEventTimestamp = now;\n      baseFunction.apply(self, args);\n    }\n  };\n};\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n","var PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nexport const glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexport const Konva = {\n    _global: glob,\n    version: '8.1.3',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle(angle) {\n        return Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    pointerEventsEnabled: true,\n    autoDrawEnabled: true,\n    hitOnDragEnabled: false,\n    capturePointerEventsEnabled: false,\n    _mouseListenClick: false,\n    _touchListenClick: false,\n    _pointerListenClick: false,\n    _mouseInDblClickWindow: false,\n    _touchInDblClickWindow: false,\n    _pointerInDblClickWindow: false,\n    pixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging() {\n        return Konva['DD'].isDragging;\n    },\n    isDragReady() {\n        return !!Konva['DD'].node;\n    },\n    document: glob.document,\n    _injectGlobal(Konva) {\n        glob.Konva = Konva;\n    },\n};\nexport const _registerNode = (NodeClass) => {\n    Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\nKonva._injectGlobal(Konva);\n","import { Konva } from './Global.js';\nexport class Transform {\n    constructor(m = [1, 0, 0, 1, 0, 0]) {\n        this.dirty = false;\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    reset() {\n        this.m[0] = 1;\n        this.m[1] = 0;\n        this.m[2] = 0;\n        this.m[3] = 1;\n        this.m[4] = 0;\n        this.m[5] = 0;\n    }\n    copy() {\n        return new Transform(this.m);\n    }\n    copyInto(tr) {\n        tr.m[0] = this.m[0];\n        tr.m[1] = this.m[1];\n        tr.m[2] = this.m[2];\n        tr.m[3] = this.m[3];\n        tr.m[4] = this.m[4];\n        tr.m[5] = this.m[5];\n    }\n    point(point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5],\n        };\n    }\n    translate(x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    }\n    scale(sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    }\n    rotate(rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    getTranslation() {\n        return {\n            x: this.m[4],\n            y: this.m[5],\n        };\n    }\n    skew(sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    multiply(matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    }\n    invert() {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    }\n    getMatrix() {\n        return this.m;\n    }\n    setAbsolutePosition(x, y) {\n        var m0 = this.m[0], m1 = this.m[1], m2 = this.m[2], m3 = this.m[3], m4 = this.m[4], m5 = this.m[5], yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2), xt = (x - m4 - m2 * yt) / m0;\n        return this.translate(xt, yt);\n    }\n    decompose() {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        let result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0,\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = Util._getRotation(result.rotation);\n        return result;\n    }\n}\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5],\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nconst req = (typeof requestAnimationFrame !== 'undefined' && requestAnimationFrame) ||\n    function (f) {\n        setTimeout(f, 60);\n    };\nexport const Util = {\n    _isElement(obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction(obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject(obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber(obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject(val) {\n        return val instanceof Object;\n    },\n    isValidSelector(selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign(number) {\n        if (number === 0) {\n            return 1;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame(callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            req(function () {\n                const queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement() {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement() {\n        return document.createElement('img');\n    },\n    _isInDocument(el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _urlToImage(url, callback) {\n        var imageObj = Util.createImageElement();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex(r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb(hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255,\n        };\n    },\n    getRandomColor() {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    getRGB(color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2],\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10),\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n            };\n        }\n    },\n    colorToRGBA(str) {\n        str = str || 'black';\n        return (Util._namedColorToRBA(str) ||\n            Util._hex3ColorToRGBA(str) ||\n            Util._hex6ColorToRGBA(str) ||\n            Util._rgbColorToRGBA(str) ||\n            Util._rgbaColorToRGBA(str) ||\n            Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA(str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1,\n        };\n    },\n    _rgbColorToRGBA(str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1,\n            };\n        }\n    },\n    _rgbaColorToRGBA(str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3],\n            };\n        }\n    },\n    _hex6ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1,\n            };\n        }\n    },\n    _hex3ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1,\n            };\n        }\n    },\n    _hslColorToRGBA(str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            const [_, ...hsl] = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str);\n            const h = Number(hsl[0]) / 360;\n            const s = Number(hsl[1]) / 100;\n            const l = Number(hsl[2]) / 100;\n            let t2;\n            let t3;\n            let val;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1,\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            const t1 = 2 * l - t2;\n            const rgb = [0, 0, 0];\n            for (let i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1,\n            };\n        }\n    },\n    haveIntersection(r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject(obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray(arr) {\n        return arr.slice(0);\n    },\n    degToRad(deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    radToDeg(rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _degToRad(deg) {\n        Util.warn('Util._degToRad is removed. Please use public Util.degToRad instead.');\n        return Util.degToRad(deg);\n    },\n    _radToDeg(rad) {\n        Util.warn('Util._radToDeg is removed. Please use public Util.radToDeg instead.');\n        return Util.radToDeg(rad);\n    },\n    _getRotation(radians) {\n        return Konva.angleDeg ? Util.radToDeg(radians) : radians;\n    },\n    _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw(str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error(str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn(str) {\n        if (!Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    each(obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange(val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine(pt, line, isClosed) {\n        var pc = Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween(startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1],\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1],\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify(obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign(target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId(evt) {\n        if (!evt.touches) {\n            return 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    },\n};\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import { Konva } from './Global.js';\nimport { Util } from './Util.js';\nexport const DD = {\n    get isDragging() {\n        var flag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        DD._dragElements.forEach((elem) => {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag(evt) {\n        const nodesToFireEvents = [];\n        DD._dragElements.forEach((elem, key) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util._getFirstPointerId(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            nodesToFireEvents.push(node);\n        });\n        nodesToFireEvents.forEach((node) => {\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt,\n            }, true);\n        });\n    },\n    _endDragBefore(evt) {\n        DD._dragElements.forEach((elem) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                DD.justDragged = true;\n                Konva._mouseListenClick = false;\n                Konva._touchListenClick = false;\n                Konva._pointerListenClick = false;\n                elem.dragStatus = 'stopped';\n            }\n            const drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.batchDraw();\n            }\n        });\n    },\n    _endDragAfter(evt) {\n        DD._dragElements.forEach((elem, key) => {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt,\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                DD._dragElements.delete(key);\n            }\n        });\n    },\n};\nif (Konva.isBrowser) {\n    window.addEventListener('mouseup', DD._endDragBefore, true);\n    window.addEventListener('touchend', DD._endDragBefore, true);\n    window.addEventListener('mousemove', DD._drag);\n    window.addEventListener('touchmove', DD._drag);\n    window.addEventListener('mouseup', DD._endDragAfter, false);\n    window.addEventListener('touchend', DD._endDragAfter, false);\n}\n","// 26.1.6 Reflect.get(target, propertyKey [, receiver])\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\n\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var desc, proto;\n  if (anObject(target) === receiver) return target[propertyKey];\n  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')\n    ? desc.value\n    : desc.get !== undefined\n      ? desc.get.call(receiver)\n      : undefined;\n  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);\n}\n\n$export($export.S, 'Reflect', { get: get });\n","require('../../modules/es6.reflect.get');\nmodule.exports = require('../../modules/_core').Reflect.get;\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import _Reflect$get from \"@babel/runtime-corejs2/core-js/reflect/get\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && _Reflect$get) {\n    _get = _Reflect$get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n\n      var desc = _Object$getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import { Konva } from './Global.js';\nimport { Util } from './Util.js';\nfunction _formatValue(val) {\n    if (Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nexport function RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexport function alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexport function getNumberValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isNumber(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberOrArrayOfNumbersValidator(noOfElements) {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            let isNumber = Util._isNumber(val);\n            let isValidArray = Util._isArray(val) && val.length == noOfElements;\n            if (!isNumber && !isValidArray) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or Array<number>(' +\n                    noOfElements +\n                    ')');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberOrAutoValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexport function getStringValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isString(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexport function getStringOrGradientValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            const isString = Util._isString(val);\n            const isGradient = Object.prototype.toString.call(val) === '[object CanvasGradient]' ||\n                (val && val.addColorStop);\n            if (!(isString || isGradient)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string or a native gradient.');\n            }\n            return val;\n        };\n    }\n}\nexport function getFunctionValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isFunction(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberArrayValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isArray(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util._isNumber(item)) {\n                        Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexport function getBooleanValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexport function getComponentValidator(components) {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util.isObject(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\n","import { Util } from './Util.js';\nimport { getComponentValidator } from './Validators.js';\nvar GET = 'get', SET = 'set';\nexport const Factory = {\n    addGetterSetter(constructor, attr, def, validator, after) {\n        Factory.addGetter(constructor, attr, def);\n        Factory.addSetter(constructor, attr, validator, after);\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter(constructor, attr, def) {\n        var method = GET + Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter(constructor, attr, validator, after) {\n        var method = SET + Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter(constructor, attr, validator, after) {\n        var method = SET + Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter(constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = getComponentValidator(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter(constructor, attr) {\n        var capitalizedAttr = Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter(constructor, attr, def, validator) {\n        Util.error('Adding deprecated ' + attr);\n        var method = GET + Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        Factory.addSetter(constructor, attr, validator, function () {\n            Util.error(message);\n        });\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat(constructor, methods) {\n        Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter() {\n        this._filterUpToDate = false;\n    },\n};\n","import { Util } from './Util.js';\nimport { Konva } from './Global.js';\nfunction simplifyArray(arr) {\n    var retArr = [], len = arr.length, util = Util, n, val;\n    for (n = 0; n < len; n++) {\n        val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nconst traceArrMax = 100;\nexport class Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        var lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    }\n    arcTo(a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    }\n    clearRect(a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    }\n    clip() {\n        this._context.clip();\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    }\n    createLinearGradient(a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    }\n    createPattern(a0, a1) {\n        return this._context.createPattern(a0, a1);\n    }\n    createRadialGradient(a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    }\n    drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    }\n    ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    isPointInPath(x, y) {\n        return this._context.isPointInPath(x, y);\n    }\n    fill(path2d) {\n        if (path2d) {\n            this._context.fill(path2d);\n        }\n        else {\n            this._context.fill();\n        }\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    }\n    lineTo(a0, a1) {\n        this._context.lineTo(a0, a1);\n    }\n    moveTo(a0, a1) {\n        this._context.moveTo(a0, a1);\n    }\n    rect(a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    }\n    putImageData(a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    }\n    quadraticCurveTo(a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(a0) {\n        this._context.rotate(a0);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(a0, a1) {\n        this._context.scale(a0, a1);\n    }\n    setLineDash(a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    }\n    transform(a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    }\n    translate(a0, a1) {\n        this._context.translate(a0, a1);\n    }\n    _enableTrace() {\n        var that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        var def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nexport class SceneContext extends Context {\n    _fillColor(shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nexport class HitContext extends Context {\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\n","import { Util } from './Util.js';\nimport { SceneContext, HitContext } from './Context.js';\nimport { Konva } from './Global.js';\nimport { Factory } from './Factory.js';\nimport { getNumberValidator } from './Validators.js';\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nexport class Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nFactory.addGetterSetter(Canvas, 'pixelRatio', undefined, getNumberValidator());\nexport class SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.context = new SceneContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexport class HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\n","import { Util, Transform } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { Konva } from './Global.js';\nimport { DD } from './DragAndDrop.js';\nimport { getNumberValidator, getStringValidator, getBooleanValidator, } from './Validators.js';\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ALL_LISTENERS = 'allEventListeners', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE);\nlet idCounter = 1;\nexport class Node {\n    constructor(config) {\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this._allEventListeners = null;\n        this.parent = null;\n        this._cache = new Map();\n        this._attachedDepsListeners = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this._dragEventId = null;\n        this._shouldFireChangeEvents = false;\n        this.setAttrs(config);\n        this._shouldFireChangeEvents = true;\n    }\n    hasChildren() {\n        return false;\n    }\n    _clearCache(attr) {\n        if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) &&\n            this._cache.get(attr)) {\n            this._cache.get(attr).dirty = true;\n        }\n        else if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    }\n    _getCache(attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        var isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;\n        var invalid = cache === undefined || (isTransform && cache.dirty === true);\n        if (invalid) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    }\n    _calculate(name, deps, getter) {\n        if (!this._attachedDepsListeners.get(name)) {\n            const depsString = deps.map((dep) => dep + 'Change.konva').join(SPACE);\n            this.on(depsString, () => {\n                this._clearCache(name);\n            });\n            this._attachedDepsListeners.set(name, true);\n        }\n        return this._getCache(name, getter);\n    }\n    _getCanvasCache() {\n        return this._cache.get(CANVAS);\n    }\n    _clearSelfAndDescendantCache(attr) {\n        this._clearCache(attr);\n        if (attr === ABSOLUTE_TRANSFORM) {\n            this.fire('absoluteTransformChange');\n        }\n    }\n    clearCache() {\n        this._cache.delete(CANVAS);\n        this._clearSelfAndDescendantCache();\n        this._requestDraw();\n        return this;\n    }\n    cache(config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? rect.x : conf.x, y = conf.y === undefined ? rect.y : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false, hitCanvasPixelRatio = conf.hitCanvasPixelRatio || 1;\n        if (!width || !height) {\n            Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2;\n        height += offset * 2;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n        }), cachedHitCanvas = new HitCanvas({\n            pixelRatio: hitCanvasPixelRatio,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        cachedSceneCanvas.isCache = true;\n        this._cache.delete(CANVAS);\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this);\n        this.drawHit(cachedHitCanvas, this);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        this._requestDraw();\n        return this;\n    }\n    isCached() {\n        return this._cache.has(CANVAS);\n    }\n    getClientRect(config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    }\n    _transformedRect(rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    _drawCachedSceneCanvas(context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        const canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    }\n    _drawCachedHitCanvas(context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0, hitCanvas.width / hitCanvas.pixelRatio, hitCanvas.height / hitCanvas.pixelRatio);\n        context.restore();\n    }\n    _getCachedSceneCanvas() {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    }\n    on(evtStr, handler) {\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    }\n    off(evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    }\n    dispatchEvent(evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    }\n    addEventListener(type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    }\n    removeEventListener(type) {\n        this.off(type);\n        return this;\n    }\n    _delegate(event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    }\n    remove() {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    }\n    _clearCaches() {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    }\n    _remove() {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    }\n    destroy() {\n        this.remove();\n        return this;\n    }\n    getAttr(attr) {\n        var method = 'get' + Util._capitalize(attr);\n        if (Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    }\n    getAncestors() {\n        var parent = this.getParent(), ancestors = [];\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    }\n    getAttrs() {\n        return this.attrs || {};\n    }\n    setAttrs(config) {\n        this._batchTransformChanges(() => {\n            var key, method;\n            if (!config) {\n                return this;\n            }\n            for (key in config) {\n                if (key === CHILDREN) {\n                    continue;\n                }\n                method = SET + Util._capitalize(key);\n                if (Util._isFunction(this[method])) {\n                    this[method](config[key]);\n                }\n                else {\n                    this._setAttr(key, config[key]);\n                }\n            }\n        });\n        return this;\n    }\n    isListening() {\n        return this._getCache(LISTENING, this._isListening);\n    }\n    _isListening(relativeTo) {\n        const listening = this.listening();\n        if (!listening) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isListening(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    isVisible() {\n        return this._getCache(VISIBLE, this._isVisible);\n    }\n    _isVisible(relativeTo) {\n        const visible = this.visible();\n        if (!visible) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isVisible(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    shouldDrawHit(top, skipDragCheck = false) {\n        if (top) {\n            return this._isVisible(top) && this._isListening(top);\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus !== 'dragging') {\n                return;\n            }\n            else if (elem.node.nodeType === 'Stage') {\n                layerUnderDrag = true;\n            }\n            else if (elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !skipDragCheck && !Konva.hitOnDragEnabled && layerUnderDrag;\n        return this.isListening() && this.isVisible() && !dragSkip;\n    }\n    show() {\n        this.visible(true);\n        return this;\n    }\n    hide() {\n        this.visible(false);\n        return this;\n    }\n    getZIndex() {\n        return this.index || 0;\n    }\n    getAbsoluteZIndex() {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().slice());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    }\n    getDepth() {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    }\n    _batchTransformChanges(func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        }\n        this._needClearTransformCache = false;\n    }\n    setPosition(pos) {\n        this._batchTransformChanges(() => {\n            this.x(pos.x);\n            this.y(pos.y);\n        });\n        return this;\n    }\n    getPosition() {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    }\n    getRelativePointerPosition() {\n        if (!this.getStage()) {\n            return null;\n        }\n        var pos = this.getStage().getPointerPosition();\n        if (!pos) {\n            return null;\n        }\n        var transform = this.getAbsoluteTransform().copy();\n        transform.invert();\n        return transform.point(pos);\n    }\n    getAbsolutePosition(top) {\n        let haveCachedParent = false;\n        let parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    }\n    setAbsolutePosition(pos) {\n        var origTrans = this._clearTransform();\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        var it = this._getAbsoluteTransform().copy();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        this._clearCache(TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        return this;\n    }\n    _setTransform(trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    }\n    _clearTransform() {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    }\n    move(change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    }\n    _eachAncestorReverse(func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    }\n    rotate(theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    }\n    moveToTop() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.push(this);\n        this.parent._setChildrenIndices();\n        return true;\n    }\n    moveUp() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveDown() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    setZIndex(zIndex) {\n        if (!this.parent) {\n            Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    }\n    getAbsoluteOpacity() {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    }\n    _getAbsoluteOpacity() {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    }\n    moveTo(newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    }\n    toObject() {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util.isObject(val) && !Util._isPlainObject(val) && !Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util._prepareToStringify(obj);\n    }\n    toJSON() {\n        return JSON.stringify(this.toObject());\n    }\n    getParent() {\n        return this.parent;\n    }\n    findAncestors(selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    }\n    isAncestorOf(node) {\n        return false;\n    }\n    findAncestor(selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    }\n    _isMatch(selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util.isValidSelector(sel)) {\n                Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getLayer() {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    }\n    getStage() {\n        return this._getCache(STAGE, this._getStage);\n    }\n    _getStage() {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    }\n    fire(eventType, evt = {}, bubble) {\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    }\n    getAbsoluteTransform(top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    }\n    _getAbsoluteTransform(top) {\n        var at;\n        if (top) {\n            at = new Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            at = this._cache.get(ABSOLUTE_TRANSFORM) || new Transform();\n            if (this.parent) {\n                this.parent.getAbsoluteTransform().copyInto(at);\n            }\n            else {\n                at.reset();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                const x = this.attrs.x || 0;\n                const y = this.attrs.y || 0;\n                const offsetX = this.attrs.offsetX || 0;\n                const offsetY = this.attrs.offsetY || 0;\n                at.translate(x - offsetX, y - offsetY);\n            }\n            at.dirty = false;\n            return at;\n        }\n    }\n    getAbsoluteScale(top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        const transform = this.getAbsoluteTransform(top);\n        const attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    }\n    getAbsoluteRotation() {\n        return this.getAbsoluteTransform().decompose().rotation;\n    }\n    getTransform() {\n        return this._getCache(TRANSFORM, this._getTransform);\n    }\n    _getTransform() {\n        var _a, _b;\n        var m = this._cache.get(TRANSFORM) || new Transform();\n        m.reset();\n        var x = this.x(), y = this.y(), rotation = Konva.getAngle(this.rotation()), scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1, scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1, skewX = this.attrs.skewX || 0, skewY = this.attrs.skewY || 0, offsetX = this.attrs.offsetX || 0, offsetY = this.attrs.offsetY || 0;\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        m.dirty = false;\n        return m;\n    }\n    clone(obj) {\n        var attrs = Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : box.x, y = config.y !== undefined ? config.y : box.y, pixelRatio = config.pixelRatio || 1, canvas = new SceneCanvas({\n            width: config.width || box.width || (stage ? stage.width() : 0),\n            height: config.height || box.height || (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    }\n    toCanvas(config) {\n        return this._toKonvaCanvas(config)._canvas;\n    }\n    toDataURL(config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    }\n    toImage(config) {\n        if (!config || !config.callback) {\n            throw 'callback required for toImage method config argument';\n        }\n        var callback = config.callback;\n        delete config.callback;\n        Util._urlToImage(this.toDataURL(config), function (img) {\n            callback(img);\n        });\n    }\n    setSize(size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    }\n    getSize() {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    }\n    getClassName() {\n        return this.className || this.nodeType;\n    }\n    getType() {\n        return this.nodeType;\n    }\n    getDragDistance() {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Konva.dragDistance;\n        }\n    }\n    _off(type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    }\n    _fireChangeEvent(attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    }\n    addName(name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.name(newName);\n        }\n        return this;\n    }\n    hasName(name) {\n        if (!name) {\n            return false;\n        }\n        const fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    }\n    removeName(name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.name(names.join(' '));\n        }\n        return this;\n    }\n    setAttr(attr, val) {\n        var func = this[SET + Util._capitalize(attr)];\n        if (Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    }\n    _requestDraw() {\n        if (Konva.autoDrawEnabled) {\n            const drawNode = this.getLayer() || this.getStage();\n            drawNode === null || drawNode === void 0 ? void 0 : drawNode.batchDraw();\n        }\n    }\n    _setAttr(key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        if (this._shouldFireChangeEvents) {\n            this._fireChangeEvent(key, oldVal, val);\n        }\n        this._requestDraw();\n    }\n    _setComponentAttr(key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    }\n    _fireAndBubble(eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    }\n    _getProtoListeners(eventType) {\n        let listeners = this._cache.get(ALL_LISTENERS);\n        if (!listeners) {\n            listeners = {};\n            let obj = Object.getPrototypeOf(this);\n            while (obj) {\n                if (!obj.eventListeners) {\n                    obj = Object.getPrototypeOf(obj);\n                    continue;\n                }\n                for (var event in obj.eventListeners) {\n                    const newEvents = obj.eventListeners[event];\n                    const oldEvents = listeners[event] || [];\n                    listeners[event] = newEvents.concat(oldEvents);\n                }\n                obj = Object.getPrototypeOf(obj);\n            }\n            this._cache.set(ALL_LISTENERS, listeners);\n        }\n        return listeners[eventType];\n    }\n    _fire(eventType, evt) {\n        evt = evt || {};\n        evt.currentTarget = this;\n        evt.type = eventType;\n        const topListeners = this._getProtoListeners(eventType);\n        if (topListeners) {\n            for (var i = 0; i < topListeners.length; i++) {\n                topListeners[i].handler.call(this, evt);\n            }\n        }\n        const selfListeners = this.eventListeners[eventType];\n        if (selfListeners) {\n            for (var i = 0; i < selfListeners.length; i++) {\n                selfListeners[i].handler.call(this, evt);\n            }\n        }\n    }\n    draw() {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    }\n    _createDragElement(evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId,\n        });\n    }\n    startDrag(evt, bubbleEvent = true) {\n        if (!DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        const elem = DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, bubbleEvent);\n    }\n    _setDragPosition(evt, elem) {\n        const pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            const bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            this._requestDraw();\n        }\n        this._lastPos = newNodePos;\n    }\n    stopDrag(evt) {\n        const elem = DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DD._endDragBefore(evt);\n        DD._endDragAfter(evt);\n    }\n    setDraggable(draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    }\n    isDragging() {\n        const elem = DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    }\n    _listenDrag() {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DD._dragElements.forEach((elem) => {\n                if (this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    }\n    _dragChange() {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (!stage) {\n                return;\n            }\n            const dragElement = DD._dragElements.get(this._id);\n            const isDragging = dragElement && dragElement.dragStatus === 'dragging';\n            const isReady = dragElement && dragElement.dragStatus === 'ready';\n            if (isDragging) {\n                this.stopDrag();\n            }\n            else if (isReady) {\n                DD._dragElements.delete(this._id);\n            }\n        }\n    }\n    _dragCleanup() {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    }\n    isClientRectOnScreen(margin = { x: 0, y: 0 }) {\n        const stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        const screenRect = {\n            x: -margin.x,\n            y: -margin.y,\n            width: stage.width() + margin.x,\n            height: stage.height() + margin.y,\n        };\n        return Util.haveIntersection(screenRect, this.getClientRect());\n    }\n    static create(data, container) {\n        if (Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    }\n    static _createNode(obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Konva[className]) {\n            Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        const Class = Konva[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    }\n}\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nNode.prototype.eventListeners = {};\nNode.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function () {\n    if (this._batchingTransformChange) {\n        this._needClearTransformCache = true;\n        return;\n    }\n    this._clearCache(TRANSFORM);\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n});\nNode.prototype.on.call(Node.prototype, 'visibleChange.konva', function () {\n    this._clearSelfAndDescendantCache(VISIBLE);\n});\nNode.prototype.on.call(Node.prototype, 'listeningChange.konva', function () {\n    this._clearSelfAndDescendantCache(LISTENING);\n});\nNode.prototype.on.call(Node.prototype, 'opacityChange.konva', function () {\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n});\nconst addGetterSetter = Factory.addGetterSetter;\naddGetterSetter(Node, 'zIndex');\naddGetterSetter(Node, 'absolutePosition');\naddGetterSetter(Node, 'position');\naddGetterSetter(Node, 'x', 0, getNumberValidator());\naddGetterSetter(Node, 'y', 0, getNumberValidator());\naddGetterSetter(Node, 'globalCompositeOperation', 'source-over', getStringValidator());\naddGetterSetter(Node, 'opacity', 1, getNumberValidator());\naddGetterSetter(Node, 'name', '', getStringValidator());\naddGetterSetter(Node, 'id', '', getStringValidator());\naddGetterSetter(Node, 'rotation', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\naddGetterSetter(Node, 'scaleX', 1, getNumberValidator());\naddGetterSetter(Node, 'scaleY', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\naddGetterSetter(Node, 'skewX', 0, getNumberValidator());\naddGetterSetter(Node, 'skewY', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\naddGetterSetter(Node, 'offsetX', 0, getNumberValidator());\naddGetterSetter(Node, 'offsetY', 0, getNumberValidator());\naddGetterSetter(Node, 'dragDistance', null, getNumberValidator());\naddGetterSetter(Node, 'width', 0, getNumberValidator());\naddGetterSetter(Node, 'height', 0, getNumberValidator());\naddGetterSetter(Node, 'listening', true, getBooleanValidator());\naddGetterSetter(Node, 'preventDefault', true, getBooleanValidator());\naddGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\naddGetterSetter(Node, 'visible', true, getBooleanValidator());\naddGetterSetter(Node, 'transformsEnabled', 'all', getStringValidator());\naddGetterSetter(Node, 'size');\naddGetterSetter(Node, 'dragBoundFunc');\naddGetterSetter(Node, 'draggable', false, getBooleanValidator());\nFactory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\n","import { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator } from './Validators.js';\nexport class Container extends Node {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n    }\n    getChildren(filterFunc) {\n        if (!filterFunc) {\n            return this.children || [];\n        }\n        const children = this.children || [];\n        var results = [];\n        children.forEach(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    }\n    hasChildren() {\n        return this.getChildren().length > 0;\n    }\n    removeChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    destroyChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    add(...children) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        this._validateAdd(child);\n        child.index = this.getChildren().length;\n        child.parent = this;\n        child._clearCaches();\n        this.getChildren().push(child);\n        this._fire('add', {\n            child: child,\n        });\n        this._requestDraw();\n        return this;\n    }\n    destroy() {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        super.destroy();\n        return this;\n    }\n    find(selector) {\n        return this._generalFind(selector, false);\n    }\n    findOne(selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    }\n    _generalFind(selector, findOne) {\n        var retArr = [];\n        this._descendants((node) => {\n            const valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return retArr;\n    }\n    _descendants(fn) {\n        let shouldStop = false;\n        const children = this.getChildren();\n        for (const child of children) {\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    }\n    toObject() {\n        var obj = Node.prototype.toObject.call(this);\n        obj.children = [];\n        this.getChildren().forEach((child) => {\n            obj.children.push(child.toObject());\n        });\n        return obj;\n    }\n    isAncestorOf(node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    }\n    clone(obj) {\n        var node = Node.prototype.clone.call(this, obj);\n        this.getChildren().forEach(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    }\n    getAllIntersections(pos) {\n        var arr = [];\n        this.find('Shape').forEach(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    }\n    _clearSelfAndDescendantCache(attr) {\n        var _a;\n        super._clearSelfAndDescendantCache(attr);\n        if (this.isCached()) {\n            return;\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (node) {\n            node._clearSelfAndDescendantCache(attr);\n        });\n    }\n    _setChildrenIndices() {\n        var _a;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child, n) {\n            child.index = n;\n        });\n        this._requestDraw();\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        var caching = canvas && canvas.isCache;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedSceneCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawScene', canvas, top);\n        }\n        return this;\n    }\n    drawHit(can, top) {\n        if (!this.shouldDrawHit(top)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawHit', canvas, top);\n        }\n        return this;\n    }\n    _drawChildren(drawMethod, canvas, top) {\n        var _a;\n        var context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc;\n        const selfCache = top === this;\n        if (hasClip) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                var clipX = this.clipX();\n                var clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform.copy().invert().getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = !selfCache &&\n            this.globalCompositeOperation() !== 'source-over' &&\n            drawMethod === 'drawScene';\n        if (hasComposition) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            child[drawMethod](canvas, top);\n        });\n        if (hasComposition) {\n            context.restore();\n        }\n        if (hasClip) {\n            context.restore();\n        }\n    }\n    getClientRect(config) {\n        var _a;\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0,\n        };\n        var that = this;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke,\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    }\n}\nFactory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height',\n]);\nFactory.addGetterSetter(Container, 'clipX', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipY', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipWidth', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipHeight', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipFunc');\n","import { Konva } from './Global.js';\nconst Captures = new Map();\nconst SUPPORT_POINTER_EVENTS = Konva._global['PointerEvent'] !== undefined;\nexport function getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexport function createEvent(evt) {\n    return {\n        evt,\n        pointerId: evt.pointerId,\n    };\n}\nexport function hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexport function setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    const stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexport function releaseCapture(pointerId, target) {\n    const shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    const stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\n","import { Konva } from './Global.js';\nimport { Transform, Util } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator, getNumberOrAutoValidator, getStringValidator, getBooleanValidator, getStringOrGradientValidator, } from './Validators.js';\nimport { _registerNode } from './Global.js';\nimport * as PointerEvents from './PointerEvents.js';\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nlet dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexport const shapes = {};\nfunction _fillFunc(context) {\n    context.fill();\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nexport class Shape extends Node {\n    constructor(config) {\n        super(config);\n        let key;\n        while (true) {\n            key = Util.getRandomColor();\n            if (key && !(key in shapes)) {\n                break;\n            }\n        }\n        this.colorKey = key;\n        shapes[key] = this;\n    }\n    getContext() {\n        Util.warn('shape.getContext() method is deprecated. Please do not use it.');\n        return this.getLayer().getContext();\n    }\n    getCanvas() {\n        Util.warn('shape.getCanvas() method is deprecated. Please do not use it.');\n        return this.getLayer().getCanvas();\n    }\n    getSceneFunc() {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    }\n    getHitFunc() {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    }\n    hasShadow() {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    }\n    _hasShadow() {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    }\n    _getFillPattern() {\n        return this._getCache(patternImage, this.__getFillPattern);\n    }\n    __getFillPattern() {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            const pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            if (pattern && pattern.setTransform) {\n                const tr = new Transform();\n                tr.translate(this.fillPatternX(), this.fillPatternY());\n                tr.rotate(Konva.getAngle(this.fillPatternRotation()));\n                tr.scale(this.fillPatternScaleX(), this.fillPatternScaleY());\n                tr.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());\n                const m = tr.getMatrix();\n                pattern.setTransform({\n                    a: m[0],\n                    b: m[1],\n                    c: m[2],\n                    d: m[3],\n                    e: m[4],\n                    f: m[5],\n                });\n            }\n            return pattern;\n        }\n    }\n    _getLinearGradient() {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    }\n    __getLinearGradient() {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    _getRadialGradient() {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    }\n    __getRadialGradient() {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    getShadowRGBA() {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    }\n    _getShadowRGBA() {\n        if (this.hasShadow()) {\n            var rgba = Util.colorToRGBA(this.shadowColor());\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    }\n    hasFill() {\n        return this._calculate('hasFill', [\n            'fillEnabled',\n            'fill',\n            'fillPatternImage',\n            'fillLinearGradientColorStops',\n            'fillRadialGradientColorStops',\n        ], () => {\n            return (this.fillEnabled() &&\n                !!(this.fill() ||\n                    this.fillPatternImage() ||\n                    this.fillLinearGradientColorStops() ||\n                    this.fillRadialGradientColorStops()));\n        });\n    }\n    hasStroke() {\n        return this._calculate('hasStroke', [\n            'strokeEnabled',\n            'strokeWidth',\n            'stroke',\n            'strokeLinearGradientColorStops',\n        ], () => {\n            return (this.strokeEnabled() &&\n                this.strokeWidth() &&\n                !!(this.stroke() || this.strokeLinearGradientColorStops()));\n        });\n    }\n    hasHitStroke() {\n        const width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    }\n    intersects(point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas, null, true);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    }\n    destroy() {\n        Node.prototype.destroy.call(this);\n        delete shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    }\n    _useBufferCanvas(forceFill) {\n        var _a;\n        if (!this.getStage()) {\n            return false;\n        }\n        const perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;\n        if (!perfectDrawEnabled) {\n            return false;\n        }\n        const hasFill = forceFill || this.hasFill();\n        const hasStroke = this.hasStroke();\n        const isTransparent = this.getAbsoluteOpacity() !== 1;\n        if (hasFill && hasStroke && isTransparent) {\n            return true;\n        }\n        const hasShadow = this.hasShadow();\n        const strokeForShadow = this.shadowForStrokeEnabled();\n        if (hasFill && hasStroke && hasShadow && strokeForShadow) {\n            return true;\n        }\n        return false;\n    }\n    setStrokeHitEnabled(val) {\n        Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    }\n    getStrokeHitEnabled() {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    getSelfRect() {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height,\n        };\n    }\n    getClientRect(config = {}) {\n        const skipTransform = config.skipTransform;\n        const relativeTo = config.relativeTo;\n        const fillRect = this.getSelfRect();\n        const applyStroke = !config.skipStroke && this.hasStroke();\n        const strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        const fillAndStrokeWidth = fillRect.width + strokeWidth;\n        const fillAndStrokeHeight = fillRect.height + strokeWidth;\n        const applyShadow = !config.skipShadow && this.hasShadow();\n        const shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        const shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        const preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        const preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        const blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        const width = preWidth + blurRadius * 2;\n        const height = preHeight + blurRadius * 2;\n        let roundingOffset = 0;\n        if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n            roundingOffset = 1;\n        }\n        const rect = {\n            width: width + roundingOffset,\n            height: height + roundingOffset,\n            x: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y,\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.getSceneFunc(), hasShadow = this.hasShadow(), stage, bufferCanvas, bufferContext;\n        var skipBuffer = canvas.isCache;\n        var cachingSelf = top === this;\n        if (!this.isVisible() && !cachingSelf) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas() && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            context._applyOpacity(this);\n            context._applyGlobalCompositeOperation(this);\n            context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!cachingSelf) {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n            }\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            drawFunc.call(this, context, this);\n        }\n        context.restore();\n        return this;\n    }\n    drawHit(can, top, skipDragCheck = false) {\n        if (!this.shouldDrawHit(top, skipDragCheck)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        const selfCache = this === top;\n        if (!selfCache) {\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    }\n    drawHitFromCache(alphaThreshold = 0) {\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n}\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n_registerNode(Shape);\nShape.prototype.eventListeners = {};\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva', _clearFillPatternCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\nFactory.addGetterSetter(Shape, 'stroke', undefined, getStringOrGradientValidator());\nFactory.addGetterSetter(Shape, 'strokeWidth', 2, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillAfterStrokeEnabled', false);\nFactory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', getNumberOrAutoValidator());\nFactory.addGetterSetter(Shape, 'strokeHitEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'perfectDrawEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'lineJoin');\nFactory.addGetterSetter(Shape, 'lineCap');\nFactory.addGetterSetter(Shape, 'sceneFunc');\nFactory.addGetterSetter(Shape, 'hitFunc');\nFactory.addGetterSetter(Shape, 'dash');\nFactory.addGetterSetter(Shape, 'dashOffset', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowColor', undefined, getStringValidator());\nFactory.addGetterSetter(Shape, 'shadowBlur', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowOpacity', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'shadowOffsetX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowOffsetY', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternImage');\nFactory.addGetterSetter(Shape, 'fill', undefined, getStringOrGradientValidator());\nFactory.addGetterSetter(Shape, 'fillPatternX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternY', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'fillPatternScaleX', 1, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternScaleY', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc',\n});\n","import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { Node } from './Node.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { getBooleanValidator } from './Validators.js';\nimport { shapes } from './Shape.js';\nimport { _registerNode } from './Global.js';\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 },\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nexport class Layer extends Container {\n    constructor(config) {\n        super(config);\n        this.canvas = new SceneCanvas();\n        this.hitCanvas = new HitCanvas({\n            pixelRatio: 1,\n        });\n        this._waitingForDraw = false;\n        this.on('visibleChange.konva', this._checkVisibility);\n        this._checkVisibility();\n        this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n        this._setSmoothEnabled();\n    }\n    createPNGStream() {\n        const c = this.canvas._canvas;\n        return c.createPNGStream();\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    getNativeCanvasElement() {\n        return this.canvas._canvas;\n    }\n    getHitCanvas() {\n        return this.hitCanvas;\n    }\n    getContext() {\n        return this.getCanvas().getContext();\n    }\n    clear(bounds) {\n        this.getContext().clear(bounds);\n        this.getHitCanvas().getContext().clear(bounds);\n        return this;\n    }\n    setZIndex(index) {\n        super.setZIndex(index);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getNativeCanvasElement());\n            }\n        }\n        return this;\n    }\n    moveToTop() {\n        Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveUp() {\n        var moved = Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage || !stage.content) {\n            return false;\n        }\n        stage.content.removeChild(this.getNativeCanvasElement());\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveDown() {\n        if (Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    getLayer() {\n        return this;\n    }\n    remove() {\n        var _canvas = this.getNativeCanvasElement();\n        Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    }\n    getStage() {\n        return this.parent;\n    }\n    setSize({ width, height }) {\n        this.canvas.setSize(width, height);\n        this.hitCanvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    }\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to a layer.');\n        }\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node.prototype._toKonvaCanvas.call(this, config);\n    }\n    _checkVisibility() {\n        const visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    }\n    _setSmoothEnabled() {\n        this.getContext()._context.imageSmoothingEnabled =\n            this.imageSmoothingEnabled();\n    }\n    getWidth() {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    }\n    setWidth() {\n        Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    }\n    getHeight() {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    }\n    setHeight() {\n        Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    }\n    batchDraw() {\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util.requestAnimFrame(() => {\n                this.draw();\n                this._waitingForDraw = false;\n            });\n        }\n        return this;\n    }\n    getIntersection(pos) {\n        if (!this.isListening() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                const intersectionOffset = INTERSECTION_OFFSETS[i];\n                const obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance,\n                });\n                const shape = obj.shape;\n                if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    _getIntersection(pos) {\n        const ratio = this.hitCanvas.pixelRatio;\n        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n        const p3 = p[3];\n        if (p3 === 255) {\n            const colorKey = Util._rgbToHex(p[0], p[1], p[2]);\n            const shape = shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape,\n                };\n            }\n            return {\n                antialiased: true,\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true,\n            };\n        }\n        return {};\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this,\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this,\n        });\n        return this;\n    }\n    drawHit(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer.getHitCanvas().getContext().clear();\n        }\n        Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    }\n    enableHitGraph() {\n        this.hitGraphEnabled(true);\n        return this;\n    }\n    disableHitGraph() {\n        this.hitGraphEnabled(false);\n        return this;\n    }\n    setHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        this.listening(val);\n    }\n    getHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        return this.listening();\n    }\n    toggleHitCanvas() {\n        if (!this.parent || !this.parent['content']) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    }\n}\nLayer.prototype.nodeType = 'Layer';\n_registerNode(Layer);\nFactory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory.addGetterSetter(Layer, 'hitGraphEnabled', true, getBooleanValidator());\n","import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nexport default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { Util } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { Container } from './Container.js';\nimport { Konva } from './Global.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { DD } from './DragAndDrop.js';\nimport { _registerNode } from './Global.js';\nimport * as PointerEvents from './PointerEvents.js';\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', POINTEROUT = 'pointerout', POINTERLEAVE = 'pointerleave', POINTEROVER = 'pointerover', POINTERENTER = 'pointerenter', CONTEXTMENU = 'contextmenu', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TOUCHMOVE = 'touchmove', TOUCHCANCEL = 'touchcancel', WHEEL = 'wheel', MAX_LAYERS_NUMBER = 5, EVENTS = [\n    [MOUSEENTER, '_pointerenter'],\n    [MOUSEDOWN, '_pointerdown'],\n    [MOUSEMOVE, '_pointermove'],\n    [MOUSEUP, '_pointerup'],\n    [MOUSELEAVE, '_pointerleave'],\n    [TOUCHSTART, '_pointerdown'],\n    [TOUCHMOVE, '_pointermove'],\n    [TOUCHEND, '_pointerup'],\n    [TOUCHCANCEL, '_pointercancel'],\n    [MOUSEOVER, '_pointerover'],\n    [WHEEL, '_wheel'],\n    [CONTEXTMENU, '_contextmenu'],\n    [POINTERDOWN, '_pointerdown'],\n    [POINTERMOVE, '_pointermove'],\n    [POINTERUP, '_pointerup'],\n    [POINTERCANCEL, '_pointercancel'],\n    [LOSTPOINTERCAPTURE, '_lostpointercapture'],\n];\nconst EVENTS_MAP = {\n    mouse: {\n        [POINTEROUT]: MOUSEOUT,\n        [POINTERLEAVE]: MOUSELEAVE,\n        [POINTEROVER]: MOUSEOVER,\n        [POINTERENTER]: MOUSEENTER,\n        [POINTERMOVE]: MOUSEMOVE,\n        [POINTERDOWN]: MOUSEDOWN,\n        [POINTERUP]: MOUSEUP,\n        [POINTERCANCEL]: 'mousecancel',\n        pointerclick: 'click',\n        pointerdblclick: 'dblclick',\n    },\n    touch: {\n        [POINTEROUT]: 'touchout',\n        [POINTERLEAVE]: 'touchleave',\n        [POINTEROVER]: 'touchover',\n        [POINTERENTER]: 'touchenter',\n        [POINTERMOVE]: TOUCHMOVE,\n        [POINTERDOWN]: TOUCHSTART,\n        [POINTERUP]: TOUCHEND,\n        [POINTERCANCEL]: TOUCHCANCEL,\n        pointerclick: 'tap',\n        pointerdblclick: 'dbltap',\n    },\n    pointer: {\n        [POINTEROUT]: POINTEROUT,\n        [POINTERLEAVE]: POINTERLEAVE,\n        [POINTEROVER]: POINTEROVER,\n        [POINTERENTER]: POINTERENTER,\n        [POINTERMOVE]: POINTERMOVE,\n        [POINTERDOWN]: POINTERDOWN,\n        [POINTERUP]: POINTERUP,\n        [POINTERCANCEL]: POINTERCANCEL,\n        pointerclick: 'pointerclick',\n        pointerdblclick: 'pointerdblclick',\n    },\n};\nconst getEventType = (type) => {\n    if (type.indexOf('pointer') >= 0) {\n        return 'pointer';\n    }\n    if (type.indexOf('touch') >= 0) {\n        return 'touch';\n    }\n    return 'mouse';\n};\nconst getEventsMap = (eventType) => {\n    const type = getEventType(eventType);\n    if (type === 'pointer') {\n        return Konva.pointerEventsEnabled && EVENTS_MAP.pointer;\n    }\n    if (type === 'touch') {\n        return EVENTS_MAP.touch;\n    }\n    if (type === 'mouse') {\n        return EVENTS_MAP.mouse;\n    }\n};\nfunction checkNoClip(attrs = {}) {\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nconst NO_POINTERS_MESSAGE = `Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);`;\nexport const stages = [];\nexport class Stage extends Container {\n    constructor(config) {\n        super(checkNoClip(config));\n        this._pointerPositions = [];\n        this._changedPointerPositions = [];\n        this._buildDOM();\n        this._bindContentEvents();\n        stages.push(this);\n        this.on('widthChange.konva heightChange.konva', this._resizeDOM);\n        this.on('visibleChange.konva', this._checkVisibility);\n        this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', () => {\n            checkNoClip(this.attrs);\n        });\n        this._checkVisibility();\n    }\n    _validateAdd(child) {\n        const isLayer = child.getType() === 'Layer';\n        const isFastLayer = child.getType() === 'FastLayer';\n        const valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util.throw('You may only add layers to the stage.');\n        }\n    }\n    _checkVisibility() {\n        if (!this.content) {\n            return;\n        }\n        const style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    }\n    setContainer(container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr('container', container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    }\n    shouldDrawHit() {\n        return true;\n    }\n    clear() {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    }\n    clone(obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container =\n            typeof document !== 'undefined' && document.createElement('div');\n        return Container.prototype.clone.call(this, obj);\n    }\n    destroy() {\n        super.destroy();\n        var content = this.content;\n        if (content && Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = stages.indexOf(this);\n        if (index > -1) {\n            stages.splice(index, 1);\n        }\n        return this;\n    }\n    getPointerPosition() {\n        const pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y,\n        };\n    }\n    _getPointerById(id) {\n        return this._pointerPositions.find((p) => p.id === id);\n    }\n    getPointersPositions() {\n        return this._pointerPositions;\n    }\n    getStage() {\n        return this;\n    }\n    getContent() {\n        return this.content;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.x = config.x || 0;\n        config.y = config.y || 0;\n        config.width = config.width || this.width();\n        config.height = config.height || this.height();\n        var canvas = new SceneCanvas({\n            width: config.width,\n            height: config.height,\n            pixelRatio: config.pixelRatio || 1,\n        });\n        var _context = canvas.getContext()._context;\n        var layers = this.children;\n        if (config.x || config.y) {\n            _context.translate(-1 * config.x, -1 * config.y);\n        }\n        layers.forEach(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    }\n    getIntersection(pos) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n;\n        for (n = end; n >= 0; n--) {\n            const shape = layers[n].getIntersection(pos);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    }\n    _resizeDOM() {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.forEach((layer) => {\n            layer.setSize({ width, height });\n            layer.draw();\n        });\n    }\n    add(layer, ...rest) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        super.add(layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    }\n    getParent() {\n        return null;\n    }\n    getLayer() {\n        return null;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n    getLayers() {\n        return this.children;\n    }\n    _bindContentEvents() {\n        if (!Konva.isBrowser) {\n            return;\n        }\n        EVENTS.forEach(([event, methodName]) => {\n            this.content.addEventListener(event, (evt) => {\n                this[methodName](evt);\n            });\n        });\n    }\n    _pointerenter(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerenter, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _pointerover(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerover, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _getTargetShape(evenType) {\n        let shape = this[evenType + 'targetShape'];\n        if (shape && !shape.getStage()) {\n            shape = null;\n        }\n        return shape;\n    }\n    _pointerleave(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var targetShape = this._getTargetShape(eventType);\n        var eventsEnabled = !DD.isDragging || Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(events.pointerout, { evt: evt });\n            targetShape._fireAndBubble(events.pointerleave, { evt: evt });\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this[eventType + 'targetShape'] = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this._fire(events.pointerout, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n    }\n    _pointerdown(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            var shape = this.getIntersection(pos);\n            DD.justDragged = false;\n            Konva['_' + eventType + 'ListenClick'] = true;\n            const hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Konva.capturePointerEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            this[eventType + 'ClickStartShape'] = shape;\n            shape._fireAndBubble(events.pointerdown, {\n                evt: evt,\n                pointerId: pos.id,\n            });\n            triggeredOnShape = true;\n            const isTouch = evt.type.indexOf('touch') >= 0;\n            if (shape.preventDefault() && evt.cancelable && isTouch) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerdown, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._pointerPositions[0].id,\n            });\n        }\n    }\n    _pointermove(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        if (DD.isDragging && DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DD.isDragging || Konva.hitOnDragEnabled;\n        if (!eventsEnabled) {\n            return;\n        }\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        var targetShape = this._getTargetShape(eventType);\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            var differentTarget = targetShape !== shape;\n            if (differentTarget && targetShape) {\n                targetShape._fireAndBubble(events.pointerout, event, shape);\n                targetShape._fireAndBubble(events.pointerleave, event, shape);\n            }\n            if (shape) {\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                if (differentTarget) {\n                    shape._fireAndBubble(events.pointerover, event, targetShape);\n                    shape._fireAndBubble(events.pointerenter, event, targetShape);\n                    this[eventType + 'targetShape'] = shape;\n                }\n                shape._fireAndBubble(events.pointermove, event);\n            }\n            else {\n                if (targetShape) {\n                    this._fire(events.pointerover, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                    this[eventType + 'targetShape'] = null;\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointermove, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n    }\n    _pointerup(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        const clickStartShape = this[eventType + 'ClickStartShape'];\n        const clickEndShape = this[eventType + 'ClickEndShape'];\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            if (shape) {\n                shape.releaseCapture(pos.id);\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            let fireDblClick = false;\n            if (Konva['_' + eventType + 'InDblClickWindow']) {\n                fireDblClick = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            else if (!DD.justDragged) {\n                Konva['_' + eventType + 'InDblClickWindow'] = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            this[eventType + 'DblTimeout'] = setTimeout(function () {\n                Konva['_' + eventType + 'InDblClickWindow'] = false;\n            }, Konva.dblClickWindow);\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                this[eventType + 'ClickEndShape'] = shape;\n                shape._fireAndBubble(events.pointerup, event);\n                if (Konva['_' + eventType + 'ListenClick'] &&\n                    clickStartShape &&\n                    clickStartShape === shape) {\n                    shape._fireAndBubble(events.pointerclick, event);\n                    if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                        shape._fireAndBubble(events.pointerdblclick, event);\n                    }\n                }\n            }\n            else {\n                this[eventType + 'ClickEndShape'] = null;\n                if (Konva['_' + eventType + 'ListenClick']) {\n                    this._fire(events.pointerclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n                if (fireDblClick) {\n                    this._fire(events.pointerdblclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerup, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n        Konva['_' + eventType + 'ListenClick'] = false;\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    }\n    _contextmenu(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _wheel(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _pointercancel(evt) {\n        this.setPointersPositions(evt);\n        const shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    _lostpointercapture(evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    setPointersPositions(evt) {\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Array.prototype.forEach.call(evt.touches, (touch) => {\n                this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n            Array.prototype.forEach.call(evt.changedTouches || evt.touches, (touch) => {\n                this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y,\n            };\n            this._pointerPositions = [{ x, y, id: Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x, y, id: Util._getFirstPointerId(evt) },\n            ];\n        }\n    }\n    _setPointerPosition(evt) {\n        Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    }\n    _getContentPosition() {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1,\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1,\n        };\n    }\n    _buildDOM() {\n        this.bufferCanvas = new SceneCanvas({\n            width: this.width(),\n            height: this.height(),\n        });\n        this.bufferHitCanvas = new HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height(),\n        });\n        if (!Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = '';\n        this.content = document.createElement('div');\n        this.content.style.position = 'relative';\n        this.content.style.userSelect = 'none';\n        this.content.className = 'konvajs-content';\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    }\n    cache() {\n        Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    }\n    clearCache() {\n        return this;\n    }\n    batchDraw() {\n        this.getChildren().forEach(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    }\n}\nStage.prototype.nodeType = STAGE;\n_registerNode(Stage);\nFactory.addGetterSetter(Stage, 'container');\n","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","// 26.1.11 Reflect.ownKeys(target)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', { ownKeys: require('./_own-keys') });\n","require('../../modules/es6.reflect.own-keys');\nmodule.exports = require('../../modules/_core').Reflect.ownKeys;\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import { initialState, viewportState } from \"./state/viewport-state\";\nimport Transform from \"./transform\";\nexport const transform = new Transform();\n\nconst applyTransform = () => {\n  const { scale, rotate, flip, width, height, x, y, rootWidth, rootHeight } = viewportState;\n\n  transform.reset();\n\n  if (x || y) {\n    transform.translate(x, y);\n  }\n\n  transform.translate(rootWidth / 2, rootHeight / 2);\n\n  if (flip) {\n    const { h = false, v = false } = flip;\n    const fv = v ? -1 : 1;\n    const fh = h ? -1 : 1;\n    transform.scale(fh, fv);\n  }\n\n  if (!!scale) {\n    transform.scale(scale, scale);\n  }\n\n  if (!!rotate) {\n    transform.rotate(rotate);\n  }\n\n  transform.translate(-width / 2, -height / 2);\n\n  return transform.m;\n};\n\nexport const verify = (x, y) => {\n  const [ox, oy] = transform.invertPoint(x, y);\n  const { width, height } = viewportState;\n  return ox >= 0 && ox <= width && oy >= 0 && oy <= height;\n};\n\nclass Area {\n  constructor(config = {}) {\n    if (Reflect.ownKeys(config).length) {\n      this.update(config);\n    }\n  }\n\n  update(config) {\n    const { rootSize, scale, rotate, width, height, position = [0, 0], offset, flip } = config;\n\n    // 设置视窗\n    Object.assign(viewportState, { rootWidth: rootSize?.width, rootHeight: rootSize?.height } ?? {});\n    Object.assign(viewportState, { x: offset.x, y: offset.y } ?? {});\n    Object.assign(viewportState, { scale } ?? {});\n    Object.assign(viewportState, { rotate } ?? {});\n    Object.assign(viewportState, { width } ?? {});\n    Object.assign(viewportState, { height } ?? {});\n    Object.assign(viewportState, { centerX: width / 2, centerY: height / 2 } ?? {});\n    Object.assign(viewportState, { position } ?? {});\n    Object.assign(viewportState, { flip } ?? {});\n\n    if (!Object.keys(initialState).length) {\n      Object.assign(initialState, viewportState);\n    }\n\n    // 初始化时缩放和reander同时触发，判断是否有transform所需数据\n    rootSize && applyTransform();\n  }\n}\n\nexport default Area;\n","import { mat3 } from \"gl-matrix\";\nclass Transform {\n  constructor() {\n    this.m = [1, 0, 0, 1, 0, 0];\n  }\n\n  reset() {\n    this.m = [1, 0, 0, 1, 0, 0];\n  }\n\n  clone() {\n    return [...this.m];\n  }\n\n  translate(x, y) {\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[3] * y + this.m[1] * x;\n  }\n\n  scale(rx, ry) {\n    this.m[0] *= rx;\n    this.m[3] *= ry;\n    this.m[1] *= rx;\n    this.m[2] *= ry;\n  }\n\n  rotate(deg) {\n    const cosθ = Math.cos((deg * Math.PI) / 180);\n    const sinθ = Math.sin((deg * Math.PI) / 180);\n    let tmp0 = this.m[0] * cosθ + this.m[2] * sinθ;\n    let tmp1 = this.m[1] * cosθ + this.m[3] * sinθ;\n    let tmp2 = this.m[0] * -sinθ + this.m[2] * cosθ;\n    let tmp3 = this.m[1] * -sinθ + this.m[3] * cosθ;\n\n    this.m[0] = tmp0;\n    this.m[1] = tmp1;\n    this.m[2] = tmp2;\n    this.m[3] = tmp3;\n  }\n\n  invert() {\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[0] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n  }\n\n  transformPoint(ox, oy) {\n    const cx = ox * this.m[0] + oy * this.m[2] + this.m[4];\n    const cy = oy * this.m[3] + ox * this.m[1] + this.m[5];\n    return [cx, cy];\n  }\n\n  invertPoint(cx, cy) {\n    const { m } = this;\n    const source = mat3.fromValues(m[0], m[2], m[4], m[1], m[3], m[5], 0, 0, 1);\n    const result = mat3.invert(mat3.create(), source);\n    const ox = cx * result[0] + cy * result[1] + result[2];\n    const oy = cx * result[3] + cy * result[4] + result[5];\n    return [ox, oy];\n  }\n}\n\nexport default Transform;\n","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP = require('./_object-dp');\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar createDesc = require('./_property-desc');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\n\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDesc = gOPD.f(anObject(target), propertyKey);\n  var existingDescriptor, proto;\n  if (!ownDesc) {\n    if (isObject(proto = getPrototypeOf(target))) {\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if (has(ownDesc, 'value')) {\n    if (ownDesc.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = gOPD.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      dP.f(receiver, propertyKey, existingDescriptor);\n    } else dP.f(receiver, propertyKey, createDesc(0, V));\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', { set: set });\n","require('../../modules/es6.reflect.set');\nmodule.exports = require('../../modules/_core').Reflect.set;\n","import _Reflect$set from \"@babel/runtime-corejs2/core-js/reflect/set\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport superPropBase from \"./superPropBase.js\";\nimport defineProperty from \"./defineProperty.js\";\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && _Reflect$set) {\n    set = _Reflect$set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = superPropBase(target, property);\n      var desc;\n\n      if (base) {\n        desc = _Object$getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = _Object$getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n\n        _Object$defineProperty(receiver, property, desc);\n      } else {\n        defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nexport default function _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator, getNumberArrayValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nfunction getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n}\nfunction expandPoints(p, tension) {\n    var len = p.length, allPoints = [], n, cp;\n    for (n = 2; n < len - 2; n += 2) {\n        cp = getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n        if (isNaN(cp[0])) {\n            continue;\n        }\n        allPoints.push(cp[0]);\n        allPoints.push(cp[1]);\n        allPoints.push(p[n]);\n        allPoints.push(p[n + 1]);\n        allPoints.push(cp[2]);\n        allPoints.push(cp[3]);\n    }\n    return allPoints;\n}\nexport class Line extends Shape {\n    constructor(config) {\n        super(config);\n        this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n    }\n    _sceneFunc(context) {\n        var points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;\n        if (!length) {\n            return;\n        }\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            tp = this.getTensionPoints();\n            len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    }\n    getTensionPoints() {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    }\n    _getTensionPoints() {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return expandPoints(this.points(), this.tension());\n        }\n    }\n    _getTensionPointsClosed() {\n        var p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1],\n        ]);\n        return tp;\n    }\n    getWidth() {\n        return this.getSelfRect().width;\n    }\n    getHeight() {\n        return this.getSelfRect().height;\n    }\n    getSelfRect() {\n        var points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (this.tension() !== 0) {\n            points = [\n                points[0],\n                points[1],\n                ...this._getTensionPoints(),\n                points[points.length - 2],\n                points[points.length - 1],\n            ];\n        }\n        else {\n            points = this.points();\n        }\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n}\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n_registerNode(Line);\nFactory.addGetterSetter(Line, 'closed', false);\nFactory.addGetterSetter(Line, 'bezier', false);\nFactory.addGetterSetter(Line, 'tension', 0, getNumberValidator());\nFactory.addGetterSetter(Line, 'points', [], getNumberArrayValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Circle extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    }\n    setHeight(height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    }\n}\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n_registerNode(Circle);\nFactory.addGetterSetter(Circle, 'radius', 0, getNumberValidator());\n","import { Circle } from \"konva/lib/shapes/Circle\";\nimport { TOOL_COLORS, TOOL_CONSTANTS, TOOL_ITEM_SELECTOR } from \"./../../constants\";\n\nclass Anchor extends Circle {\n  constructor(config = {}) {\n    super(config);\n\n    this.fill(\"rgba(0,0,0,0.1)\");\n    this.stroke(TOOL_COLORS.NORMAL[TOOL_ITEM_SELECTOR.ANCHOR]);\n    this.strokeWidth(2);\n    this.radius(7);\n    this.hitStrokeWidth(TOOL_CONSTANTS.ANCHOR_HIT_STROKE_WIDTH);\n    this.draggable(true);\n    this.name(TOOL_ITEM_SELECTOR.ANCHOR);\n  }\n}\n\nexport default Anchor;\n","import { Line } from \"konva/lib/shapes/Line\";\nimport { TOOL_COLORS, TOOL_ITEM_SELECTOR } from \"./../../constants\";\n\nclass DashLine extends Line {\n  constructor(config = {}) {\n    super(config);\n\n    this.stroke(TOOL_COLORS.NORMAL[TOOL_ITEM_SELECTOR.DASHLINE]);\n    this.strokeWidth(2);\n    this.lineJoin(\"round\");\n    this.dash([6, 3]);\n    this.name(TOOL_ITEM_SELECTOR.DASHLINE);\n  }\n}\n\nexport default DashLine;\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator, getStringValidator, getNumberOrAutoValidator, getBooleanValidator, } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport function stringToArray(string) {\n    return Array.from(string);\n}\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '…', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing',\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nfunction normalizeFontFamily(fontFamily) {\n    return fontFamily\n        .split(',')\n        .map((family) => {\n        family = family.trim();\n        const hasSpace = family.indexOf(' ') >= 0;\n        const hasQuotes = family.indexOf('\"') >= 0 || family.indexOf(\"'\") >= 0;\n        if (hasSpace && !hasQuotes) {\n            family = `\"${family}\"`;\n        }\n        return family;\n    })\n        .join(', ');\n}\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nexport class Text extends Shape {\n    constructor(config) {\n        super(checkDefaultFill(config));\n        this._partialTextX = 0;\n        this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, this._setTextData);\n        }\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        var textArr = this.textArr, textArrLen = textArr.length;\n        if (!this.text()) {\n            return;\n        }\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = n !== textArrLen - 1, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                var array = stringToArray(text);\n                for (var li = 0; li < array.length; li++) {\n                    var letter = array[li];\n                    if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n                        lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX += this.measureSize(letter).width + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    }\n    _hitFunc(context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    setText(text) {\n        var str = Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    }\n    getWidth() {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    }\n    getHeight() {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    measureSize(text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize,\n        };\n    }\n    _getContextFont() {\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            (this.fontSize() + PX_SPACE) +\n            normalizeFontFamily(this.fontFamily()));\n    }\n    _addTextLine(line) {\n        if (this.align() === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({ text: line, width: width });\n    }\n    _getTextWidth(text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    }\n    _setTextData() {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis();\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr;\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        if (!shouldWrap ||\n                            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\n                            var lastLine = this.textArr[this.textArr.length - 1];\n                            if (lastLine) {\n                                if (shouldAddEllipsis) {\n                                    var haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;\n                                    if (!haveSpace) {\n                                        lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);\n                                    }\n                                    this.textArr.splice(this.textArr.length - 1, 1);\n                                    this._addTextLine(lastLine.text + ELLIPSIS);\n                                }\n                            }\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    }\n    getStrokeScaleEnabled() {\n        return true;\n    }\n}\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight',\n    'letterSpacing',\n];\n_registerNode(Text);\nFactory.overWriteSetter(Text, 'width', getNumberOrAutoValidator());\nFactory.overWriteSetter(Text, 'height', getNumberOrAutoValidator());\nFactory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory.addGetterSetter(Text, 'fontSize', 12, getNumberValidator());\nFactory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory.addGetterSetter(Text, 'padding', 0, getNumberValidator());\nFactory.addGetterSetter(Text, 'align', LEFT);\nFactory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory.addGetterSetter(Text, 'lineHeight', 1, getNumberValidator());\nFactory.addGetterSetter(Text, 'wrap', WORD);\nFactory.addGetterSetter(Text, 'ellipsis', false, getBooleanValidator());\nFactory.addGetterSetter(Text, 'letterSpacing', 0, getNumberValidator());\nFactory.addGetterSetter(Text, 'text', '', getStringValidator());\nFactory.addGetterSetter(Text, 'textDecoration', '');\n","import { Text } from \"konva/lib/shapes/Text\";\nimport { TOOL_COLORS, TOOL_ITEM_SELECTOR } from \"../../constants\";\n\nconst SHADOW = {\n  shadowColor: \"#000000\",\n  shadowBlur: 1,\n  shadowOffsetX: 1,\n  shadowOffsetY: 1,\n  shadowOpacity: 0.8,\n  cornerRadius: 10,\n};\n\nclass TextField extends Text {\n  constructor(config = {}) {\n    super(Object.assign({}, SHADOW, config));\n    this.fontSize(15);\n    this.align(\"center\");\n    this.name(TOOL_ITEM_SELECTOR.LABEL);\n    this.fill(TOOL_COLORS.NORMAL[`.${TOOL_ITEM_SELECTOR.LABEL}`]);\n    this.draggable(true);\n  }\n}\n\nexport default TextField;\n","import { TOOL_CONSTRUCTOR } from \"../constructor\";\n\nconst completeState = {\n  isComplete: true,\n  button: 1,\n};\n\nexport const setActionComplete = (val) => {\n  completeState.isComplete = val;\n};\n\nclass ToolState {\n  constructor() {\n    // 左中右键绑定的工具集, 绑定的是枚举值\n    this.state = {\n      1: null,\n      2: null,\n      3: null,\n      // 鼠标中键滚轮行为\n      4: null,\n    };\n    this.toolInstance = {};\n  }\n\n  updateState(toolType, button = 1) {\n    if (!Reflect.ownKeys(this.state).includes(`${button}`)) {\n      console.warn(`unsupported button,${button}. should be [1,2,3].`);\n      return;\n    }\n\n    this.state[button] = toolType;\n  }\n\n  getToolType(button) {\n    return this.state?.[button];\n  }\n\n  getToolInstance(button, needInitial = false) {\n    if (completeState.isComplete) {\n      const toolType = this.state?.[button];\n      if (!toolType) {\n        return;\n      }\n\n      if (needInitial) {\n        this.toolInstance[button] = new TOOL_CONSTRUCTOR[toolType]();\n        this.toolInstance[button].$stage = this.$stage;\n        completeState.button = button;\n      }\n\n      return this.toolInstance[button];\n    } else {\n      // 绘制未完成，继续上次工具操作\n      if (button === completeState.button) {\n        return this.toolInstance[button];\n      }\n      if (button !== 0) {\n        // 未完成且更换按键，强制结束\n        setActionComplete(true);\n        this.toolInstance[completeState.button].mouseUp();\n      }\n      return this.toolInstance[completeState.button];\n    }\n  }\n}\n\nexport default ToolState;\n","import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { _registerNode } from './Global.js';\nexport class Group extends Container {\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to groups.');\n        }\n    }\n}\nGroup.prototype.nodeType = 'Group';\n_registerNode(Group);\n","export const SELECTOR_ENUM = {\n  ANCHOR: \".node-anchor\",\n  ITEM: \".node-item\",\n  DASHLINE: \".node-dashline\",\n  LABEL: \".node-label\",\n};\n\nimport { Node } from \"konva/lib/Node\";\nimport { TOOL_COLORS } from \"../../constants\";\nimport UIComponent from \"../../shape/parts/ui-component\";\nexport const activeUtil = {\n  on: (shape) => {\n    let selector = \".node-anchor\";\n    shape.find(selector).forEach((item) => {\n      /** @type {Node} */\n      item.stroke(TOOL_COLORS.HOVER?.[selector] ?? TOOL_COLORS.HOVER[\"default-color\"]);\n      item.show();\n      const numChildren = item.getParent().getChildren().length - 1;\n      item.zIndex(numChildren);\n    });\n\n    selector = \".node-item\";\n    shape.find(selector).forEach((item) => {\n      item.stroke(TOOL_COLORS.HOVER?.[selector] ?? TOOL_COLORS.HOVER[\"default-color\"]);\n    });\n\n    selector = \".node-dashline\";\n    shape.find(selector).forEach((item) => {\n      item.stroke(TOOL_COLORS.HOVER?.[selector] ?? TOOL_COLORS.HOVER[\"default-color\"]);\n    });\n\n    selector = \".node-label\";\n    shape.find(selector).forEach((item) => {\n      item.fill(TOOL_COLORS.HOVER?.[selector] ?? TOOL_COLORS.HOVER[\"default-color\"]);\n    });\n  },\n  off: (shape) => {\n    let selector = \".node-anchor\";\n    shape.find(selector).forEach((item) => {\n      /** @type {Node} */\n      item.stroke(TOOL_COLORS.NORMAL?.[selector] ?? TOOL_COLORS.NORMAL[\"default-color\"]);\n      item.hide();\n    });\n\n    selector = \".node-item\";\n    shape.find(selector).forEach((item) => {\n      item.stroke(TOOL_COLORS.NORMAL?.[selector] ?? TOOL_COLORS.NORMAL[\"default-color\"]);\n    });\n\n    selector = \".node-dashline\";\n    shape.find(selector).forEach((item) => {\n      item.stroke(TOOL_COLORS.NORMAL?.[selector] ?? TOOL_COLORS.NORMAL[\"default-color\"]);\n    });\n\n    selector = \".node-label\";\n    shape.find(selector).forEach((item) => {\n      item.fill(TOOL_COLORS.NORMAL?.[selector] ?? TOOL_COLORS.NORMAL[\"default-color\"]);\n    });\n  },\n};\n\n/**\n * @param { UIComponent } ctx\n * @param { string } cursor\n */\nexport const cursor = (ctx, cursor = \"auto\") => {\n  const stage = ctx.getStage();\n  if (stage) {\n    stage.container().style.cursor = cursor || \"auto\";\n  }\n};\n\n/**\n * 计算图像内的绝对位置\n * 参考： https://konvajs.org/docs/sandbox/Relative_Pointer_Position.html\n *\n * @export\n * @param { Node } node\n * @returns\n */\nexport function getRelativePointerPosition(node, round = false) {\n  // the function will return pointer position relative to the passed node\n  var transform = node.getAbsoluteTransform().copy();\n  // to detect relative position we need to invert transform\n  transform.invert();\n\n  // get pointer (say mouse or touch) position\n  var pos = node.getStage().getPointerPosition();\n\n  // now we find relative point\n  if (round === false) {\n    transform.point(pos);\n  }\n\n  const { x, y } = transform.point(pos);\n  return { x: ~~x, y: ~~y };\n}\n\nexport const toCT = (pixelData, slope, intercept) => {\n  return pixelData.map((value) => value * slope + intercept);\n};\n\nexport const connectTextNode = (node, from, dashLine) => {\n  const text = node;\n  // 求出textNode的 左中、上中、右中、下中 的4个位置\n  const a = [text.x(), text.y() + text.height() / 2];\n  const b = [text.x() + text.width() / 2, text.y()];\n  const c = [text.x() + text.width(), text.y() + text.height() / 2];\n  const d = [text.x() + text.width() / 2, text.y() + text.height()];\n\n  const to = [a, b, c, d];\n\n  let min = Number.MAX_SAFE_INTEGER;\n  let formPoint = null;\n  let toPoint = null;\n\n  const getDistance = (a, b) => {\n    return ((b[0] - a[0]) ** 2 + (b[1] - a[1]) ** 2) ** 0.5;\n  };\n  // 锚点也text的四边进行距离比对，求出最短路径对应的点\n  for (let i = 0; i < from.length; i += 1) {\n    for (let j = 0; j < to.length; j += 1) {\n      const distance = getDistance(from[i], to[j]);\n      if (distance < min) {\n        formPoint = from[i];\n        toPoint = to[j];\n        min = distance;\n      }\n    }\n  }\n\n  // 定义虚线的点\n  dashLine.points([formPoint[0], formPoint[1], toPoint[0], toPoint[1]]);\n  dashLine.show();\n};\n\nexport const randomId = () => {\n  return Math.random().toString(36).substring(2);\n};\n","import { Group } from \"konva/lib/Group\";\nimport { activeUtil, cursor } from \"../../tools/utils/index\";\n\nclass UIComponent extends Group {\n  constructor(config = {}) {\n    super(config);\n\n    if (config.useDefaultMouseEffect ?? true) {\n      // 绑定鼠标交互样式与外观样式。\n      this._bindMouseEffect();\n    }\n  }\n\n  _bindMouseEffect() {\n    let dragging = false;\n    this.on(\"mouseover\", (evt) => {\n      cursor(this, \"grab\");\n      activeUtil.on(this);\n    });\n    this.on(\"mousedown\", (evt) => {\n      cursor(this, \"grabbing\");\n      dragging = true;\n    });\n    this.on(\"mouseout mouseleave\", (evt) => {\n      if (dragging) {\n        return;\n      }\n      cursor(this);\n      activeUtil.off(this);\n    });\n    this.on(\"dragend mouseup\", (evt) => {\n      cursor(this, \"grab\");\n      dragging = false;\n    });\n  }\n}\n\nexport default UIComponent;\n","import UIComponent from \"../../shape/parts/ui-component\";\nimport { activeUtil } from \"../utils\";\n\nclass BaseTool extends UIComponent {\n  constructor(config = {}) {\n    super(config);\n    this._data = null;\n    this.UIInitialed = false;\n  }\n\n  initialUI() {}\n  verifyDataLegal() {}\n  convertLocalCoords(data) {}\n  renderData() {}\n\n  mouseEnter(e) {}\n  mouseLeave(e) {}\n  mouseOver(e) {}\n  mouseOut(e) {}\n  mouseMove(e) {}\n  mouseDown(e) {}\n  mouseUp(e) {}\n  mouseClick(e) {}\n  mouseRightClick(e) {}\n  mouseDoubleClick(e) {}\n  mouseWheel(e) {}\n  mouseWheelClick(e) {}\n  documentMouseMove(e) {}\n  documentMouseUp(e) {}\n\n  set data(val) {\n    this._data = val;\n    this.careStageEvent = false;\n    if (!this.UIInitialed) {\n      this.initialUI();\n      activeUtil.off(this);\n    }\n    this.renderData();\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  setData(val) {\n    this._data = val;\n  }\n}\n\nexport default BaseTool;\n","import { setActionComplete } from \"../../state/tool-state\";\nimport BaseTool from \"./base-tool\";\n\nclass BaseAnnotationTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n    this.careStageEvent = true;\n  }\n\n  dragAnchor(evt) {\n    // implements by subclass.\n    this.careStageEvent = false;\n  }\n\n  dragAnchorEnd(evt) {\n    // implements by subclass.\n  }\n\n  dragText(evt) {\n    // implements by subclass.\n    this.careStageEvent = false;\n  }\n\n  drag(evt) {\n    // implements by subclass.\n    this.careStageEvent = false;\n  }\n\n  dragEnd(evt) {\n    this.careStageEvent = false;\n  }\n\n  mouseWheel(evt) {\n    super.mouseWheel(evt);\n    this.mouseUp(evt);\n    setActionComplete(true);\n  }\n}\n\nexport default BaseAnnotationTool;\n","import { transform as coord } from \"../../area\";\nconst length = (data) => {\n  const obj = JSON.parse(JSON.stringify(data));\n  const position = coord.transformPoint(data.position.x, data.position.y);\n  const start = coord.transformPoint(data.position.x + data.start.x, data.position.y + data.start.y);\n  const end = coord.transformPoint(data.position.x + data.end.x, data.position.y + data.end.y);\n\n  const textPoint = coord.transformPoint(data.position.x + data.textBox.x, data.position.y + data.textBox.y);\n\n  obj.position.x = position[0];\n  obj.position.y = position[1];\n  obj.end.x = end[0] - position[0];\n  obj.end.y = end[1] - position[1];\n  obj.start.x = start[0] - position[0];\n  obj.start.y = start[1] - position[1];\n  obj.textBox.x = textPoint[0] - position[0];\n  obj.textBox.y = textPoint[1] - position[1];\n  return obj;\n};\n\nconst angle = (data) => {\n  const obj = JSON.parse(JSON.stringify(data));\n  const position = coord.transformPoint(data.position.x, data.position.y);\n  const start = coord.transformPoint(data.position.x + data.start.x, data.position.y + data.start.y);\n  const middle = coord.transformPoint(data.position.x + data.middle.x, data.position.y + data.middle.y);\n  const end = coord.transformPoint(data.position.x + data.end.x, data.position.y + data.end.y);\n  const text = coord.transformPoint(data.position.x + data.textBox.x, data.position.y + data.textBox.y);\n\n  obj.position.x = position[0];\n  obj.position.y = position[1];\n  obj.start.x = start[0] - position[0];\n  obj.start.y = start[1] - position[1];\n  obj.middle.x = middle[0] - position[0];\n  obj.middle.y = middle[1] - position[1];\n  obj.end.x = end[0] - position[0];\n  obj.end.y = end[1] - position[1];\n  obj.textBox.x = text[0] - position[0];\n  obj.textBox.y = text[1] - position[1];\n  return obj;\n};\n\nconst ellipse_roi = (data) => {\n  const obj = JSON.parse(JSON.stringify(data));\n  const position = coord.transformPoint(data.position.x, data.position.y);\n  const start = coord.transformPoint(data.position.x + data.start.x, data.position.y + data.start.y);\n  const end = coord.transformPoint(data.position.x + data.end.x, data.position.y + data.end.y);\n  const text = coord.transformPoint(data.position.x + data.textBox.x, data.position.y + data.textBox.y);\n\n  obj.position.x = position[0];\n  obj.position.y = position[1];\n  obj.end.x = end[0] - position[0];\n  obj.end.y = end[1] - position[1];\n  obj.start.x = start[0] - position[0];\n  obj.start.y = start[1] - position[1];\n  obj.textBox.x = text[0] - position[0];\n  obj.textBox.y = text[1] - position[1];\n  return obj;\n};\n\nconst fnList = { length, angle, ellipse_roi };\nexport const transform = (data) => {\n  const { type } = data;\n  return fnList?.[type](data);\n};\n\nexport const localToWorld = (x, y) => {\n  return coord.transformPoint(x, y);\n};\n\nexport const worldToLocal = (x, y) => {\n  return coord.invertPoint(x, y);\n};\n","import { Line } from \"konva/lib/shapes/Line\";\nimport { verify } from \"../../area\";\nimport { INTERNAL_EVENTS, TOOL_CONSTANTS, TOOL_ITEM_SELECTOR, TOOL_TYPE } from \"../../constants\";\nimport Anchor from \"../../shape/parts/anchor\";\nimport DashLine from \"../../shape/parts/dashline\";\nimport TextField from \"../../shape/parts/textfield\";\nimport { setActionComplete } from \"../../state/tool-state\";\nimport BaseAnnotationTool from \"../base/base-annotation-tool\";\nimport { connectTextNode, randomId } from \"../utils\";\nimport { worldToLocal } from \"../utils/coords-transform\";\n\nclass AngleTool extends BaseAnnotationTool {\n  constructor(config = {}) {\n    super(config);\n    this.type = TOOL_TYPE.ANGLE;\n    const name = randomId();\n    this.name(name);\n    this._data = {\n      id: name,\n      type: this.type,\n      start: { x: 0, y: 0 },\n      middle: { x: 0, y: 0 },\n      position: { x: 0, y: 0 },\n      end: { x: 0, y: 0 },\n      textBox: { dragged: false, x: 0, y: 0, text: \"\" },\n    };\n\n    this.careStageEvent = true;\n    this.pointCount = 0;\n\n    setActionComplete(false);\n  }\n\n  mouseDown(evt) {\n    super.mouseDown(evt);\n    if (this.pointCount === 2) {\n      return;\n    }\n\n    this.initialUI();\n    this.data.position = this.$stage.getPointerPosition();\n    this.pointCount += 1;\n  }\n\n  mouseMove(evt) {\n    super.mouseMove(evt);\n    if (!this.careStageEvent || this.pointCount === 3 || this.pointCount === 0) {\n      return;\n    }\n\n    const pointer = this.getRelativePointerPosition();\n    switch (this.pointCount) {\n      case 1:\n        this.data.middle = pointer;\n        break;\n      case 2:\n        this.data.end = pointer;\n        this.data.textBox.text = this._getAngle();\n        break;\n    }\n\n    this.renderData();\n  }\n\n  mouseUp(evt) {\n    super.mouseUp(evt);\n\n    this.pointCount += 1;\n    if (this.pointCount === 3) {\n      this.pointCount = 0;\n      setActionComplete(true);\n      this.careStageEvent = false;\n      this._tryUpdateData();\n    }\n  }\n\n  renderData() {\n    super.renderData();\n    const { start, end, middle, position, textBox } = this.data;\n    this.setPosition(position);\n    this.findOne(\"#anchorStart\").setPosition(start);\n    this.findOne(\"#anchorMiddle\").setPosition(middle);\n    this.findOne(\"#anchorEnd\").setPosition(end);\n    this.findOne(\"#line1\").points([start.x, start.y, middle.x, middle.y]);\n    this.findOne(\"#line2\").points([middle.x, middle.y, end.x, end.y]);\n    const textfield = this.findOne(`.${TOOL_ITEM_SELECTOR.LABEL}`);\n    if (!textBox.dragged) {\n      const angle = this._getAngle();\n      const x = angle <= 180 ? middle.x - 65 : middle.x + 10;\n      const align = angle <= 180 ? \"right\" : \"left\";\n      textfield.align(align);\n      textfield.setPosition({ x, y: middle.y });\n    } else {\n      const from = [\n        [start.x, start.y],\n        [middle.x, middle.y],\n        [end.x, end.y],\n      ];\n      textfield.setPosition({\n        x: textBox.x,\n        y: textBox.y,\n      });\n      const dashLine = this.findOne(`.${TOOL_ITEM_SELECTOR.DASHLINE}`);\n      connectTextNode(textfield, from, dashLine);\n    }\n    textfield.text(this.showAngle(textBox.text));\n  }\n\n  initialUI() {\n    super.initialUI();\n    if (this.UIInitialed) {\n      return;\n    }\n    const anchorStart = new Anchor({ id: \"anchorStart\" });\n    const anchorMiddle = new Anchor({ id: \"anchorMiddle\" });\n    const anchorEnd = new Anchor({ id: \"anchorEnd\" });\n\n    [anchorStart, anchorMiddle, anchorEnd].forEach((anchor) => {\n      anchor.on(\"dragmove\", this.dragAnchor.bind(this));\n      anchor.on(\"dragend\", this.dragAnchorEnd.bind(this));\n    });\n\n    const line1 = new Line({\n      hitStrokeWidth: TOOL_CONSTANTS.HIT_STROKE_WIDTH,\n      name: TOOL_ITEM_SELECTOR.ITEM,\n      id: \"line1\",\n    });\n    const line2 = new Line({\n      hitStrokeWidth: TOOL_CONSTANTS.HIT_STROKE_WIDTH,\n      name: TOOL_ITEM_SELECTOR.ITEM,\n      id: \"line2\",\n    });\n    const textfield = new TextField();\n    textfield.width(55);\n    textfield.on(\"dragmove\", this.dragText.bind(this));\n    const dashLine = new DashLine({ visible: false });\n    this.draggable(true);\n    this.on(\"dragend\", this.dragEnd.bind(this));\n    this.add(anchorStart, anchorMiddle, anchorEnd, line1, line2, textfield, dashLine);\n    const toolLayer = this.$stage.findOne(\"#toolsLayer\");\n    toolLayer.add(this);\n    this.draw();\n  }\n\n  verifyDataLegal() {\n    const { start, end, middle, position } = this.data;\n    const points = [\n      [start.x + position.x, start.y + position.y],\n      [middle.x + position.x, middle.y + position.y],\n      [end.x + position.x, end.y + position.y],\n    ];\n\n    return points.every(([x, y]) => verify(x, y));\n  }\n\n  dragAnchor(evt) {\n    // 找到拖拽的，然后设置数据\n    super.dragAnchor(evt);\n    const anchor = evt.target;\n    switch (anchor.getId()) {\n      case \"anchorStart\":\n        this.data.start = anchor.getPosition();\n        break;\n      case \"anchorMiddle\":\n        this.data.middle = anchor.getPosition();\n        break;\n      case \"anchorEnd\":\n        this.data.end = anchor.getPosition();\n        break;\n    }\n    this.data.textBox.text = this._getAngle();\n    this.renderData();\n  }\n\n  dragAnchorEnd(evt) {\n    super.dragAnchorEnd(evt);\n    this._tryUpdateData();\n  }\n\n  dragEnd(evt) {\n    super.dragEnd(evt);\n    this.data.position = this.getPosition();\n    this.renderData();\n    this._tryUpdateData();\n  }\n\n  dragText(evt) {\n    super.dragText(evt);\n    const textfield = evt.target;\n    const position = textfield.getPosition();\n\n    this.data.textBox = Object.assign({}, this.data.textBox, {\n      dragged: true,\n      x: position.x,\n      y: position.y,\n    });\n\n    this.renderData();\n  }\n\n  showAngle(angle) {\n    if (angle === \"\") {\n      return \"\";\n    }\n    let res = (angle + 360) % 360;\n    if (res > 180) {\n      res = 360 - res;\n    }\n    return `${res.toFixed(1)}°`;\n  }\n\n  _getAngle() {\n    const { start, end, middle } = this.data;\n    const x1 = start.x - middle.x;\n    const y1 = start.y - middle.y;\n    const x2 = end.x - middle.x;\n    const y2 = end.y - middle.y;\n    const dot = x1 * x2 + y1 * y2;\n    const det = x1 * y2 - y1 * x2;\n    const angle = (Math.atan2(det, dot) / Math.PI) * 180;\n    return +((angle + 360) % 360).toFixed(1);\n  }\n\n  _tryUpdateData() {\n    if (!this.verifyDataLegal() && this.getStage()) {\n      this.getStage().fire(INTERNAL_EVENTS.DATA_REMOVED, { id: this.data.id });\n      this.remove();\n      return;\n    }\n\n    const stage = this.getStage();\n    if (!stage) {\n      return;\n    }\n\n    const data = this._convertData();\n    stage.fire(INTERNAL_EVENTS.DATA_UPDATED, {\n      id: this.data.id,\n      data,\n    });\n  }\n\n  _convertData() {\n    // 转换成local\n    const { start, middle, end, position, textBox } = this.data;\n    const localPosition = worldToLocal(position.x, position.y);\n    const localStart = worldToLocal(position.x + start.x, position.y + start.y);\n    const localMiddle = worldToLocal(position.x + middle.x, position.y + middle.y);\n    const localEnd = worldToLocal(position.x + end.x, position.y + end.y);\n    const localText = worldToLocal(position.x + textBox.x, position.y + textBox.y);\n\n    const data = JSON.parse(JSON.stringify(this.data));\n    data.position = { x: localPosition[0], y: localPosition[1] };\n    data.start = {\n      x: localStart[0] - localPosition[0],\n      y: localStart[1] - localPosition[1],\n    };\n    data.middle = {\n      x: localMiddle[0] - localPosition[0],\n      y: localMiddle[1] - localPosition[1],\n    };\n    data.end = {\n      x: localEnd[0] - localPosition[0],\n      y: localEnd[1] - localPosition[1],\n    };\n    data.textBox.x = localText[0] - localPosition[0];\n    data.textBox.y = localText[1] - localPosition[1];\n\n    return data;\n  }\n\n  set data(val) {\n    super.data = val;\n    setActionComplete(true);\n  }\n\n  get data() {\n    return super.data;\n  }\n}\n\nexport default AngleTool;\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Ellipse extends Shape {\n    _sceneFunc(context) {\n        var rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radiusX() * 2;\n    }\n    getHeight() {\n        return this.radiusY() * 2;\n    }\n    setWidth(width) {\n        this.radiusX(width / 2);\n    }\n    setHeight(height) {\n        this.radiusY(height / 2);\n    }\n}\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n_registerNode(Ellipse);\nFactory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory.addGetterSetter(Ellipse, 'radiusX', 0, getNumberValidator());\nFactory.addGetterSetter(Ellipse, 'radiusY', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { _registerNode } from '../Global.js';\nimport { getNumberOrArrayOfNumbersValidator } from '../Validators.js';\nexport class Rect extends Shape {\n    _sceneFunc(context) {\n        var cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            let topLeft = 0;\n            let topRight = 0;\n            let bottomLeft = 0;\n            let bottomRight = 0;\n            if (typeof cornerRadius === 'number') {\n                topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n            }\n            else {\n                topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n                topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n                bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n                bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n            }\n            context.moveTo(topLeft, 0);\n            context.lineTo(width - topRight, 0);\n            context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n            context.lineTo(width, height - bottomRight);\n            context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n            context.lineTo(bottomLeft, height);\n            context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n            context.lineTo(0, topLeft);\n            context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n}\nRect.prototype.className = 'Rect';\n_registerNode(Rect);\nFactory.addGetterSetter(Rect, 'cornerRadius', 0, getNumberOrArrayOfNumbersValidator(4));\n","import { Group } from \"konva/lib/Group\";\nimport TextField from \"./textfield\";\n\nclass TextItem extends Group {\n  constructor(confg = {}) {\n    super(confg);\n    this.textfiled1 = new TextField({\n      height: 20,\n      width: 70,\n    });\n    this.textfiled1.align(\"left\");\n    this.textfiled1.draggable(false);\n    this.textfield2 = new TextField({\n      height: 20,\n      x: 70,\n      width: 90,\n    });\n    this.textfield2.align(\"right\");\n    this.textfield2.draggable(false);\n    this.add(this.textfiled1, this.textfield2);\n  }\n\n  setText(key, value) {\n    this.textfiled1.text(key);\n    this.textfield2.text(value);\n  }\n}\nexport default TextItem;\n","export const imageState = {\n  wwwc: {\n    ww: 0,\n    wc: 0,\n  },\n  columns: 0,\n  rows: 0,\n  seriesId: null,\n  sliceId: null,\n  pixelData: null,\n  imgCanvas: null,\n  canvas: null,\n  columnPixelSpacing: null,\n  rowPixelSpacing: null,\n  slope: null,\n  intercept: null,\n};\n","import { TOOL_TYPE } from \"@saga/entry\";\nimport { Group } from \"konva/lib/Group\";\nimport { Ellipse } from \"konva/lib/shapes/Ellipse\";\nimport { Rect } from \"konva/lib/shapes/Rect\";\nimport { verify } from \"../../area\";\nimport { INTERNAL_EVENTS, TOOL_COLORS, TOOL_ITEM_SELECTOR } from \"../../constants\";\nimport Anchor from \"../../shape/parts/anchor\";\nimport DashLine from \"../../shape/parts/dashline\";\nimport TextItem from \"../../shape/parts/text-item\";\nimport { imageState } from \"../../state/image-state\";\nimport BaseAnnotationTool from \"../base/base-annotation-tool\";\nimport { connectTextNode, randomId, toCT } from \"../utils\";\nimport { worldToLocal } from \"../utils/coords-transform\";\nclass EllipseTool extends BaseAnnotationTool {\n  constructor(config = {}) {\n    super(config);\n    this.type = TOOL_TYPE.ELLIPSE_ROI;\n    const name = randomId();\n    this.name(name);\n    this._data = {\n      id: name,\n      type: this.type,\n      position: { x: 0, y: 0 },\n      start: { x: 0, y: 0 },\n      end: { x: 0, y: 0 },\n      textBox: { dragged: false, x: 0, y: 0 },\n    };\n    this.isDown = false;\n  }\n  mouseDown(e) {\n    super.mouseDown(e);\n    this.initialUI();\n    this.data.position = this.$stage.getPointerPosition();\n    this.renderData();\n    this.isDown = true;\n  }\n  mouseMove(e) {\n    super.mouseMove(e);\n    if (!this.isDown) {\n      return;\n    }\n    this.data.end = this.getRelativePointerPosition();\n    this.renderData();\n  }\n  mouseUp(e) {\n    super.mouseUp(e);\n    this.isDown = false;\n    // 验证数据合法。派发事件，添加数据。 否则丢弃\n    this._tryUpdateData();\n  }\n  initialUI() {\n    super.initialUI();\n    const anchor1 = new Anchor({ id: \"startAnchor\" });\n    const anchor2 = new Anchor({ id: \"endAnchor\" });\n    const rect = new Rect({\n      id: \"rect\",\n      name: TOOL_ITEM_SELECTOR.ANCHOR,\n      stroke: \"#000\",\n      opacity: 0,\n    });\n    const ellipse = new Ellipse({\n      id: \"ellipse\",\n      hitStrokeWidth: 60,\n      stroke: \"#FFF\",\n      name: TOOL_ITEM_SELECTOR.ITEM,\n      stroke: TOOL_COLORS.NORMAL[`.${TOOL_ITEM_SELECTOR.ITEM}`],\n    });\n    [anchor1, anchor2].forEach((anchor) => {\n      anchor.on(\"dragmove\", this.dragAnchor.bind(this));\n      anchor.on(\"dragend\", this.dragAnchorEnd.bind(this));\n    });\n\n    const group = new Group({ id: \"textGroup\", draggable: true, width: 165, height: 100 });\n    group.on(\"dragmove\", this.dragText.bind(this));\n    const ti1 = new TextItem({ id: \"area\" });\n    const ti2 = new TextItem({ id: \"variance\", y: 20 });\n    const ti3 = new TextItem({ id: \"avg\", y: 40 });\n    const ti4 = new TextItem({ id: \"max\", y: 60 });\n    const ti5 = new TextItem({ id: \"min\", y: 80 });\n    group.add(ti1, ti2, ti3, ti4, ti5);\n\n    const dashline = new DashLine({ visible: false });\n\n    this.draggable(true);\n\n    this.on(\"dragmove\", this.dragMove.bind(this));\n    this.on(\"dragend\", this.dragEnd.bind(this));\n\n    this.add(rect, anchor1, anchor2, ellipse, group, dashline);\n    this.$stage.findOne(\"#toolsLayer\").add(this);\n    this.draw();\n  }\n\n  renderData() {\n    super.renderData();\n    const { position, start, end, textBox } = this.data;\n    this.setPosition(position);\n    this.findOne(\"#startAnchor\").setPosition(start);\n    this.findOne(\"#endAnchor\").setPosition(end);\n    this.findOne(\"#rect\").setPosition(start);\n    this.findOne(\"#ellipse\").setPosition(start);\n    this.findOne(\"#ellipse\").offset({\n      x: (start.x - end.x) / 2,\n      y: (start.y - end.y) / 2,\n    });\n    const width = Math.abs(end.x - start.x);\n    const height = Math.abs(end.y - start.y);\n    this.findOne(\"#ellipse\").size({ width, height });\n    this.findOne(\"#rect\").size({\n      width: end.x - start.x,\n      height: end.y - start.y,\n    });\n\n    const pixelData = this._getPixelData();\n    const data = this._getInfo(pixelData);\n    const group = this.findOne(\"#textGroup\");\n    group.findOne(\"#area\")?.setText(\"面积：\", `${+data.area.toFixed(2)}mm²`);\n    group.findOne(\"#variance\")?.setText(\"方差：\", +data.variance.toFixed(2));\n    group.findOne(\"#avg\")?.setText(\"平均值：\", +data.avg.toFixed(2));\n    group.findOne(\"#max\")?.setText(\"最大值：\", data.max);\n    group.findOne(\"#min\")?.setText(\"最小值：\", data.min);\n\n    if (this.data.textBox.dragged) {\n      const dashline = this.findOne(`.${TOOL_ITEM_SELECTOR.DASHLINE}`);\n      const from = [\n        [(start.x + end.x) / 2, start.y],\n        [end.x, (start.y + end.y) / 2],\n        [(start.x + end.x) / 2, end.y],\n        [start.x, (start.y + end.y) / 2],\n      ];\n      group.setPosition({ x: textBox.x, y: textBox.y });\n      connectTextNode(group, from, dashline);\n    } else {\n      const x = Math.max(start.x, end.x);\n      const y = Math.min(start.y, end.y);\n      group.setPosition({ x: x + 10, y });\n    }\n  }\n\n  dragMove() {\n    this.data.position = this.getPosition();\n    this.renderData();\n  }\n\n  dragEnd(e) {\n    super.dragEnd(e);\n    this._tryUpdateData();\n  }\n\n  dragAnchor(e) {\n    super.dragAnchor(e);\n    const anchor = e.target;\n    if (anchor.getId() === \"startAnchor\") {\n      this._data.start = anchor.getPosition();\n    } else if (anchor.getId() === \"endAnchor\") {\n      this._data.end = anchor.getPosition();\n    }\n    this.renderData();\n  }\n  dragAnchorEnd(e) {\n    super.dragAnchorEnd(e);\n    this._tryUpdateData();\n  }\n\n  dragText(evt) {\n    super.dragText(evt);\n    const group = evt.target;\n\n    this.data.textBox = Object.assign(\n      {},\n      this.data.textBox,\n      {\n        dragged: true,\n      },\n      group.position()\n    );\n\n    this.renderData();\n  }\n\n  verifyDataLegal() {\n    const { start, end, position } = this.data;\n    const points = [\n      [start.x + position.x, start.y + position.y],\n      [end.x + position.x, end.y + position.y],\n    ];\n    return points.every(([x, y]) => verify(x, y));\n  }\n\n  _tryUpdateData() {\n    if (!this.verifyDataLegal() && this.getStage()) {\n      this.getStage().fire(INTERNAL_EVENTS.DATA_REMOVED, { id: this.data.id });\n      this.remove();\n      return;\n    }\n\n    const stage = this.getStage();\n    if (!stage) {\n      return;\n    }\n\n    const data = this._convertData();\n    stage.fire(INTERNAL_EVENTS.DATA_UPDATED, {\n      id: this.data.id,\n      data,\n    });\n  }\n\n  _convertData() {\n    // 转换成local\n    const { position, end, start, textBox } = this.data;\n    const localPosition = worldToLocal(position.x, position.y);\n    const localStart = worldToLocal(position.x + start.x, position.y + start.y);\n    const localEnd = worldToLocal(position.x + end.x, position.y + end.y);\n    const localText = worldToLocal(position.x + textBox.x, position.y + textBox.y);\n\n    const data = JSON.parse(JSON.stringify(this.data));\n    data.position = { x: localPosition[0], y: localPosition[1] };\n    data.start = {\n      x: localStart[0] - localPosition[0],\n      y: localStart[1] - localPosition[1],\n    };\n    data.end = {\n      x: localEnd[0] - localPosition[0],\n      y: localEnd[1] - localPosition[1],\n    };\n    data.textBox.x = localText[0] - localPosition[0];\n    data.textBox.y = localText[1] - localPosition[1];\n    return data;\n  }\n  _getArea() {\n    // 计算面积\n    const { end } = this.data;\n    const { columnPixelSpacing = 0.625, rowPixelSpacing = 0.625 } = imageState;\n    const a = Math.abs(end.x) / 2;\n    const b = Math.abs(end.y) / 2;\n    const area = Math.PI * (a * columnPixelSpacing) * (b * rowPixelSpacing);\n    return area;\n  }\n\n  _getPixelData() {\n    // 思路：根据绘制椭圆外层的矩形宽高、起始点，循环获取pixelData值，判断当前pixelData是否在椭圆中，在则取出。\n    const { position, start, end } = this.data;\n    const pixelData = imageState.pixelData;\n    const localStart = worldToLocal(position.x + start.x, position.y + start.y);\n    const localEnd = worldToLocal(position.x + end.x, position.y + end.y);\n    // 锚点绘制椭圆时，外层矩形的宽高\n    const width = Math.abs(localStart[0] - localEnd[0]);\n    const height = Math.abs(localStart[1] - localEnd[1]);\n    // 外层矩形左上角的起始点\n    const x = Math.round(Math.min(localStart[0], localEnd[0]));\n    const y = Math.round(Math.min(localStart[1], localEnd[1]));\n    // 椭圆长轴宽轴\n    const a = Math.abs(localStart[0] - localEnd[0]) / 2;\n    const b = Math.abs(localStart[1] - localEnd[1]) / 2;\n    // 椭圆中心点\n    const center = [(localStart[0] + localEnd[0]) / 2, (localStart[1] + localEnd[1]) / 2];\n\n    let ellipsePixelData = [];\n    let index = 0;\n    for (let row = 0; row < height; row++) {\n      for (let column = 0; column < width; column++) {\n        if (this._inEllipse(a, b, column + x, row + y, center)) {\n          const pixelDataIndex = (row + y) * imageState.columns + (column + x);\n          ellipsePixelData[index++] = pixelData[pixelDataIndex];\n        }\n      }\n    }\n\n    return toCT(ellipsePixelData, imageState.slope, imageState.intercept);\n  }\n\n  _getInfo(pixelData) {\n    let sum = 0; // 总数\n    let s = 0;\n    let min = Number.MAX_SAFE_INTEGER;\n    let max = Number.MIN_SAFE_INTEGER;\n\n    for (let i = 0; i < pixelData.length; i++) {\n      const item = pixelData[i];\n      sum += item;\n      min = Math.min(min, item);\n      max = Math.max(max, item);\n    }\n    const avg = sum / pixelData.length; // 平均数\n\n    // (x1 - M)^2 + (x2 - M)^2 + ...... +(xn - M)^2\n    for (let i = 0; i < pixelData.length; i++) {\n      const item = pixelData[i];\n      s += Math.pow(item - avg, 2);\n    }\n    const variance = Math.sqrt(s / pixelData.length); // 方差\n\n    return { variance, max, min, area: this._getArea(), avg };\n  }\n\n  _inEllipse(a, b, x, y, center) {\n    return Math.pow(x - center[0], 2) / Math.pow(a, 2) + Math.pow(y - center[1], 2) / Math.pow(b, 2) <= 1;\n  }\n}\n\nexport default EllipseTool;\n","import { Line } from \"konva/lib/shapes/Line\";\nimport { verify } from \"../../area\";\nimport { INTERNAL_EVENTS, TOOL_CONSTANTS, TOOL_ITEM_SELECTOR, TOOL_TYPE } from \"../../constants\";\nimport Anchor from \"../../shape/parts/anchor\";\nimport DashLine from \"../../shape/parts/dashline\";\nimport TextField from \"../../shape/parts/textfield\";\nimport { imageState } from \"../../state/image-state\";\nimport BaseAnnotationTool from \"../base/base-annotation-tool\";\nimport { connectTextNode, randomId } from \"../utils\";\nimport { worldToLocal } from \"../utils/coords-transform\";\n\nclass LengthTool extends BaseAnnotationTool {\n  constructor(config = {}) {\n    super(config);\n    this.type = TOOL_TYPE.LENGTH;\n    const name = randomId();\n    this.name(name);\n    this._data = {\n      id: name,\n      type: this.type,\n      position: { x: 0, y: 0 },\n      start: { x: 0, y: 0 },\n      end: { x: 0, y: 0 },\n      textBox: { dragged: false, x: 0, y: 0, text: \"\" },\n    };\n    this.careStageEvent = true;\n  }\n\n  mouseDown(evt) {\n    super.mouseDown(evt);\n    this.initialUI();\n    this.data.position = this.$stage.getPointerPosition();\n  }\n\n  mouseMove(evt) {\n    super.mouseMove(evt);\n    if (!this.careStageEvent) {\n      return;\n    }\n\n    const pointer = this.getRelativePointerPosition();\n    this.data.end = pointer;\n\n    this._calcText();\n    this.renderData();\n  }\n\n  mouseUp(evt) {\n    super.mouseUp(evt);\n    this.careStageEvent = false;\n    // 验证数据合法。派发事件，添加数据。 否则丢弃\n    this._tryUpdateData();\n  }\n\n  verifyDataLegal() {\n    const { start, end, position } = this.data;\n    const points = [\n      [start.x + position.x, start.y + position.y],\n      [end.x + position.x, end.y + position.y],\n    ];\n\n    return points.every(([x, y]) => verify(x, y));\n  }\n\n  renderData() {\n    super.renderData();\n    const { position, start, end, textBox } = this.data;\n    this.setPosition(position);\n    this.findOne(\"#startAnchor\")?.setPosition(start);\n    this.findOne(\"#endAnchor\")?.setPosition(end);\n    this.findOne(`.${TOOL_ITEM_SELECTOR.ITEM}`)?.points([start.x, start.y, end.x, end.y]);\n\n    const textfield = this.findOne(`.${TOOL_ITEM_SELECTOR.LABEL}`);\n    if (!textBox.dragged) {\n      const usePosition = end.x - start.x > 0 ? end : start;\n      textfield.setPosition({ x: usePosition.x + 10, y: usePosition.y });\n    } else {\n      const from = [\n        [start.x, start.y],\n        [end.x, end.y],\n        [(start.x + end.x) / 2, (start.y + end.y) / 2],\n      ];\n\n      textfield.setPosition({\n        x: textBox.x,\n        y: textBox.y,\n      });\n\n      const dashLine = this.findOne(`.${TOOL_ITEM_SELECTOR.DASHLINE}`);\n      connectTextNode(textfield, from, dashLine);\n    }\n\n    textfield.text(`${textBox.text}mm`);\n  }\n\n  initialUI() {\n    super.initialUI();\n    if (this.UIInitialed) {\n      return;\n    }\n    // 需要2个锚点，一个线，一个文案，可能还需要一个虚线\n    const anchor1 = new Anchor({\n      id: \"startAnchor\",\n    });\n    const anchor2 = new Anchor({\n      id: \"endAnchor\",\n    });\n    [anchor1, anchor2].forEach((anchor) => {\n      anchor.on(\"dragmove\", this.dragAnchor.bind(this));\n      anchor.on(\"dragend\", this.dragAnchorEnd.bind(this));\n    });\n\n    const line = new Line({\n      hitStrokeWidth: TOOL_CONSTANTS.HIT_STROKE_WIDTH,\n      name: TOOL_ITEM_SELECTOR.ITEM,\n    });\n\n    const textfield = new TextField();\n    textfield.on(\"dragmove\", this.dragText.bind(this));\n    const dashLine = new DashLine({ visible: false });\n\n    this.draggable(true);\n    this.on(\"dragend\", this.dragEnd.bind(this));\n\n    this.add(anchor1, anchor2, line, textfield, dashLine);\n    const toolLayer = this.$stage.findOne(\"#toolsLayer\");\n    toolLayer.add(this);\n    this.draw();\n\n    this.UIInitialed = true;\n  }\n\n  dragAnchor(evt) {\n    // 找到拖拽的，然后设置数据\n    super.dragAnchor(evt);\n    const anchor = evt.target;\n    if (anchor.getId() === \"startAnchor\") {\n      this._data.start = anchor.getPosition();\n    } else if (anchor.getId() === \"endAnchor\") {\n      this._data.end = anchor.getPosition();\n    }\n\n    this._calcText();\n    this.renderData();\n  }\n\n  dragAnchorEnd(evt) {\n    super.dragAnchorEnd(evt);\n    this._tryUpdateData();\n  }\n\n  dragEnd(evt) {\n    super.dragEnd(evt);\n    this.data.position = this.getPosition();\n    this.renderData();\n    this._tryUpdateData();\n  }\n\n  dragText(evt) {\n    super.dragText(evt);\n    const textfield = evt.target;\n\n    this.data.textBox = Object.assign(\n      {},\n      this.data.textBox,\n      {\n        dragged: true,\n      },\n      textfield.getPosition()\n    );\n\n    this.renderData();\n  }\n\n  _calcText() {\n    const { start, end, position } = this.data;\n    const localStart = worldToLocal(position.x + start.x, position.y + start.y);\n    const localEnd = worldToLocal(position.x + end.x, position.y + end.y);\n    const { columnPixelSpacing: spX, rowPixelSpacing: spY } = imageState;\n    const x2 = (localStart[0] * spX - localEnd[0] * spX) ** 2;\n    const y2 = (localStart[1] * spY - localEnd[1] * spY) ** 2;\n    const distance = +Math.sqrt(x2 + y2).toFixed(2);\n    this.data.textBox.text = distance;\n  }\n\n  _tryUpdateData() {\n    if (!this.verifyDataLegal() && this.getStage()) {\n      this.getStage().fire(INTERNAL_EVENTS.DATA_REMOVED, { id: this.data.id });\n      this.remove();\n      return;\n    }\n\n    const stage = this.getStage();\n    if (!stage) {\n      return;\n    }\n\n    const data = this._convertData();\n    stage.fire(INTERNAL_EVENTS.DATA_UPDATED, {\n      id: this.data.id,\n      data,\n    });\n  }\n\n  _convertData() {\n    // 转换成local\n    const { position, end, textBox, start } = this.data;\n    const localPosition = worldToLocal(position.x, position.y);\n    const localStart = worldToLocal(position.x + start.x, position.y + start.y);\n    const localEnd = worldToLocal(position.x + end.x, position.y + end.y);\n    const localText = worldToLocal(position.x + textBox.x, position.y + textBox.y);\n    const data = JSON.parse(JSON.stringify(this.data));\n    data.position = { x: localPosition[0], y: localPosition[1] };\n    data.start = {\n      x: localStart[0] - localPosition[0],\n      y: localStart[1] - localPosition[1],\n    };\n    data.end = {\n      x: localEnd[0] - localPosition[0],\n      y: localEnd[1] - localPosition[1],\n    };\n    data.textBox.x = localText[0] - localPosition[0];\n    data.textBox.y = localText[1] - localPosition[1];\n    return data;\n  }\n}\n\nexport default LengthTool;\n","import { verify } from \"../../area\";\nimport { TOOL_ITEM_SELECTOR, TOOL_TYPE } from \"../../constants\";\nimport TextField from \"../../shape/parts/textfield\";\nimport { imageState } from \"../../state/image-state\";\nimport BaseAnnotationTool from \"../base/base-annotation-tool\";\nimport { randomId, toCT } from \"../utils\";\nimport { worldToLocal } from \"../utils/coords-transform\";\nclass ProbeTool extends BaseAnnotationTool {\n  constructor(config = {}) {\n    super(Object.assign({}, config, { useDefaultMouseEffect: false }));\n    this.type = TOOL_TYPE.PROBE;\n    const name = randomId();\n    this.name(name);\n    this._data = {\n      id: name,\n      type: this.type,\n      position: { x: 0, y: 0 },\n    };\n  }\n\n  mouseDown(e) {\n    super.mouseDown(e);\n    this.initialUI();\n    this.data.position = this.$stage.getPointerPosition();\n    this.renderData();\n  }\n\n  mouseMove(e) {\n    super.mouseMove(e);\n    this.data.position = this.$stage.getPointerPosition();\n    this.renderData();\n  }\n\n  mouseUp(e) {\n    super.mouseUp(e);\n    this.remove();\n  }\n\n  initialUI() {\n    super.initialUI();\n    const textfield = new TextField();\n    textfield.setPosition({ x: 20, y: 10 });\n    textfield.draggable(false);\n    textfield.show();\n    this.add(textfield);\n    const toolLayer = this.$stage.findOne(\"#toolsLayer\");\n    toolLayer.add(this);\n\n    this.UIInitialed = true;\n  }\n\n  renderData() {\n    super.renderData();\n    const { position } = this.data;\n    const textfield = this.findOne(`.${TOOL_ITEM_SELECTOR.LABEL}`);\n    this.setPosition(position);\n    if (!verify(position.x, position.y)) {\n      textfield.hide();\n      return;\n    }\n    const point = worldToLocal(position.x, position.y);\n    textfield.show();\n    const ctValue = this._getCT(Math.round(point[0]), Math.round(point[1]));\n    textfield.text(`CT: ${ctValue}`);\n  }\n\n  _getCT(x, y) {\n    const index = y * imageState.columns + x;\n    return toCT([imageState.pixelData[index]], imageState.slope, imageState.intercept);\n  }\n}\n\nexport default ProbeTool;\n","import { TOOL_TYPE } from \"@saga/entry\";\nimport { Circle } from \"konva/lib/shapes/Circle\";\nimport { imageState } from \"../state/image-state\";\nimport { viewportState } from \"../state/viewport-state\";\nimport BaseTool from \"./base/base-tool\";\nimport { cursor, randomId } from \"./utils\";\nimport { worldToLocal } from \"./utils/coords-transform\";\n\nconst tmpCanvas = document.createElement(\"canvas\");\nclass MagnifyTool extends BaseTool {\n  constructor(config = {}) {\n    super(Object.assign({}, config, { useDefaultMouseEffect: false }));\n    this.type = TOOL_TYPE.MAGNIFYING;\n    this.dom = null;\n    this.name = randomId();\n    this._data = {\n      id: this.name,\n      type: this.type,\n      originalRadius: 50, // 原始图像放大半径\n      scale: 3, // 放大倍数\n      centerPoint: { x: 0, y: 0 }, // 放大镜中心点\n      size: 250,\n    };\n  }\n\n  mouseDown(e) {\n    super.mouseDown(e);\n    this.initialUI();\n    this.findOne(\"#circle\").visible(true);\n    this.findOne(\"#circleBG\").visible(true);\n    this.data.centerPoint = this.$stage.getRelativePointerPosition();\n    cursor(this, \"none\");\n    this.renderData();\n  }\n\n  mouseMove(e) {\n    super.mouseMove(e);\n    this.data.centerPoint = this.$stage.getRelativePointerPosition();\n    this.renderData();\n  }\n\n  mouseUp(e) {\n    super.mouseUp(e);\n    cursor(this, \"auto\");\n    this.remove();\n  }\n\n  renderData() {\n    super.renderData();\n    const { centerPoint, originalRadius, scale } = this.data;\n    const circleBG = this.findOne(\"#circleBG\");\n    const circle = this.findOne(\"#circle\");\n\n    circle.setPosition(centerPoint);\n    circle.width(this.data.size);\n    circle.height(this.data.size);\n\n    circle.fillPatternImage(this._getImage());\n    circle.fillPatternOffset({\n      x: tmpCanvas.width / 2,\n      y: tmpCanvas.height / 2,\n    });\n\n    circleBG.setPosition(centerPoint);\n    circleBG.width(this.data.size);\n    circleBG.height(this.data.size);\n  }\n\n  initialUI() {\n    super.initialUI();\n    const circle = new Circle({\n      id: \"circle\",\n      stroke: \"#fff\",\n      strokeWidth: 2,\n      radius: 70,\n      visible: false,\n      fillPatternRepeat: \"no-repeat\",\n    });\n\n    const circle2 = new Circle({\n      id: \"circleBG\",\n      fill: \"black\",\n      radius: 70,\n      visible: false,\n    });\n\n    this.add(circle2, circle);\n    const toolLayer = this.$stage.findOne(\"#toolsLayer\");\n    toolLayer.add(this);\n    this.draw();\n  }\n\n  _getImage() {\n    const canvas = tmpCanvas;\n    tmpCanvas.width = this.data.size * 2;\n    tmpCanvas.height = this.data.size * 2;\n    const ctx = canvas.getContext(\"2d\");\n    const point = worldToLocal(this.data.centerPoint.x, this.data.centerPoint.y);\n\n    ctx.drawImage(\n      imageState.imgCanvas,\n      point[0] - this.data.originalRadius / viewportState.scale,\n      point[1] - this.data.originalRadius / viewportState.scale,\n      (this.data.originalRadius * 2) / viewportState.scale,\n      (this.data.originalRadius * 2) / viewportState.scale,\n      0,\n      0,\n      tmpCanvas.width,\n      tmpCanvas.height\n    );\n    return canvas;\n  }\n}\n\nexport default MagnifyTool;\n","/*\n (c) 2017, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n(function () { 'use strict';\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y;\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1.x,\n        y = p1.y,\n        dx = p2.x - x,\n        dy = p2.y - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2.x;\n            y = p2.y;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\n    var maxSqDist = sqTolerance,\n        index;\n\n    for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n            index = i;\n            maxSqDist = sqDist;\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n    }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n    var last = points.length - 1;\n\n    var simplified = [points[0]];\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\n    simplified.push(points[last]);\n\n    return simplified;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n\n// export as AMD module / Node module / browser or worker variable\nif (typeof define === 'function' && define.amd) define(function() { return simplify; });\nelse if (typeof module !== 'undefined') {\n    module.exports = simplify;\n    module.exports.default = simplify;\n} else if (typeof self !== 'undefined') self.simplify = simplify;\nelse window.simplify = simplify;\n\n})();\n","import { Line } from \"konva/lib/shapes/Line\";\nimport simplify from \"simplify-js\";\nimport { TOOL_CONSTANTS, TOOL_ITEM_SELECTOR, TOOL_TYPE } from \"../constants\";\nimport BaseTool from \"./base/base-tool\";\nimport { randomId } from \"./utils\";\n\nclass PolygonTool extends BaseTool {\n  constructor(config = {}) {\n    config.useDefaultMouseEffect = false;\n    super(config);\n    this.type = TOOL_TYPE.POLYGON;\n    this.name = randomId();\n    this._data = {\n      id: this.name,\n      type: this.type,\n      position: { x: 0, y: 0 },\n      points: [],\n    };\n  }\n\n  initialUI() {\n    super.initialUI();\n    if (this.UIInitialed) {\n      return;\n    }\n\n    const line = new Line({\n      hitStrokeWidth: TOOL_CONSTANTS.HIT_STROKE_WIDTH,\n      name: TOOL_ITEM_SELECTOR.ITEM,\n      fill: \"blue\",\n      closed: true,\n      stroke: \"white\",\n      strokeWidth: 2,\n      opacity: 0.2,\n      fillAfterStrokeEnabled: false,\n    });\n    this.add(line);\n    const toolLayer = this.$stage.findOne(\"#toolsLayer\");\n    toolLayer.add(this);\n    this.draw();\n\n    this.UIInitialed = true;\n  }\n\n  mouseDown(evt) {\n    super.mouseDown(evt);\n    this.isPaint = true;\n    this.initialUI();\n    this.data.position = this.$stage.getPointerPosition();\n    this.setAbsolutePosition(this.data.position);\n  }\n\n  mouseMove(evt) {\n    super.mouseMove(evt);\n    if (!this.isPaint) {\n      return;\n    }\n\n    const pos = this.getRelativePointerPosition();\n    this.data.points.push(pos);\n    this.renderData();\n  }\n\n  mouseUp(evt) {\n    super.mouseUp(evt);\n\n    this.isPaint = false;\n    this._tryUpdateData();\n  }\n\n  mouseRightClick(evt) {\n    super.mouseRightClick(evt);\n    console.log(evt);\n  }\n\n  renderData() {\n    super.renderData();\n    let { position, points } = this.data;\n    this.setPosition(position);\n    // console.log(\"before\", points.length);\n    points = simplify(points, 0.3, true);\n    // console.log(\"after\", points.length);\n    let pts = points.map((p) => {\n      return [p.x, p.y];\n    });\n    this.findOne(`.${TOOL_ITEM_SELECTOR.ITEM}`).points(pts.flat());\n    this.draw();\n  }\n\n  _tryUpdateData() {}\n}\n\nexport default PolygonTool;\n","import { INTERNAL_EVENTS } from \"../constants\";\nimport BaseTool from \"./base/base-tool\";\n\nclass RotationTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n    this.rotate = 0;\n    this.isDown = false;\n  }\n\n  mouseDown(e) {\n    super.mouseDown(e);\n    this.isDown = true;\n  }\n\n  mouseMove(e) {\n    super.mouseDown(e);\n    if (!this.isDown) return;\n    this.rotate = (this.rotate + 90) % 360;\n    this.$stage.fire(INTERNAL_EVENTS.TOOL_ROTATION, { rotate: this.rotate });\n  }\n\n  mouseUp(e) {\n    super.mouseUp(e);\n    this.isDown = false;\n  }\n}\n\nexport default RotationTool;\n","import { INTERNAL_EVENTS } from \"../constants\";\nimport { viewportState } from \"../state/viewport-state\";\nimport BaseTool from \"./base/base-tool\";\nclass ScaleTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n    this.isDown = false;\n    this.oldOffsetY = null;\n    this.scale = viewportState.scale;\n  }\n\n  mouseDown(e) {\n    super.mouseDown(e);\n    this.isDown = true;\n    this.oldOffsetY = e.evt.screenY;\n  }\n\n  documentMouseMove(e) {\n    super.documentMouseMove(e);\n    if (!this.isDown) {\n      return;\n    }\n    const stepY = e.screenY - this.oldOffsetY;\n    this.oldOffsetY = e.screenY;\n\n    const ticks = stepY / 200;\n    const pow = 1.7;\n    const oldFactor = Math.log(this.scale) / Math.log(pow);\n    const factor = oldFactor + ticks;\n    this.scale = Math.pow(pow, factor);\n\n    if (this.scale < 0.05) {\n      this.scale = 0.05;\n    } else if (this.scale > 10) {\n      this.scale = 10;\n    }\n    this.isDown && this.$stage.fire(INTERNAL_EVENTS.TOOL_SCALE, { scale: this.scale });\n  }\n\n  documentMouseUp(e) {\n    super.documentMouseUp(e);\n    this.isDown = false;\n  }\n}\n\nexport default ScaleTool;\n","import { INTERNAL_EVENTS } from \"../constants\";\nimport BaseTool from \"./base/base-tool\";\nclass StackTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n    this.isDown = false;\n  }\n  mouseDown(e) {\n    super.mouseDown(e);\n    this.isDown = true;\n  }\n  mouseMove(e) {\n    super.mouseMove(e);\n    if (!this.isDown) {\n      return;\n    }\n    const { movementY } = e.evt;\n    if (movementY === 0) {\n      return;\n    }\n\n    this.$stage.fire(INTERNAL_EVENTS.TOOL_STACK_CHANGE, {\n      delta: Math.sign(movementY),\n    });\n  }\n  mouseUp(e) {\n    super.mouseUp(e);\n    this.isDown = false;\n  }\n}\n\nexport default StackTool;\n","import { INTERNAL_EVENTS } from \"../constants\";\nimport BaseTool from \"./base/base-tool\";\nclass StackWheelTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n  }\n  mouseWheel(e) {\n    super.mouseWheel(e);\n    const { wheelDelta } = e.evt;\n\n    this.$stage.fire(INTERNAL_EVENTS.TOOL_STACK_CHANGE, {\n      delta: -Math.sign(wheelDelta),\n    });\n  }\n}\n\nexport default StackWheelTool;\n","import { TOOL_TYPE } from \"..\";\nimport { INTERNAL_EVENTS } from \"../constants\";\nimport { viewportState } from \"../state/viewport-state\";\nimport BaseTool from \"./base/base-tool\";\nimport { randomId } from \"./utils\";\n\nclass TranslateTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n    this.isDown = false;\n    this.oldOffset = null;\n    this.step = null;\n    this.type = TOOL_TYPE.TRANSLATE;\n    this.name = randomId();\n    this._data = {\n      id: this.name,\n      type: this.type,\n      offset: { x: 0, y: 0 },\n    };\n  }\n\n  mouseDown(e) {\n    super.mouseDown(e);\n    const { screenX, screenY } = e.evt;\n    this.isDown = true;\n    this.oldOffset = [screenX, screenY];\n    this.step = { x: viewportState.x, y: viewportState.y };\n  }\n\n  documentMouseMove(e) {\n    super.documentMouseMove(e);\n    if (!this.isDown) {\n      return;\n    }\n    const offset = {\n      x: e.screenX - this.oldOffset[0] + this.step.x,\n      y: e.screenY - this.oldOffset[1] + this.step.y,\n    };\n    this.data.offset = offset;\n    this.$stage.fire(INTERNAL_EVENTS.TOOL_TRANSLATE, { offset });\n  }\n\n  documentMouseUp(e) {\n    super.documentMouseUp(e);\n    this.isDown = false;\n  }\n}\n\nexport default TranslateTool;\n","import { INTERNAL_EVENTS, TOOL_TYPE } from \"../constants\";\nimport { imageState } from \"../state/image-state\";\nimport BaseTool from \"./base/base-tool\";\nimport { randomId } from \"./utils\";\nclass WWWCTool extends BaseTool {\n  constructor(config = {}) {\n    super(config);\n    this.isDown = false;\n    this.oldOffset = null;\n    this.step = null;\n    this.type = TOOL_TYPE.WWWC;\n    this.name = randomId();\n    this._data = {\n      id: this.name,\n      type: this.type,\n      wwwc: { ww: 0, wc: 0 },\n    };\n  }\n  mouseDown(e) {\n    super.mouseDown(e);\n    const { screenX, screenY } = e.evt;\n    this.isDown = true;\n    this.oldOffset = [screenX, screenY];\n    this.step = { ww: imageState.wwwc.ww, wc: imageState.wwwc.wc };\n  }\n\n  documentMouseMove(e) {\n    super.documentMouseMove(e);\n    if (!this.isDown) {\n      return;\n    }\n    const wwwc = {\n      ww: e.screenX - this.oldOffset[0] + this.step.ww,\n      wc: e.screenY - this.oldOffset[1] + this.step.wc,\n    };\n    this.data.wwwc = wwwc;\n    this.$stage.fire(INTERNAL_EVENTS.TOOL_WWWC, { wwwc });\n  }\n\n  documentMouseUp(e) {\n    super.documentMouseUp(e);\n    this.isDown = false;\n  }\n}\n\nexport default WWWCTool;\n","import { TOOL_TYPE } from \"./constants\";\nimport AngleTool from \"./tools/annotation/angle-tool\";\nimport EllipseTool from \"./tools/annotation/ellipse-tool\";\nimport LengthTool from \"./tools/annotation/length-tool\";\nimport ProbeTool from \"./tools/annotation/probe-tool\";\nimport MagnifyTool from \"./tools/magnify-tool\";\nimport PolygonTool from \"./tools/polygon-tool\";\nimport RotationTool from \"./tools/rotation-tool\";\nimport ScaleTool from \"./tools/scale-tool\";\nimport StackTool from \"./tools/stack-tool\";\nimport StackWheelTool from \"./tools/stack-wheel-tool\";\nimport TranslateTool from \"./tools/translate-tool\";\nimport WWWCTool from \"./tools/wwwc-tool\";\n\nexport const TOOL_CONSTRUCTOR = {\n  [TOOL_TYPE.LENGTH]: LengthTool,\n  [TOOL_TYPE.ANGLE]: AngleTool,\n  [TOOL_TYPE.ROTATION]: RotationTool,\n  [TOOL_TYPE.SCALE]: ScaleTool,\n  [TOOL_TYPE.POLYGON]: PolygonTool,\n  [TOOL_TYPE.TRANSLATE]: TranslateTool,\n  [TOOL_TYPE.WWWC]: WWWCTool,\n  [TOOL_TYPE.MAGNIFYING]: MagnifyTool,\n  [TOOL_TYPE.PROBE]: ProbeTool,\n  [TOOL_TYPE.STACK_SCROLL]: StackTool,\n  [TOOL_TYPE.STACK_WHEEL_SCROLL]: StackWheelTool,\n  [TOOL_TYPE.ELLIPSE_ROI]: EllipseTool,\n};\n","const ee = {\n  mouseenter: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n    toolState.getToolInstance(which)?.mouseEnter(e);\n  },\n  mouseleave: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n    toolState.getToolInstance(which)?.mouseLeave(e);\n  },\n  mouseout: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n\n    toolState.getToolInstance(which)?.mouseOut(e);\n  },\n  mouseover: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n\n    toolState.getToolInstance(which)?.mouseOver(e);\n  },\n  mousemove: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n\n    toolState.getToolInstance(which)?.mouseMove(e);\n  },\n  mousedown: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n    if (e.target?.nodeType !== \"Stage\") {\n      return;\n    }\n    toolState.getToolInstance(which, true)?.mouseDown(e);\n  },\n  mouseup: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n\n    toolState.getToolInstance(which)?.mouseUp(e);\n  },\n  click: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n    const fn = [\"mouseClick\", \"mouseWheelClick\"];\n    toolState.getToolInstance(which)?.[fn[which]]?.(e);\n  },\n  contextmenu: (e, toolState) => {\n    e.evt.preventDefault();\n    const { evt } = e;\n    const { which } = evt;\n    toolState.getToolInstance(which)?.mouseRightClick(e);\n  },\n  dblclick: (e, toolState) => {\n    const { evt } = e;\n    const { which } = evt;\n\n    toolState.getToolInstance(which)?.mouseDoubleClick(e);\n  },\n  wheel: (e, toolState) => {\n    [1, 2, 3].map((button) => {\n      toolState.getToolInstance(button)?.mouseWheel(e);\n    });\n\n    if (toolState.getToolType(4) && !toolState.getToolInstance(4)) {\n      toolState.getToolInstance(4, true);\n    }\n    toolState.getToolInstance(4)?.mouseWheel(e);\n  },\n};\n\nconst documentEE = {\n  mousemove: (e, toolState) => {\n    const { which } = e;\n    toolState.getToolInstance(which)?.documentMouseMove(e);\n  },\n  mouseup: (e, toolState) => {\n    const { which } = e;\n    toolState.getToolInstance(which)?.documentMouseUp(e);\n  },\n};\n\nconst clones = {};\nconst enable = (stage, toolState) => {\n  toolState.$stage = stage;\n  // remove old event listeners\n  Reflect.ownKeys(ee).forEach((key) => {\n    stage.off(key, clones[key]);\n    delete clones[key];\n  });\n\n  Reflect.ownKeys(ee).forEach((key) => {\n    clones[key] = (evt) => {\n      ee[key](evt, toolState);\n    };\n    stage.on(key, clones[key]);\n  });\n\n  // document\n  Reflect.ownKeys(documentEE).forEach((key) => {\n    const documentKey = `document-${key}-${stage.id()}`;\n    document.removeEventListener(key, clones[documentKey]);\n    delete clones[documentKey];\n  });\n\n  Reflect.ownKeys(documentEE).forEach((key) => {\n    const documentKey = `document-${key}-${stage.id()}`;\n    clones[documentKey] = (evt) => {\n      documentEE[key](evt, toolState);\n    };\n    document.addEventListener(key, clones[documentKey]);\n  });\n};\n\nconst disable = (stage, toolState) => {};\n\nexport default { enable, disable };\n","import { Component } from \"@saga/core\";\nimport { DD } from \"konva/lib/DragAndDrop\";\nimport { Layer } from \"konva/lib/Layer\";\nimport { Stage } from \"konva/lib/Stage\";\nimport Area from \"./area\";\nimport { INTERNAL_EVENTS } from \"./constants\";\nimport { TOOL_CONSTRUCTOR } from \"./constructor\";\nimport { imageState } from \"./state/image-state\";\nimport ToolState from \"./state/tool-state\";\nimport { transform as transformCoords } from \"./tools/utils/coords-transform\";\nimport MouseTrap from \"./trap/mouse-trap\";\n\nclass View extends Component {\n  constructor(option = {}) {\n    super(option);\n\n    this.toolState = new ToolState();\n    this.area = new Area();\n    this.initContainer(option.el);\n  }\n\n  resize(width, height) {\n    this.stage.setSize({ width, height });\n  }\n\n  useTool(toolType, button = 1) {\n    this.toolState.updateState(toolType, button, this.stage);\n    MouseTrap.enable(this.stage, this.toolState);\n  }\n\n  initContainer(el) {\n    const toolContainer = document.createElement(\"div\");\n    toolContainer.classList.add(\"tools-container\");\n    toolContainer.style.cssText = `position: absolute;top: 0;left: 0;width: 100%;height: 100%;border: 0; z-index:2;`;\n    el.appendChild(toolContainer);\n\n    const stage = new Stage(\n      Object.assign(\n        {},\n        {\n          container: toolContainer,\n          id: this.id,\n        },\n        this._getRootSize(el)\n      )\n    );\n    this.stage = stage;\n\n    stage.add(\n      new Layer({\n        id: \"toolsLayer\",\n      })\n    );\n\n    // 整理事件监听\n    Object.values(INTERNAL_EVENTS).forEach((eventName) => {\n      stage.on(eventName, (info) => {\n        this.emit(eventName, info);\n      });\n    });\n  }\n\n  updateViewport(config = {}) {\n    this.area.update(config);\n  }\n\n  updateImageState(config = {}) {\n    Object.keys(config).map((key) => {\n      imageState[key] = config[key];\n    });\n  }\n\n  /**\n   * 设置工具层数据\n   *\n   * @param { array } data\n   * @memberof View\n   */\n  renderData(data = new Map()) {\n    const layer = this.stage.findOne(\"#toolsLayer\");\n    if (!layer) {\n      console.error(`can't find tools layer.`);\n    }\n\n    // 如果有正在拖拽的， 就先取消拖拽，再清空当前layer\n    DD?._dragElements.clear();\n    layer.removeChildren();\n    data.forEach((obj) => {\n      const { type, id } = obj;\n      const item = new TOOL_CONSTRUCTOR[type]();\n      item.$stage = layer.getStage();\n      item.data = transformCoords(obj);\n      item.name(id);\n    });\n    layer.batchDraw();\n  }\n\n  resetData(data = new Map()) {\n    const layer = this.stage.findOne(\"#toolsLayer\");\n    if (!layer) {\n      console.error(`can't find tools layer.`);\n    }\n    data.forEach((obj) => {\n      const item = layer.findOne(`.${obj.id}`);\n      const data = transformCoords(obj);\n      item.setData(data);\n      item.renderData();\n    });\n    layer.batchDraw();\n  }\n\n  _getRootSize(el) {\n    let { clientWidth, clientHeight } = el;\n    return { width: clientWidth, height: clientHeight };\n  }\n}\n\nexport default View;\n","export const device = () => {\n  const ua = navigator.userAgent;\n  const isAndroid = /android|adr/gi.test(ua);\n  const isIOS = /iphone|ipod|ipad/gi.test(UA);\n  const isPC = !isAndroid && isIOS;\n  return {\n    isAndroid,\n    isIOS,\n    isPC,\n  };\n};\n\nexport const appendIFrame = (rootDom, sizeChangeHandler) => {\n  const className = \"tx-resizer\";\n  const tempIframe = rootDom.querySelector(`.${className}`);\n  let lastEmitResize = -1;\n  const resizeHandler = (e) => {\n    if (Date.now() - lastEmitResize <= 100) {\n      return;\n    }\n    lastEmitResize = Date.now();\n    sizeChangeHandler(rootDom);\n  };\n\n  if (tempIframe) {\n    tempIframe.contentWindow.onresize = resizeHandler;\n    return;\n  }\n\n  const iframe = document.createElement(\"iframe\");\n  iframe.style.cssText = `position: absolute;top: 0;left: 0;width: 100%;height: 100%;border: 0; pointer-events:none;z-index:-1;`;\n  iframe.classList = [className];\n  rootDom.style.position = \"relative\";\n  rootDom.style.overflow = \"hidden\";\n  rootDom.insertBefore(iframe, rootDom.firstChild);\n  iframe.contentWindow.onresize = resizeHandler;\n};\n\nexport const randomId = (len = 6) => {\n  return Math.random().toString(16).slice(2).substring(0, len);\n};\n","import { randomId } from \"./utils\";\nexport const LINK_PROPERTY = {\n  WWWC: \"wwwc\",\n  INVERT: \"invert\",\n  ROTATION: \"rotation\",\n  FLIP_V: \"flipV\",\n  FLIP_H: \"flipH\",\n  SCALE: \"scale\",\n  TRANSLATION: \"translation\",\n  // 通常是某个定位点进行联动，再MPR下\n  POSITION: \"position\",\n  // 通常再多序列的时候联动这个属性\n  SLICE: \"slice\",\n};\n\nconst events = {};\n\nclass LinkageManager {\n  constructor(viewports) {\n    /** @type { Map } */\n    this.viewportMap = viewports ?? new Map();\n    this.links = new Map();\n    /** @type {Boolean} 联动是否启动。 */\n    this.isRunning = false;\n  }\n\n  /**\n   *\n   *\n   * @param { Array<string> } viewports\n   * @param { Array<string> } properties\n   * @return { string }\n   * @memberof LinkageManager\n   */\n  link(viewports, properties) {\n    const obj = {\n      viewports,\n      properties,\n    };\n\n    const { viewportMap } = this;\n    viewports.forEach((id) => {\n      // TODO: 注入属性变化监听并且再响应属性变化的时候，将该变化同步给其他viewport\n      const viewport = viewportMap.get(id);\n      // reduce出 除了当前id意外的其他viewport\n      const relatedViewports = viewports.reduce((relatedViewports, id2) => {\n        if (id !== id2) {\n          relatedViewports.push(viewportMap.get(id2));\n        }\n        return relatedViewports;\n      }, []);\n\n      // 将关心的属性注入到viewport里\n      viewport.imageView.inject(properties);\n      properties.forEach((prop) => {\n        const key = `${id}-${prop}`;\n        const fn = (data) => {\n          relatedViewports.forEach((relatedViewport) => {\n            relatedViewport?.useCmd(prop, data, false);\n          });\n        };\n        events[key] = fn;\n        viewport.imageView.on(key, fn);\n      });\n    });\n\n    const id = randomId();\n    this.links.set(id, obj);\n\n    console.log(`[Linkage] 计划联动[${viewports.join(\",\")}], 属性[${properties.join(\",\")}]`);\n    return id;\n  }\n\n  /**\n   *\n   *\n   * @param { string } linkId\n   * @returns { Boolean }\n   * @memberof LinkageManager\n   */\n  unlink(linkId) {\n    const { viewports, properties } = this.links.get(linkId);\n    viewports.forEach((viewportId) => {\n      this._removeHandler(viewportId, properties);\n    });\n\n    return this.links.delete(linkId);\n  }\n\n  /**\n   *\n   *\n   * @param { string } viewportId\n   * @memberof LinkageManager\n   */\n  removeViewport(viewportId) {\n    // TODO: 注入的事件监听要移除啊\n    this.links.forEach((obj, key, links) => {\n      const { viewports, properties } = obj;\n      const index = viewports.findIndex((v) => v === viewportId);\n      if (index >= 0) {\n        const id = viewports.splice(index, 1);\n        this._removeHandler(id, properties);\n      }\n\n      if (viewports.length === 1) {\n        const [id] = viewports;\n        this._removeHandler(id, properties);\n        links.delete(key);\n        return;\n      }\n\n      links.set(key, { viewports, properties });\n    });\n  }\n\n  /**\n   * 启动联动\n   *\n   * @memberof LinkageManager\n   */\n  launch() {\n    this.isRunning = true;\n  }\n\n  /**\n   * 终止联动\n   *\n   * @memberof LinkageManager\n   */\n  terminate() {\n    this.isRunning = false;\n  }\n\n  _removeHandler(viewportId, properties) {\n    const { viewportMap } = this;\n    let viewport = viewportMap.get(viewportId);\n    if (!viewport) {\n      return;\n    }\n\n    properties.forEach((prop) => {\n      const key = `${id}-${prop}`;\n      const fn = events[key];\n      viewport.imageView.off(key, fn);\n      delete events[key];\n    });\n  }\n}\n\nexport default LinkageManager;\n","const PREFIX = \"viewer_\";\nexport const VIEWER_INTERNAL_EVENTS = {\n  /** 父容器大小发生变化*/\n  ROOT_SIZE_CHANGED: `${PREFIX}root_size_changed`,\n  /** 容器位置发生变化*/\n  POSITION_CHANGED: `${PREFIX}position_changed`,\n  /** 视图大小发生变化*/\n  SIZE_CHANGED: `${PREFIX}size_changed`,\n  /** 页码切换*/\n  SLICE_CHANGED: `${PREFIX}slice_changed`,\n  /** 视图旋转*/\n  ROTATION_CHANGED: `${PREFIX}rotation_changed`,\n  /** 视图缩放*/\n  SCALE_CHANGED: `${PREFIX}scale_changed`,\n  /** 视图渲染完成*/\n  IMAGE_RENDERED: `${PREFIX}image_rendered`,\n  /** 图像矩阵发生变化 */\n  MATRIX_CHANGED: `${PREFIX}matrix_rendered`,\n};\n","/**\n * @param { Image } image\n * @param { Array } lut\n * @param { HTMLCanvasElement } renderCanvas\n */\nexport const renderColorImage = (image, lut, renderCanvas) => {\n  const { samplesPerPixel, pixelData } = image;\n  const { width, height } = renderCanvas;\n  const ctx = renderCanvas.getContext(\"2d\");\n  ctx.fillStyle = \"white\";\n  ctx.fillRect(0, 0, width, height);\n  ctx.imageSmoothingEnabled = false;\n\n  const renderCanvasData = ctx.getImageData(0, 0, width, height);\n  let imageDataIndex = 0;\n  let numPixels = width * height;\n  let i = 0;\n  while (i < numPixels * samplesPerPixel) {\n    renderCanvasData.data[imageDataIndex++] = lut[pixelData[i++] + -image.minPixelValue]; // Red\n    renderCanvasData.data[imageDataIndex++] = lut[pixelData[i++] + -image.minPixelValue]; // Green\n    renderCanvasData.data[imageDataIndex++] = lut[pixelData[i++] + -image.minPixelValue]; // Blue\n    renderCanvasData.data[imageDataIndex++] = lut[pixelData[i++] + -image.minPixelValue];\n  }\n\n  ctx.putImageData(renderCanvasData, 0, 0);\n};\n","let lutCache = {};\nexport const getLut = (image, displayState) => {\n  const { wwwc, invert = false } = displayState;\n  let { windowWidth, windowCenter } = image;\n  if (wwwc?.ww && wwwc?.wc) {\n    const { ww, wc } = wwwc;\n    windowCenter = wc;\n    windowWidth = ww;\n  }\n\n  // 做一个缓存清理机制\n  if (Reflect.ownKeys(lutCache).length > 50) {\n    lutCache = {};\n  }\n\n  const { minPixelValue, maxPixelValue } = image;\n  const cacheKey = `${windowWidth}-${windowCenter}-${+invert}-${minPixelValue}-${maxPixelValue}`;\n  if (!lutCache[cacheKey]) {\n    lutCache[cacheKey] = generateLut(image, windowWidth, windowCenter, invert);\n  }\n\n  return lutCache[cacheKey];\n};\n\nconst generateLut = (image, windowWidth, windowCenter, invert) => {\n  const { minPixelValue, maxPixelValue } = image;\n  const offset = Math.min(minPixelValue, 0);\n\n  const length = maxPixelValue - offset + 1;\n  let lut = new Uint8ClampedArray(length);\n\n  const { slope, intercept } = image;\n  const mLutFn = linearModalityLut(slope, intercept);\n  const wwwcLutFn = wwwcLut(windowWidth, windowCenter);\n\n  if (!invert) {\n    for (let i = minPixelValue; i <= maxPixelValue; i += 1) {\n      lut[i - offset] = wwwcLutFn(mLutFn(i));\n    }\n  } else {\n    for (let i = minPixelValue; i <= maxPixelValue; i += 1) {\n      lut[i - offset] = 255 - wwwcLutFn(mLutFn(i));\n    }\n  }\n\n  return lut;\n};\n\nconst linearModalityLut = (slope, intercept) => {\n  return (pixelValue) => {\n    return pixelValue * slope + intercept;\n  };\n};\n\nconst wwwcLut = (ww, wc) => {\n  return (mlutValue) => {\n    return ((mlutValue - wc) / ww + 0.5) * 255.0;\n  };\n};\n","/**\n * @param { Image } image\n * @param { Array } lut\n * @param { HTMLCanvasElement } renderCanvas\n */\nexport const renderGrayImage = (image, lut, renderCanvas) => {\n  // 默认使用alpha 通道的数据渲染\n  const { pixelData, minPixelValue } = image;\n  const { width, height } = renderCanvas;\n  const ctx = renderCanvas.getContext(\"2d\");\n  ctx.fillStyle = \"white\";\n  ctx.fillRect(0, 0, width, height);\n  ctx.imageSmoothingEnabled = true;\n  const renderCanvasData = ctx.getImageData(0, 0, width, height);\n\n  let imageDataIndex = 3;\n  let numPixels = width * height;\n  let i = 0;\n  while (i < numPixels) {\n    renderCanvasData.data[imageDataIndex] = lut[pixelData[i++] + -minPixelValue];\n    imageDataIndex += 4;\n  }\n\n  ctx.putImageData(renderCanvasData, 0, 0);\n};\n","import { renderColorImage } from \"./render-color\";\nimport { getLut } from \"./lut\";\nimport { renderGrayImage } from \"./render-gray\";\nclass CanvasRenderer {\n  constructor() {\n    this.type = \"canvas\";\n    this.renderCanvas = document.createElement(\"canvas\");\n  }\n\n  async render(image, displayState) {\n    const { renderCanvas } = this;\n    const lut = getLut(image, displayState);\n    const { color } = image;\n    let renderFn = [\"rgb\", \"rgba\"].includes(color) ? renderColorImage : renderGrayImage;\n    renderFn(image, lut, renderCanvas);\n  }\n\n  get renderData() {\n    return this.renderCanvas;\n  }\n}\n\nexport default CanvasRenderer;\n","class WebglRenderer {\n  constructor() {\n    this.type = \"webgl\";\n    this.renderCanvas = document.createElement(\"canvas\");\n  }\n\n  async render(image, displayState) {}\n\n  get renderData() {\n    return this.renderCanvas;\n  }\n}\n\nexport default WebglRenderer;\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n","import Transform from \"./transform\";\nconst transform = new Transform();\nexport const applyTransform = (displayState, canvas, renderCanvas) => {\n  transform.reset();\n  const { offset, scale, rotate, flip } = displayState;\n  if (offset) {\n    transform.translate(offset.x, offset.y);\n  }\n\n  const { width, height } = canvas;\n  transform.translate(width / 2, height / 2);\n\n  if (flip) {\n    const { h = false, v = false } = flip;\n    const fv = v ? -1 : 1;\n    const fh = h ? -1 : 1;\n    transform.scale(fh, fv);\n  }\n\n  if (!!scale) {\n    transform.scale(scale, scale);\n  }\n\n  if (!!rotate) {\n    transform.rotate(rotate);\n  }\n\n  const { width: rw, height: rh } = renderCanvas;\n  transform.translate(-rw / 2, -rh / 2);\n  return transform.m;\n};\n","class Transform {\n  constructor() {\n    this.reset();\n  }\n\n  reset() {\n    this.m = [1, 0, 0, 1, 0, 0];\n  }\n\n  clone() {\n    const tmp = new Transform();\n    tmp.m = [...this.m];\n    return tmp;\n  }\n  multiply(matrix) {\n    const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n    const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n    const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n  }\n\n  invert() {\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[2] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n  }\n\n  rotate(deg) {\n    const c = Math.cos((deg * Math.PI) / 180);\n    const s = Math.sin((deg * Math.PI) / 180);\n    const m11 = this.m[0] * c + this.m[2] * s;\n    const m12 = this.m[1] * c + this.m[3] * s;\n    const m21 = this.m[0] * -s + this.m[2] * c;\n    const m22 = this.m[1] * -s + this.m[3] * c;\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n  }\n\n  translate(x, y) {\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n  }\n\n  scale(sx, sy) {\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n  }\n\n  transformPoint(px, py) {\n    const x = px;\n    const y = py;\n\n    px = x * this.m[0] + y * this.m[2] + this.m[4];\n    py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return {\n      x: px,\n      y: py,\n    };\n  }\n}\n\nexport default Transform;\n","// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n","require('../../modules/es6.reflect.has');\nmodule.exports = require('../../modules/_core').Reflect.has;\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","require('../../modules/es7.object.entries');\nmodule.exports = require('../../modules/_core').Object.entries;\n","/**\n * 数据验证，如果对比过后可以赋值，返回true、否则返回false\n *\n * @param { object } displayInfo\n * @param { object } newVal\n * @return { boolean }\n */\nexport const validate = (displayInfo, newVal) => {\n  const key = Reflect.ownKeys(newVal)[0];\n\n  const hasKey = Reflect.has(displayInfo, key);\n  if (!hasKey) {\n    return true;\n  }\n\n  const oldVal = Reflect.get(displayInfo, key);\n  const newType = typeof newVal[key];\n  if (newType === \"string\" || newType === \"boolean\" || newType === \"number\") {\n    return oldVal !== newVal[key];\n  } else if (newType === \"object\") {\n    const allSame = Object.entries(newVal[key]).every(([subKey, subValue]) => {\n      return oldVal[subKey] === subValue;\n    });\n\n    return !allSame;\n  }\n};\n","import { Component, RenderSchedule } from \"@saga/core\";\nimport { VIEWER_INTERNAL_EVENTS } from \"../constants\";\nimport { applyTransform } from \"../transform/apply\";\nimport { validate } from \"../validator\";\nclass AbstractViewport extends Component {\n  constructor(option = {}) {\n    super(option);\n\n    this.core = option.core;\n    /** @type { RenderSchedule } from core instance.*/\n    this.renderSchedule = this.core.renderSchedule;\n    this.renderer = null;\n    this.el = option.el;\n    this.canvas = null;\n\n    this.displayState = {\n      flip: { h: false, v: false },\n      scale: 1,\n      currentTransform: null,\n    };\n    window.view = this;\n\n    this.init();\n  }\n\n  init() {\n    this.initContainer();\n    this.initCanvas();\n    // this.initResize();\n  }\n\n  initContainer() {\n    const viewerContainer = document.createElement(\"div\");\n    viewerContainer.classList.add(\"dicom-container\");\n    viewerContainer.style.cssText = `position: absolute;top: 0;left: 0;width: 100%;height: 100%;border: 0; z-index:2;`;\n    this.viewerContainer = viewerContainer;\n\n    this.el.style.position = \"relative\";\n    this.el.style.overflow = \"hidden\";\n    this.el.insertBefore(viewerContainer, this.el.firstChild);\n  }\n\n  initCanvas() {\n    const canvas = document.createElement(\"canvas\");\n    canvas.style.position = \"absolute\";\n    canvas.style.display = \"block\";\n    canvas.style.zIndex = \"1\";\n    let { width, height } = this._getRootSize();\n    canvas.width = width;\n    canvas.height = height;\n    this.canvas = canvas;\n    this.canvas.className = \"__tx-dicom\";\n    this.canvas.id = this.id;\n    this.viewerContainer.insertBefore(this.canvas, this.viewerContainer.firstChild);\n  }\n\n  initResize() {\n    const className = \"tx-resizer\";\n    const tempIframe = this.el.querySelector(`.${className}`);\n    if (tempIframe) {\n      return;\n    }\n\n    let lastEmitResize = -1;\n    const resizeHandler = (e) => {\n      if (Date.now() - lastEmitResize <= 100) {\n        return;\n      }\n      lastEmitResize = Date.now();\n      this._sizeChanged = true;\n      this._calcSuitableSizeRatio();\n      this.renderSchedule.invalidate(this.render.bind(this), this.image);\n      this.emit(VIEWER_INTERNAL_EVENTS.ROOT_SIZE_CHANGED, this._getRootSize());\n    };\n    this.iframe = document.createElement(\"iframe\");\n    this.iframe.style.cssText = `position: absolute;top: 0;left: 0;width: 100%;height: 100%;border: 0; pointer-events:none;`;\n    this.iframe.classList = [className];\n    this.el.style.position = \"relative\";\n    this.el.style.overflow = \"hidden\";\n    this.viewerContainer.insertBefore(this.iframe, this.viewerContainer.firstChild);\n    this.iframe.contentWindow.onresize = resizeHandler;\n  }\n\n  showImage(image) {\n    this.image = image;\n    const { width: rw, height: rh } = this.renderer.renderData;\n    const { columns, rows } = image;\n    if (rw !== rows || rh !== columns) {\n      this.renderer.renderData.width = columns;\n      this.renderer.renderData.height = rows;\n      this._calcSuitableSizeRatio();\n    }\n    this._displayChanged = true;\n    this.renderSchedule.invalidate(this.render.bind(this), image);\n    this.emit(VIEWER_INTERNAL_EVENTS.SLICE_CHANGED, {\n      seriesId: image.seriesId,\n      sliceId: image.instanceNumber,\n    });\n  }\n\n  async render(image) {\n    if (!image) {\n      return;\n    }\n\n    let needDraw = false;\n\n    if (this._displayChanged) {\n      const { displayState } = this;\n      await this.renderer.render(image, displayState);\n      this._displayChanged = false;\n      needDraw = true;\n    }\n\n    const { width, height } = this._getRootSize();\n    if (this.canvas.width !== width || this.canvas.height !== height) {\n      this.canvas.width = width;\n      this.canvas.height = height;\n    }\n\n    if (this._flipChanged || this._positionChanged || this._rotateChanged || this._scaleChanged || this._sizeChanged) {\n      const { renderData } = this.renderer;\n      this.displayState.currentTransform = applyTransform(this.displayState, this.canvas, this.renderer.renderData);\n\n      // 矩阵变换\n      this._flipChanged = false;\n      this._positionChanged = false;\n      this._rotateChanged = false;\n      this._scaleChanged = false;\n      this._sizeChanged = false;\n\n      const { width: rootWidth, height: rootHeight } = this._getRootSize();\n      const { scale, rotate, offset = { x: 0, y: 0 } } = this.displayState;\n      const position = [(rootWidth - renderData.width * scale) / 2, (rootHeight - renderData.height * scale) / 2];\n      this.emit(VIEWER_INTERNAL_EVENTS.MATRIX_CHANGED, {\n        width: renderData.width,\n        height: renderData.height,\n        scale: scale || 1,\n        rootSize: this._getRootSize(),\n        rotate: rotate || 0,\n        offset: offset || [0, 0],\n        seriesId: this.image?.seriesId,\n        sliceId: this.image?.instanceNumber,\n        position,\n        flip: this.displayState.flip,\n      });\n      needDraw = true;\n    }\n\n    // 绘制\n    if (needDraw) {\n      const { renderData } = this.renderer;\n      const { width, height } = renderData;\n      const ctx = this.canvas.getContext(\"2d\");\n      ctx.fillStyle = \"black\";\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n      ctx.setTransform(...this.displayState.currentTransform);\n      // 使用renderData 进行绘制\n      ctx.drawImage(renderData, 0, 0, width, height, 0, 0, width, height);\n\n      this.emit(VIEWER_INTERNAL_EVENTS.IMAGE_RENDERED, {\n        wwwc: {\n          ww: this.displayState?.wwwc?.ww ?? this.image?.windowWidth,\n          wc: this.displayState?.wwwc?.wc ?? this.image?.windowCenter,\n        },\n        columns: this.image.columns,\n        rows: this.image.rows,\n        pixelData: this.image.pixelData,\n        seriesId: this.image.seriesId,\n        sliceId: this.image.instanceNumber,\n        columnPixelSpacing: this.image.columnPixelSpacing,\n        rowPixelSpacing: this.image.rowPixelSpacing,\n        slope: this.image.slope,\n        intercept: this.image.intercept,\n      });\n      needDraw = false;\n    }\n  }\n\n  setWWWC(val, dispatch = true) {\n    this._propertySetter({ wwwc: val }, \"_displayChanged\");\n    this.tryDispatchInjectEvents(\"wwwc\", val, dispatch);\n  }\n\n  setInvert(val, dispatch = true) {\n    this._propertySetter({ invert: val }, \"_displayChanged\");\n    this.tryDispatchInjectEvents(\"invert\", val, dispatch);\n  }\n\n  setOffset(val, dispatch = true) {\n    this._propertySetter({ offset: val }, \"_positionChanged\");\n    this.tryDispatchInjectEvents(\"offset\", val, dispatch);\n  }\n\n  setRotation(val, dispatch = true) {\n    this._propertySetter({ rotate: val }, \"_rotateChanged\");\n    this.tryDispatchInjectEvents(\"rotation\", val, dispatch);\n  }\n\n  setFlipV(val, dispatch = true) {\n    const flip = { v: val, h: this.displayState.flip.h };\n    this._propertySetter({ flip }, \"_flipChanged\");\n    this.tryDispatchInjectEvents(\"flipV\", val, dispatch);\n  }\n\n  setFlipH(val, dispatch = true) {\n    const flip = { v: this.displayState.flip.v, h: val };\n    this._propertySetter({ flip }, \"_flipChanged\");\n    this.tryDispatchInjectEvents(\"flipH\", val, dispatch);\n  }\n\n  setScale(val, dispatch = true) {\n    this._propertySetter({ scale: val }, \"_scaleChanged\");\n    this.tryDispatchInjectEvents(\"scale\", val, dispatch);\n  }\n\n  setTranslation(val) {\n    this._propertySetter({ translation: val }, \"_positionChanged\");\n    this.tryDispatchInjectEvents(\"translation\", val, dispatch);\n  }\n\n  _getRootSize() {\n    let { clientWidth, clientHeight } = this.el;\n    return { width: clientWidth, height: clientHeight };\n  }\n\n  _propertySetter(val, effectProperty, merge = true) {\n    if (!validate(this.displayState, val)) {\n      return false;\n    }\n\n    if (merge) {\n      Object.assign(this.displayState, val);\n    }\n\n    this[effectProperty] = true;\n    this.renderSchedule.invalidate(this.render.bind(this), this.image);\n    return true;\n  }\n\n  _calcSuitableSizeRatio() {\n    // 根据renderCanvas的大小计算缩放尺寸（如果有的话）\n    if (!this?.renderer?.renderData) {\n      return;\n    }\n\n    const { width, height } = this._getRootSize();\n    const { width: rw, height: rh } = this.renderer.renderData;\n\n    const screenRatio = width / height;\n    let scaleResult = width / rw;\n    let imageRatio = rw / rh;\n    if (screenRatio > imageRatio) {\n      scaleResult = height / rh;\n    }\n\n    this.setScale(scaleResult);\n  }\n\n  resize(width, height) {\n    this._sizeChanged = true;\n    this._calcSuitableSizeRatio();\n    this.renderSchedule.invalidate(this.render.bind(this), this.image);\n    this.emit(VIEWER_INTERNAL_EVENTS.ROOT_SIZE_CHANGED, { width, height });\n  }\n\n  async snapshot() {}\n\n  inject(eventNames) {\n    // [\"slice\", \"wwwc\"] 这样的\n    // 优化，如：[\"slice\", \"wwwc\"] 又来了一份 [\"slice\", \"wwwc\", \"flipV\"] 此时会合并数据\n    this.injectEventNames = (this.injectEventNames ?? []).concat(...eventNames);\n    this.injectEventNames = [...new Set(this.injectEventNames)];\n  }\n\n  tryDispatchInjectEvents(evt, data, dispatch = true) {\n    if (!dispatch) {\n      return;\n    }\n\n    const { injectEventNames = [] } = this;\n    if (injectEventNames.includes(evt)) {\n      this.emit(`${this.id}-${evt}`, data);\n    }\n  }\n\n  static create() {\n    console.error(\"need implemented by subclass.\");\n  }\n}\n\nexport default AbstractViewport;\n","import AbstractViewport from \"./abstract-viewport\";\n\nclass PixelViewport extends AbstractViewport {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  static create(option) {\n    return new PixelViewport(option);\n  }\n}\n\nexport default PixelViewport;\n","import AbstractViewport from \"./abstract-viewport\";\nclass StandardViewport extends AbstractViewport {\n  constructor(option) {\n    super(option);\n  }\n\n  static create(option) {\n    return new StandardViewport(option);\n  }\n}\n\nexport default StandardViewport;\n","import AbstractViewport from \"./abstract-viewport\";\n\nclass VideoViewport extends AbstractViewport {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  init() {\n    this.initContainer();\n    this.initVideo();\n  }\n\n  initVideo() {\n    const video = document.createElement(\"video\");\n    video.style.position = \"absolute\";\n    video.style.display = \"block\";\n    let { width, height } = this._getRootSize();\n    video.width = width;\n    video.height = height;\n    this.video = video;\n    this.video.className = \"__tx-dicom\";\n    this.video.controls = true;\n    this.video.id = this.id;\n    this.viewerContainer.insertBefore(this.video, this.viewerContainer.firstChild);\n    this.viewerContainer.style.zIndex = 10;\n  }\n\n  showVideo(src) {\n    this.video.src = src;\n  }\n\n  resize(width, height) {\n    super.resize(width, height);\n    this.video.width = width;\n    this.video.height = height;\n  }\n\n  async snapshot() {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(this.video, 0, 0);\n    return canvas;\n  }\n  static create(option) {\n    return new VideoViewport(option);\n  }\n}\n\nexport default VideoViewport;\n","import CanvasRenderer from \"./render/canvas\";\nimport WebglRenderer from \"./render/webgl\";\nimport { webglSupported } from \"./render/webgl/utils\";\nimport { PixelViewport, StandardViewport, VideoViewport } from \"./viewports\";\n\nexport const factory = (option) => {\n  let viewport = null; // 视窗\n  // 使用canvas 还是 webgl 去渲染。\n  let renderer =\n    option.renderer === \"webgl\"\n      ? webglSupported()\n        ? new WebglRenderer()\n        : new CanvasRenderer()\n      : new CanvasRenderer();\n\n  switch (option.plane) {\n    case \"standard\":\n      viewport = StandardViewport.create(option);\n      break;\n    case \"pixel\":\n      viewport = PixelViewport.create(option);\n      break;\n    case \"video\":\n      viewport = VideoViewport.create(option);\n      break;\n  }\n\n  viewport.core = option.core;\n  viewport.renderer = renderer; // 设置渲染器\n  return viewport;\n};\n","/**\n *\n * @returns webgl是否支持\n */\nexport const webglSupported = () => {\n  // Adapted from\n  // http://stackoverflow.com/questions/9899807/three-js-detect-webgl-support-and-fallback-to-regular-canvas\n\n  const options = {\n    failIfMajorPerformanceCaveat: true,\n  };\n\n  try {\n    const canvas = document.createElement(\"canvas\");\n\n    return (\n      !!window.WebGLRenderingContext &&\n      (canvas.getContext(\"webgl2\", options) ||\n        canvas.getContext(\"webgl\", options) ||\n        canvas.getContext(\"experimental-webgl\", options))\n    );\n  } catch (e) {\n    return false;\n  }\n};\n","import { Component } from \"@saga/core\";\nimport { API, TOOLVIEW_INTERNAL_EVENTS, View } from \"@saga/tools\";\nimport { factory as ViewFactory, VIEWER_INTERNAL_EVENTS } from \"@saga/viewer\";\nimport { appendIFrame } from \"./utils\";\nclass Viewport extends Component {\n  constructor(option) {\n    super();\n    this.init(option);\n    window.a = this;\n    this.data = {};\n    this.currentIndex = 0;\n  }\n\n  async init(option) {\n    let opt = Object.assign({}, option, { id: this.id });\n    this.option = opt;\n    const toolView = new View(opt);\n    const api = new API();\n    appendIFrame(opt.el, (parent) => {\n      // 父容器尺寸发生变化\n      const { clientWidth: width, clientHeight: height } = parent;\n      imageView?.resize(width, height);\n      toolView?.resize(width, height);\n    });\n    const imageView = ViewFactory(opt);\n\n    imageView.on(VIEWER_INTERNAL_EVENTS.MATRIX_CHANGED, (info) => {\n      toolView.updateViewport(info);\n      // 更新视图， 根据传来的seriesId, sliceId。\n      const sliceKey = `${info.seriesId}-${info.sliceId}`;\n      const sliceData = this.data?.[sliceKey] ?? new Map();\n      toolView.resetData(sliceData);\n    });\n\n    imageView.on(VIEWER_INTERNAL_EVENTS.IMAGE_RENDERED, (info) => {\n      toolView.updateImageState(info);\n    });\n\n    // 记录上次刷新toolview数据时间，如果时间间隔过短，就不再刷新。从而提升性能\n    let lastRenderDataElapsed = Date.now();\n    imageView.on(VIEWER_INTERNAL_EVENTS.SLICE_CHANGED, (info) => {\n      // 更新视图， 根据传来的seriesId, sliceId。\n      this.option.seriesId = info.seriesId;\n      const sliceKey = `${info.seriesId}-${info.sliceId}`;\n      this.sliceKey = sliceKey;\n      const sliceData = this.data?.[sliceKey] ?? new Map();\n      const now = Date.now();\n      if (now - lastRenderDataElapsed < 100) {\n        // 层切换时间间隔太短，不进行数据刷新，避免浪费\n        return;\n      }\n\n      const { renderer, canvas } = imageView;\n      toolView.updateImageState({\n        imgCanvas: renderer.renderData,\n        canvas,\n      });\n      toolView.renderData(sliceData);\n      lastRenderDataElapsed = now;\n    });\n\n    toolView.on(TOOLVIEW_INTERNAL_EVENTS.DATA_CREATED, (data) => {\n      const { sliceKey } = this;\n      const sliceData = this.data?.[sliceKey] ?? new Map();\n      sliceData.set(data.id, data.data);\n      this.data[sliceKey] = sliceData;\n    });\n\n    toolView.on(TOOLVIEW_INTERNAL_EVENTS.DATA_UPDATED, (data) => {\n      const { sliceKey } = this;\n      const sliceData = this.data?.[sliceKey] ?? new Map();\n      sliceData.set(data.id, data.data);\n      this.data[sliceKey] = sliceData;\n    });\n\n    toolView.on(TOOLVIEW_INTERNAL_EVENTS.DATA_REMOVED, (data) => {\n      const { sliceKey } = this;\n      const sliceData = this.data?.[sliceKey] ?? new Map();\n      sliceData.delete(data.id);\n      this.data[sliceKey] = sliceData;\n    });\n\n    [api, toolView].map((obj) => {\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_ROTATION, (info) => imageView.setRotation(info.rotate, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_WWWC, (info) => imageView.setWWWC(info.wwwc, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_FLIPH, (info) => imageView.setFlipH(info.h, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_FLIPV, (info) => imageView.setFlipV(info.v, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_INVERT, (info) => imageView.setInvert(info.invert, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_SCALE, (info) => imageView.setScale(info.scale, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_TRANSLATE, (info) => imageView.setOffset(info.offset, info.dispatch));\n      obj.on(TOOLVIEW_INTERNAL_EVENTS.TOOL_STACK_CHANGE, async (info) => {\n        const { delta, loop } = info;\n        const { plane, seriesId, resource } = this.option;\n        this.currentIndex += delta;\n        this.currentIndex = resource.getIllegalIndex(this.currentIndex, seriesId, plane, loop);\n        const image = await resource.getImage(seriesId, this.currentIndex, plane);\n\n        imageView.showImage(image);\n      });\n    });\n\n    this._toolView = toolView;\n    this._imageView = imageView;\n    this.api = api;\n  }\n\n  get toolView() {\n    return this._toolView;\n  }\n\n  get imageView() {\n    return this._imageView;\n  }\n\n  useTool(toolType, button = 1) {\n    // 默认绑定左键\n    this.toolView.useTool(toolType, button);\n  }\n\n  useCmd(type, param, dispatch = true) {\n    this.api?.[type](param, dispatch);\n  }\n}\n\nexport default Viewport;\n","import { Core } from \"@saga/core\";\nimport LinkageManager from \"./linkage-manager\";\nimport Viewport from \"./view-bridge\";\nclass ViewportManager {\n  constructor() {\n    this.viewports = new Map();\n    // TODO: 理论上会有动态调整参数的概念，但是还未实现\n    this.core = new Core({ fps: 30 });\n    this.linkManager = new LinkageManager(this.viewports);\n    window.__TX_VIEWPORT_MANAGER__ = this;\n  }\n\n  addViewport(option) {\n    // 将核心选调度器传入\n    Object.assign(option, { core: this.core, resource: this.resource });\n    let viewport = new Viewport(option);\n    this.viewports.set(viewport.id, viewport);\n    return viewport;\n  }\n\n  removeViewport(id) {\n    this.viewports.get(id)?.destroy();\n    this.viewports.delete(id);\n  }\n\n  link(viewports, properties) {}\n}\n\nexport default ViewportManager;\n"],"names":["ceil","Math","floor","it","isNaN","undefined","TypeError","global","module","window","self","Function","__g","core","version","__e","fn","that","length","aFunction","a","call","b","c","apply","arguments","exec","e","require$$0","_Object$defineProperty","get","$export","S","F","defineProperty","require$$1","f","$Object","Object","key","desc","hasOwnProperty","KEY","exp","fails","$isExtensible","isObject","isExtensible","meta","onFreeze","$preventExtensions","preventExtensions","id","px","random","concat","toString","META","setDesc","_Object$isExtensible","FREEZE","require$$2","_Object$preventExtensions","setMeta","value","i","w","NEED","fastKey","create","_typeof","has","getWeak","SHARED","store","push","mode","copyright","Symbol","USE_SYMBOL","name","uid","def","TAG","tag","stat","prototype","configurable","$Symbol","charAt","wksExt","defined","$keys","toObject","IS_INCLUDES","keys","slice","propertyIsEnumerable","cof","split","IObject","min","toInteger","max","shared","arrayIndexOf","$this","el","fromIndex","O","toIObject","toLength","index","toAbsoluteIndex","IE_PROTO","object","names","result","_Object$keys","enumBugKeys","getOwnPropertySymbols","isArray","Array","_Array$isArray","arg","val","valueOf","bitmap","enumerable","writable","P","D","defineProperties","T","Properties","anObject","getKeys","dP","document","is","createElement","documentElement","Empty","createDict","iframeDocument","iframe","style","display","appendChild","src","contentWindow","open","write","lt","close","_Object$create","dPs","getOwnPropertyNames","hiddenKeys","_Object$getOwnPropertyNames","gOPN","windowNames","getWindowNames","$getOwnPropertyDescriptor","getOwnPropertyDescriptor","gOPD","toPrimitive","IE8_DOM_DEFINE","createDesc","pIE","$GOPD","$DP","gOPNExt","$JSON","JSON","_stringify","stringify","HIDDEN","wks","TO_PRIMITIVE","isEnum","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","USE_NATIVE","$GOPS","QObject","setter","findChild","setSymbolDesc","DESCRIPTORS","$fails","_create","this","protoDesc","wrap","sym","_k","isSymbol","iterator","$defineProperty","$defineProperties","getSymbols","gOPS","symbols","enumKeys","l","$propertyIsEnumerable","E","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","redefine","$set","set","G","W","es6Symbols","j","wellKnownSymbols","k","wksDefine","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","replacer","$replacer","args","require$$4","setToStringTag","done","iterated","kind","_t","_i","step","Iterators","Arguments","TO_STRING_TAG","DOMIterables","NAME","Collection","proto","hide","obj","_Symbol","_Symbol$iterator","constructor","Attributes","type","source","own","out","IS_FORCED","IS_GLOBAL","IS_STATIC","IS_PROTO","IS_BIND","B","IS_WRAP","exports","expProto","target","ctx","C","virtual","R","U","IteratorPrototype","Constructor","next","descriptor","$getPrototypeOf","TO_STRING","getPrototypeOf","_Object$getPrototypeOf","ITERATOR","BUGGY","returnThis","Base","DEFAULT","IS_SET","FORCED","$iterCreate","methods","getMethod","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","$at","pos","s","String","charCodeAt","point","ARG","tryGet","callee","forbiddenField","ret","ArrayProto","getIteratorMethod","classof","BREAK","RETURN","iterable","iterFn","getIterFn","isArrayIter","SPECIES","setImmediate","$task","clearImmediate","clear","defer","channel","port","un","process","setTask","clearTask","MessageChannel","Dispatch","counter","queue","run","listener","event","data","invoke","nextTick","now","port2","port1","onmessage","postMessage","addEventListener","importScripts","cel","html","removeChild","setTimeout","macrotask","Observer","MutationObserver","WebKitMutationObserver","Promise","isNode","PromiseCapability","resolve","reject","promise","$$resolve","$$reject","v","navigator","userAgent","x","promiseCapability","newPromiseCapability","safe","iter","from","arrayLike","aLen","mapfn","mapping","createProperty","SAFE_CLOSING","riter","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","skipClosing","arr","task","microtask","head","last","notify","flush","parent","domain","exit","enter","standalone","then","toggle","node","createTextNode","observe","characterData","versions","v8","$Promise","empty","newPromiseCapabilityModule","FakePromise","PromiseRejectionEvent","indexOf","isThenable","isReject","_n","chain","_c","_v","ok","_s","reaction","exited","handler","fail","_h","onHandleUnhandled","onUnhandled","console","unhandled","isUnhandled","perform","emit","onunhandledrejection","reason","error","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","anInstance","err","require$$3","onFulfilled","onRejected","speciesConstructor","require$$5","require$$6","r","capability","promiseResolve","require$$7","all","remaining","forOf","$index","alreadyCalled","race","onFinally","isFunction","callbackfn","asyncGeneratorStep","gen","_next","_throw","info","_Promise","_asyncToGenerator","_classCallCheck","instance","_defineProperties","props","_createClass","protoProps","staticProps","check","_Object$setPrototypeOf","test","buggy","__proto__","setPrototypeOf","runtime","Op","hasOwn","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","NativeIteratorPrototype","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","reverse","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","TYPE","SIZE","getEntry","_f","n","getConstructor","IS_MAP","ADDER","_l","redefineAll","validate","p","setStrong","$iterDefine","setSpecies","original","each","$create","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","asc","res","common","IS_WEAK","IS_ADDER","size","strong","toJSON","COLLECTION","of","A","cb","mapFn","nextItem","Map","CacheManager","cache","seriesId","plane","seriesCache","_this$cache","planeCache","_this$cache2","_this$cache2$seriesId","_this$cache2$seriesId2","_this$cache3","_this$cache3$seriesId","_this$cache3$seriesId2","map","_this$cache4","_this$cache4$seriesId","_Array$from","sort","item","_this$cache5","messageIds","onMessage","message","messageId","callback","_callbacks","PromiseWorker","worker","_worker","userMessage","messageToSend","controller","canvas","postprocessor","image","img","format","tempImg","Image","arrayBufferView","Uint8Array","blob","Blob","imageUrl","URL","webkitURL","createObjectURL","onload","evt","columns","width","rows","height","color","samplesPerPixel","windowWidth","windowCenter","maxPixelValue","minPixelValue","intercept","slope","getContext","drawImage","pixelData","getImageData","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","space","spaces","ltrim","RegExp","rtrim","exporter","ALIAS","FORCE","trim","string","replace","$parseInt","parseInt","$trim","hex","ws","str","radix","_parseInt","$parseFloat","parseFloat","Infinity","_parseFloat","HAS_INSTANCE","FunctionProto","$freeze","freeze","decodeBigEndian","metaData","bitsAllocated","arrayBuffer","buffer","offset","byteOffset","pixelRepresentation","Uint16Array","Int16Array","decodeLittleEndian","Float32Array","decodeRLE","planarConfiguration","frameData","frameSize","outFrame","ArrayBuffer","header","DataView","Int8Array","outIndex","numSegments","getInt32","inIndex","maxIndex","endOfSegment","decode8Planar","decode8","highByte","decode16","decode","pixelDataSource","transferSyntax","ExtensionTags","x00189305","x00083010","x00189306","x00189307","x00189309","x00189310","x00189311","x00209241","getValue","dataset","uint16","uint32","isASCII","dump","dumpObj","propertyName","elements","element","vr","attr","AllTags","toLocaleLowerCase","log","makeTag","group","padStart","Tags","PhotometricInterpretation","TransferSyntaxUID","BitsAllocated","Rows","Columns","SamplesperPixel","PixelRepresentation","PlanarConfiguration","PixelAspectRatio","RescaleSlope","RescaleIntercept","SmallestImagePixelValue","LargestImagePixelValue","WindowCenter","WindowWidth","InstanceNumber","LossyImageCompression","LossyImageCompressionRatio","LossyImageCompressionMethod","StudyDate","StudyTime","SeriesNumber","AccessionNumber","PatientID","PatientName","PatientSex","PatientAge","ImagerPixelSpacing_CT","ImagerPixelSpacing_CR","PatientOrientation_CT","PatientOrientation_CR","PatientPosition_CT","PatientPosition_CR","SliceThickness","SpacingBetweenSlices","Modality","StudyInstanceUID","SeriesInstanceUID","getMetaData","pixelSpacing","getNumberValues","byteArray","pixelAspectRatio","rowPixelSpacing","columnPixelSpacing","floatString","photometricInterpretation","invert","instanceNumber","intString","imageOrientationPatient","imagePositionPatient","sliceThickness","getNumberValue","spacingBetweenSlices","imageCompression","getCompressionState","lossyImageCompression","lossyImageCompressionRatio","lossyImageCompressionMethod","studyDate","studyTime","seriesNum","accessionNumber","patientId","patientName","stringUTF8","patientSex","patientAge","studyId","minimumLength","valueAsString","code","position","byte","readCodeList","dataOffset","join","decodeURIComponent","toFixed","createJPEGBasicOffsetTable","dicomParser","readEncapsulatedImageFrame","getPixelData","pixelDataElement","x7fe00010","encapsulatedPixelData","getEncapsulatedImageFrame","getUncompressedImageFrame","dataSet","basicOffsetTable","_pixelDataElement$bas","fragments","readEncapsulatedPixelDataFromFragments","pixelDataOffset","pixelsPerFrame","frameOffset","bitPos","isBitSet","unpackBinaryFrame","updateMetaForPixelData","postprocess","sizeInBytes","byteLength","getMinMaxValues","pixel","len","dumpTags","createImage","DicomParser","parseDicom","createWebImage","postOutgoingMessage","msg","ports","handleIncomingMessage","tryCatchFunc","finalResult","finalError","payload","loadImage","imageId","fetch","ab","loadWebImage","registerPromiseWorker","isXP","LoaderManager","workers","taskManager","cacheManager","initLoader","workerCount","hardwareConcurrency","_","LoaderWorker","promiseWorker","working","hasPendingTask","_startCheck","pendingTask","shift","ts","ti","tp","tr","cacheItem","getItem","delay","tasks","getTask","addPendingTask","_this","load","_rafInterval","requestAnimationFrame","bind","cancelAnimationFrame","ms","Date","getTime","TaskManager","Task","property","priority","fn0","fn1","fn2","fn3","sortFn","getTasks","filter","existIndex","findIndex","t","oldTask","_Date$now","splice","url","PreloadManager","currentTask","loopCount","preloadTasks","preIndex","preTask","sufIndex","sufTask","Resource","loaderManager","preloadManager","__TX_RESOURCE__","imageUrls","addTask","objArray","_this2","_this3","buildPreloadTask","loadSeries","purge","getItems","loop","arraySlice","factories","construct","partArgs","bound","rConstruct","Reflect","NEW_TARGET_BUG","ARGS_BUG","Target","newTarget","$args","_setPrototypeOf","o","_inherits","subClass","superClass","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_getPrototypeOf","possibleTypes","isValue","classRe","functionToString","isPrototype","$assign","K","assign","foo","bar","trzy","dest","opts1","options","contains","searchString","dscr","normalizeOpts","gs","isPlainFunction","on","once","off","descriptors","base","callable","__eeOnceListener__","__ee__","listeners","candidate","d","pool","poolOffset","bytes","Buffer","allocUnsafe","crypto","randomFillSync","subarray","customAlphabet","alphabet","getRandom","mask","clz32","customRandom","Component","opt","EventEmitter","_arrayLikeToArray","arr2","_iterableToArray","_unsupportedIterableToArray","minLen","arrayLikeToArray","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_arrayWithHoles","_nonIterableRest","_slicedToArray","arrayWithHoles","_e","_arr","iterableToArrayLimit","nonIterableRest","INTERNAL_EVENT","RAF","setInterval","CRAF","clearInterval","Stage","_fps","fpsInterval","lastRenderTime","isRunning","rafInterval","render","fps","RenderSchedule","stage","deferredQueue","onValidate","startRender","_this$deferredQueue","validateNow","stopRender","Core","option","initialize","__TX_CORE__","renderSchedule","TOOL_CONSTANTS","TOOL_COLORS","HOVER","NORMAL","TOOL_ITEM_SELECTOR","TOOL_TYPE","STACK_SCROLL","STACK_WHEEL_SCROLL","MAGNIFYING","WWWC","LENGTH","ANGLE","PROBE","ELLIPSE_ROI","POLYGON","ROTATION","SCALE","TRANSLATE","INTERNAL_EVENTS","DATA_CREATED","DATA_UPDATED","DATA_REMOVED","TOOL_TRANSLATE","TOOL_ROTATION","TOOL_SCALE","TOOL_WWWC","TOOL_STACK_CHANGE","TOOL_FLIPH","TOOL_FLIPV","TOOL_INVERT","viewportState","y","rotate","scale","rootWidth","rootHeight","centerX","centerY","initialState","API","playInterval","dispatch","wwwc","h","ww","wc","speed","delta","debounce","milliseconds","baseFunction","timer","wait","clearTimeout","throttle","lastEventTimestamp","limit","isEntries","$values","PI_OVER_180","PI","glob","WorkerGlobalScope","Konva","_global","isBrowser","isUnminified","param","dblClickWindow","getAngle","angle","angleDeg","enableTrace","pointerEventsEnabled","autoDrawEnabled","hitOnDragEnabled","capturePointerEventsEnabled","_mouseListenClick","_touchListenClick","_pointerListenClick","_mouseInDblClickWindow","_touchInDblClickWindow","_pointerInDblClickWindow","pixelRatio","devicePixelRatio","dragDistance","showWarnings","dragButtons","isDragging","isDragReady","_injectGlobal","_registerNode","NodeClass","getClassName","Transform","m","dirty","sx","sy","rad","cos","sin","m11","m12","m21","m22","matrix","dx","dy","m0","m1","m2","m3","m4","m5","yt","xt","translate","rotation","scaleX","scaleY","skewX","skewY","sqrt","acos","Util","_getRotation","PI_OVER_DEG180","DEG180_OVER_PI","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","req","_isElement","nodeType","_isFunction","_isPlainObject","_isArray","_isNumber","isFinite","_isString","_isBoolean","isValidSelector","selector","firstChar","toUpperCase","_sign","number","requestAnimFrame","createCanvasElement","createImageElement","_isInDocument","parentNode","_urlToImage","imageObj","_rgbToHex","g","_hexToRgb","bigint","getRandomColor","randColor","getRGB","rgb","substring","substr","colorToRGBA","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","toLowerCase","parts","match","Number","t2","t3","hsl","round","t1","haveIntersection","r1","r2","cloneObject","retObj","cloneArray","degToRad","deg","radToDeg","_degToRad","warn","_radToDeg","radians","_capitalize","func","_inRange","left","right","_getProjectionToSegment","x1","y1","x2","y2","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","py","pdist","_prepareArrayForTween","startArray","endArray","start","end","temp","newStart","pr","_prepareToStringify","visitedByCircularReferenceRemoval","_Object$getOwnPropertyDescriptor","_assign","_getFirstPointerId","touches","changedTouches","identifier","DD","flag","_dragElements","elem","dragStatus","justDragged","_drag","nodesToFireEvents","getStage","setPointersPositions","pointerId","_changedPointerPositions","find","abs","startPointerPos","startDrag","_setDragPosition","fire","_endDragBefore","drawNode","getLayer","batchDraw","_endDragAfter","propertyKey","receiver","_superPropBase","_get","_Reflect$get","superPropBase","_formatValue","getNumberValidator","getNumberOrAutoValidator","getStringValidator","getStringOrGradientValidator","isString","isGradient","addColorStop","getBooleanValidator","Factory","addGetterSetter","validator","after","addGetter","addSetter","addOverloadedGetterSetter","attrs","overWriteSetter","_setAttr","addComponentsGetterSetter","components","component","capitalize","getter","getAttr","basicValidator","getComponentValidator","oldVal","_fireChangeEvent","capitalizedAttr","addDeprecatedGetterSetter","backCompat","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","afterSetFilter","_filterUpToDate","simplifyArray","retArr","util","CONTEXT_METHODS","_context","_canvas","traceArr","_enableTrace","shape","fillEnabled","_fill","hasStroke","_stroke","fillAfterStrokeEnabled","strokeShape","fillShape","relaxed","rounded","trace","getCanvas","getPixelRatio","setTransform","bounds","clearRect","getWidth","getHeight","lineCap","getLineCap","setAttr","absOpacity","getAbsoluteOpacity","lineJoin","a0","a1","a2","a3","a4","a5","arc","arcTo","beginPath","bezierCurveTo","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","a6","a7","a8","ellipse","isPointInPath","path2d","fill","fillRect","strokeRect","text","maxWidth","fillText","measureText","lineTo","moveTo","rect","putImageData","quadraticCurveTo","restore","save","setLineDash","getLineDash","stroke","strokeText","transform","origSetter","methodName","origMethod","_trace","prop","op","globalCompositeOperation","_pixelRatio","SceneContext","_fillFunc","_getFillPattern","grd","_getLinearGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","_fillColor","hasPattern","getFillPatternImage","_fillPattern","hasLinearGradient","getFillLinearGradientColorStops","_fillLinearGradient","hasRadialGradient","getFillRadialGradientColorStops","_fillRadialGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","dash","strokeScaleEnabled","getStrokeScaleEnabled","_applyLineCap","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeLinearGradient","_strokeFunc","_b","getShadowRGBA","blur","getShadowBlur","getShadowOffset","getAbsoluteScale","ratio","HitContext","colorKey","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit","Canvas","config","isCache","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","padding","margin","border","background","top","previousRatio","setSize","setWidth","setHeight","mimeType","quality","toDataURL","SceneCanvas","HitCanvas","hitCanvas","TRANSFORM_CHANGE_STR","idCounter","Node","_id","eventListeners","_allEventListeners","_cache","_attachedDepsListeners","_lastPos","_batchingTransformChange","_needClearTransformCache","_isUnderCache","_dragEventId","_shouldFireChangeEvents","setAttrs","privateGetter","deps","depsString","dep","_clearCache","_getCache","_clearSelfAndDescendantCache","_requestDraw","conf","getClientRect","skipTransform","relativeTo","getParent","drawBorder","hitCanvasPixelRatio","cachedSceneCanvas","cachedFilterCanvas","cachedHitCanvas","sceneContext","hitContext","imageSmoothingEnabled","drawScene","drawHit","scene","hit","minX","minY","maxX","maxY","points","trans","getAbsoluteTransform","transformed","_applyOpacity","_applyGlobalCompositeOperation","canvasCache","_getCanvasCache","cacheCanvas","_getCachedSceneCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","evtStr","_delegate","baseEvent","events","_off","stopNode","targets","findAncestors","currentTarget","stopDrag","_remove","_clearCaches","children","_setChildrenIndices","remove","ancestors","_batchTransformChanges","_isListening","listening","_isVisible","visible","skipDragCheck","layer","layerUnderDrag","dragSkip","isListening","isVisible","nodes","child","depth","getDepth","addChildren","getChildren","getPointerPosition","copy","haveCachedParent","isCached","absoluteMatrix","getMatrix","absoluteTransform","getTranslation","origTrans","_clearTransform","_getAbsoluteTransform","_setTransform","setPosition","offsetX","offsetY","change","changeX","changeY","family","unshift","theta","zIndex","_getAbsoluteOpacity","opacity","newContainer","add","defaultValue","getAttrs","className","_JSON$stringify","includeSelf","_isMatch","ancestor","sel","selectorArr","hasName","_getStage","eventType","bubble","_fireAndBubble","_fire","at","_eachAncestorReverse","transformsEnabled","multiply","getTransform","copyInto","decompose","_getTransform","skew","allListeners","box","_toKonvaCanvas","getDragDistance","evtName","evtListeners","newVal","oldName","newName","fullName","compareShape","isAncestorOf","stopBubble","cancelBubble","newEvents","oldEvents","topListeners","_getProtoListeners","selfListeners","ap","getAbsolutePosition","_getPointerById","bubbleEvent","_createDragElement","newNodePos","dbf","dragBoundFunc","bounded","setAbsolutePosition","draggable","_dragChange","_dragCleanup","hasDraggingChild","_this4","_listenDrag","dragElement","isReady","screenRect","container","parse","_createNode","no","Class","_attrsAffectingSize","rotateDeg","setRotationDeg","getRotationDeg","Container","filterFunc","results","destroy","_validateAdd","hasChildren","destroyChildren","_generalFind","findOne","_descendants","valid","clone","intersects","can","caching","_drawCachedSceneCanvas","_drawChildren","shouldDrawHit","_drawCachedHitCanvas","drawMethod","clipWidth","clipHeight","clipFunc","hasClip","selfCache","clipX","clipY","hasComposition","selfRect","skipShadow","skipStroke","shapes","hasVisible","_transformedRect","Captures","SUPPORT_POINTER_EVENTS","getCapturedShape","createEvent","hasPointerCapture","setPointerCapture","releaseCapture","PointerEvent","content","dummyContext","getDummyContext","Shape","sceneFunc","hitFunc","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","pattern","fillPatternRepeat","fillPatternX","fillPatternY","fillPatternRotation","fillPatternScaleX","fillPatternScaleY","fillPatternOffsetX","fillPatternOffsetY","__getLinearGradient","fillLinearGradientColorStops","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","hasShadow","rgba","_calculate","strokeEnabled","strokeLinearGradientColorStops","bufferHitCanvas","forceFill","perfectDrawEnabled","hasFill","isTransparent","strokeForShadow","shadowForStrokeEnabled","_centroid","getSelfRect","applyStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","roundingOffset","bufferCanvas","bufferContext","drawFunc","getSceneFunc","skipBuffer","cachingSelf","_useBufferCanvas","_applyLineJoin","_applyShadow","hitImageData","hitData","rgbColorKey","alphaThreshold","hitWidth","hitHeight","PointerEvents","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","Layer","_waitingForDraw","_checkVisibility","_setSmoothEnabled","createPNGStream","getHitCanvas","getNativeCanvasElement","insertBefore","moveToTop","moveUp","moveDown","moveToBottom","getType","draw","spiralSearchDistance","continueSearch","intersectionOffset","_getIntersection","antialiased","p3","clearBeforeDraw","hitGraphEnabled","_defineProperty","EVENTS","EVENTS_MAP","mouse","touch","pointer","getEventType","getEventsMap","checkNoClip","stages","_pointerPositions","_buildDOM","_bindContentEvents","_resizeDOM","isLayer","isFastLayer","getElementsByClassName","getElementById","parentElement","layers","layerCanvas","getIntersection","rest","pointerenter","pointerover","evenType","targetShape","_getTargetShape","eventsEnabled","pointerout","pointerleave","pointerPos","triggeredOnShape","pointerdown","isTouch","preventDefault","cancelable","processedShapesIds","differentTarget","pointermove","clickStartShape","clickEndShape","_this5","fireDblClick","pointerup","pointerclick","pointerdblclick","contentPosition","_getContentPosition","_this6","clientX","clientY","getBoundingClientRect","clientWidth","clientHeight","innerHTML","userSelect","setAttribute","ownKeys","ARRAY_TYPE","hypot","rx","ry","cosθ","sinθ","tmp0","tmp1","tmp2","tmp3","ox","oy","cx","cy","m00","m01","m02","m10","m20","glMatrix","a00","a01","a02","a10","a11","a12","a20","a21","a22","b01","b11","b21","det","mat3","verify","invertPoint","Area","_Reflect$ownKeys","update","rootSize","flip","fv","fh","applyTransform","V","existingDescriptor","ownDesc","_Reflect$set","getControlPoints","x0","y0","d01","pow","d12","fa","fb","expandPoints","tension","cp","allPoints","Line","closed","bezier","getTensionPoints","fillStrokeShape","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","getNumberArrayValidator","Circle","radius","Anchor","DashLine","ATTR_CHANGE_LIST","attrChangeListLen","Text","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","textArr","textArrLen","fontSize","lineHeightPx","lineHeight","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","strokeStyle","array","li","letter","_partialText","measureSize","getTextWidth","textWidth","textHeight","metrics","font","fontStyle","fontVariant","fontFamily","hasSpace","hasQuotes","_getTextWidth","lines","fixedWidth","fixedHeight","maxHeightPx","currentHeightPx","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","lastIndexOf","trimRight","_addTextLine","trimLeft","SHADOW","cornerRadius","TextField","_Object$assign","completeState","isComplete","button","setActionComplete","ToolState","toolInstance","toolType","includes","_this$state","needInitial","_this$state2","TOOL_CONSTRUCTOR","$stage","mouseUp","Group","activeUtil","_TOOL_COLORS$HOVER","show","numChildren","_TOOL_COLORS$HOVER2","_TOOL_COLORS$HOVER3","_TOOL_COLORS$HOVER4","_TOOL_COLORS$NORMAL","_TOOL_COLORS$NORMAL2","_TOOL_COLORS$NORMAL3","_TOOL_COLORS$NORMAL4","cursor","toCT","connectTextNode","dashLine","to","formPoint","toPoint","getDistance","distance","randomId","UIComponent","useDefaultMouseEffect","_bindMouseEffect","dragging","BaseTool","_data","UIInitialed","careStageEvent","initialUI","renderData","BaseAnnotationTool","fnList","coord","transformPoint","textPoint","textBox","ellipse_roi","worldToLocal","AngleTool","dragged","pointCount","getRelativePointerPosition","_getAngle","_tryUpdateData","textfield","showAngle","anchorStart","anchorMiddle","anchorEnd","anchor","dragAnchor","dragAnchorEnd","line1","line2","dragText","dragEnd","every","getId","getPosition","dot","atan2","verifyDataLegal","_convertData","localPosition","localStart","localMiddle","localEnd","localText","isStrict","Ellipse","radiusX","radiusY","Rect","topLeft","topRight","bottomLeft","bottomRight","noOfElements","isNumber","isValidArray","getNumberOrArrayOfNumbersValidator","TextItem","confg","textfiled1","textfield2","imageState","sliceId","imgCanvas","EllipseTool","isDown","anchor1","anchor2","ti1","ti2","ti3","ti4","ti5","dashline","dragMove","_getPixelData","_getInfo","setText","area","variance","avg","center","ellipsePixelData","row","column","_inEllipse","pixelDataIndex","sum","_getArea","LengthTool","_calcText","usePosition","spX","spY","ProbeTool","ctValue","_getCT","tmpCanvas","MagnifyTool","dom","originalRadius","centerPoint","circleBG","circle","_getImage","fillPatternOffset","circle2","getSqSegDist","simplifyDPStep","first","sqTolerance","simplified","maxSqDist","sqDist","simplifyDouglasPeucker","simplify","tolerance","highestQuality","prevPoint","newPoints","simplifyRadialDist","PolygonTool","isPaint","pts","flat","RotationTool","ScaleTool","oldOffsetY","screenY","stepY","ticks","factor","StackTool","movementY","sign","StackWheelTool","wheelDelta","TranslateTool","oldOffset","screenX","WWWCTool","ee","mouseenter","toolState","which","getToolInstance","mouseEnter","mouseleave","mouseLeave","mouseout","mouseOut","mouseover","mouseOver","mousemove","mouseMove","mousedown","mouseDown","mouseup","click","contextmenu","mouseRightClick","dblclick","mouseDoubleClick","wheel","mouseWheel","getToolType","documentEE","documentMouseMove","documentMouseUp","clones","documentKey","removeEventListener","View","initContainer","updateState","MouseTrap","toolContainer","classList","cssText","_getRootSize","eventName","removeChildren","transformCoords","setData","appendIFrame","rootDom","sizeChangeHandler","tempIframe","querySelector","lastEmitResize","resizeHandler","onresize","overflow","firstChild","LINK_PROPERTY","INVERT","FLIP_V","FLIP_H","TRANSLATION","POSITION","SLICE","LinkageManager","viewports","viewportMap","links","properties","viewport","relatedViewports","reduce","id2","imageView","inject","relatedViewport","useCmd","linkId","viewportId","_removeHandler","PREFIX","VIEWER_INTERNAL_EVENTS","ROOT_SIZE_CHANGED","POSITION_CHANGED","SIZE_CHANGED","SLICE_CHANGED","ROTATION_CHANGED","SCALE_CHANGED","IMAGE_RENDERED","MATRIX_CHANGED","renderColorImage","lut","renderCanvas","fillStyle","renderCanvasData","imageDataIndex","numPixels","lutCache","getLut","displayState","cacheKey","generateLut","Uint8ClampedArray","mLutFn","linearModalityLut","wwwcLutFn","wwwcLut","pixelValue","mlutValue","renderGrayImage","CanvasRenderer","WebglRenderer","Set","tmp","rw","rh","displayInfo","_Reflect$has","newType","_Object$entries","subKey","subValue","AbstractViewport","renderer","currentTransform","view","init","initCanvas","viewerContainer","_sizeChanged","_calcSuitableSizeRatio","invalidate","_displayChanged","needDraw","_flipChanged","_positionChanged","_rotateChanged","_scaleChanged","_this$image","_this$image2","_this$displayState2","_this$displayState2$w","_this$image3","_this$displayState3","_this$displayState3$w","_this$image4","_propertySetter","tryDispatchInjectEvents","translation","effectProperty","merge","_this$renderer","scaleResult","setScale","eventNames","injectEventNames","PixelViewport","StandardViewport","VideoViewport","initVideo","video","controls","videoWidth","videoHeight","factory","failIfMajorPerformanceCaveat","WebGLRenderingContext","webglSupported","Viewport","currentIndex","toolView","api","resize","ViewFactory","updateViewport","sliceKey","sliceData","_this2$data","resetData","updateImageState","lastRenderDataElapsed","_this2$data2","TOOLVIEW_INTERNAL_EVENTS","_this2$data3","_this2$data4","_this2$data5","setRotation","setWWWC","setFlipH","setFlipV","setInvert","setOffset","resource","getIllegalIndex","getImage","showImage","_toolView","_imageView","useTool","ViewportManager","linkManager","__TX_VIEWPORT_MANAGER__"],"mappings":"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"}